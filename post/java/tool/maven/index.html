<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Maven - Mythos</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="Mythos" /><meta name="description" content="目录 start Maven 安装 Maven常用命令 从jar安装到本地库 settings.xml配置 配置镜像源 阿里云 配置本地仓库 maven配置 主配置文件详解 配置代" /><meta name="keywords" content="Hugo, theme, even" />






<meta name="generator" content="Hugo 0.93.2 with theme even" />


<link rel="canonical" href="https://blogs.kuangcp.top/post/java/tool/maven/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.154ed883776547b0e136be39b3037f61350da06f888d0868d1756a9463cd9520.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="Maven" />
<meta property="og:description" content="目录 start Maven 安装 Maven常用命令 从jar安装到本地库 settings.xml配置 配置镜像源 阿里云 配置本地仓库 maven配置 主配置文件详解 配置代" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://blogs.kuangcp.top/post/java/tool/maven/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2018-12-20T10:25:26+00:00" />
<meta property="article:modified_time" content="2018-12-20T10:25:26+00:00" />

<meta itemprop="name" content="Maven">
<meta itemprop="description" content="目录 start Maven 安装 Maven常用命令 从jar安装到本地库 settings.xml配置 配置镜像源 阿里云 配置本地仓库 maven配置 主配置文件详解 配置代"><meta itemprop="datePublished" content="2018-12-20T10:25:26+00:00" />
<meta itemprop="dateModified" content="2018-12-20T10:25:26+00:00" />
<meta itemprop="wordCount" content="4383">
<meta itemprop="keywords" content="Maven," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Maven"/>
<meta name="twitter:description" content="目录 start Maven 安装 Maven常用命令 从jar安装到本地库 settings.xml配置 配置镜像源 阿里云 配置本地仓库 maven配置 主配置文件详解 配置代"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Mythos</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">Mythos</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Maven</h1>

      <div class="post-meta">
        <span class="post-time"> 2018-12-20 </span>
        <div class="post-category">
            <a href="/categories/java/"> Java </a>
            </div>
          <span class="more-meta"> 4383 words </span>
          <span class="more-meta"> 9 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#安装">安装</a>
      <ul>
        <li><a href="#maven常用命令">Maven常用命令</a></li>
        <li><a href="#settingsxml配置">settings.xml配置</a></li>
      </ul>
    </li>
    <li><a href="#maven配置">maven配置</a>
      <ul>
        <li><a href="#主配置文件详解">主配置文件详解</a></li>
        <li><a href="#配置代码编译版本">配置代码编译版本</a></li>
      </ul>
    </li>
    <li><a href="#构建">构建</a>
      <ul>
        <li><a href="#使用maven构建多模块的项目">使用maven构建多模块的项目</a></li>
        <li><a href="#profiles">Profiles</a></li>
        <li><a href="#测试">测试</a></li>
        <li><a href="#打包部署">打包部署</a></li>
      </ul>
    </li>
    <li><a href="#maven的依赖">maven的依赖</a>
      <ul>
        <li><a href="#1-依赖的范围">1 依赖的范围</a></li>
        <li><a href="#处理项目间依赖方法">处理项目间依赖方法</a></li>
        <li><a href="#依赖冲突">依赖冲突</a></li>
        <li><a href="#继承">继承</a></li>
      </ul>
    </li>
    <li><a href="#常用插件">常用插件</a>
      <ul>
        <li><a href="#lombok">lombok</a></li>
        <li><a href="#protobuf">protobuf</a></li>
        <li><a href="#versions-maven-plugin">Versions Maven Plugin</a></li>
        <li><a href="#maven-enforcer-plugin">Maven Enforcer Plugin</a></li>
        <li><a href="#maven-deploy-plugin">Maven Deploy plugin</a></li>
      </ul>
    </li>
    <li><a href="#构建工具对比">构建工具对比</a>
      <ul>
        <li><a href="#maven和ant的区别一">Maven和Ant的区别一</a></li>
        <li><a href="#maven的优势">Maven的优势</a></li>
      </ul>
    </li>
    <li><a href="#发布构件到公共仓库">发布构件到公共仓库</a></li>
  </ul>

  <ul>
    <li><a href="#nexus">nexus</a></li>
    <li><a href="#码云">码云</a>
      <ul>
        <li><a href="#创建仓库">创建仓库</a></li>
        <li><a href="#引用仓库中的构件">引用仓库中的构件</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p><strong>目录 start</strong></p>
<ol>
<li><a href="#maven">Maven</a>
<ol>
<li><a href="#%E5%AE%89%E8%A3%85">安装</a>
<ol>
<li><a href="#maven%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4">Maven常用命令</a>
<ol>
<li><a href="#%E4%BB%8Ejar%E5%AE%89%E8%A3%85%E5%88%B0%E6%9C%AC%E5%9C%B0%E5%BA%93">从jar安装到本地库</a></li>
</ol>
</li>
<li><a href="#settingsxml%E9%85%8D%E7%BD%AE">settings.xml配置</a>
<ol>
<li><a href="#%E9%85%8D%E7%BD%AE%E9%95%9C%E5%83%8F%E6%BA%90">配置镜像源</a>
<ol>
<li><a href="#%E9%98%BF%E9%87%8C%E4%BA%91">阿里云</a></li>
</ol>
</li>
<li><a href="#%E9%85%8D%E7%BD%AE%E6%9C%AC%E5%9C%B0%E4%BB%93%E5%BA%93">配置本地仓库</a></li>
</ol>
</li>
</ol>
</li>
<li><a href="#maven%E9%85%8D%E7%BD%AE">maven配置</a>
<ol>
<li><a href="#%E4%B8%BB%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3">主配置文件详解</a></li>
<li><a href="#%E9%85%8D%E7%BD%AE%E4%BB%A3%E7%A0%81%E7%BC%96%E8%AF%91%E7%89%88%E6%9C%AC">配置代码编译版本</a></li>
</ol>
</li>
<li><a href="#%E6%9E%84%E5%BB%BA">构建</a>
<ol>
<li><a href="#%E4%BD%BF%E7%94%A8maven%E6%9E%84%E5%BB%BA%E5%A4%9A%E6%A8%A1%E5%9D%97%E7%9A%84%E9%A1%B9%E7%9B%AE">使用maven构建多模块的项目</a></li>
<li><a href="#profiles">Profiles</a></li>
<li><a href="#%E6%B5%8B%E8%AF%95">测试</a></li>
<li><a href="#%E6%89%93%E5%8C%85%E9%83%A8%E7%BD%B2">打包部署</a>
<ol>
<li><a href="#assembly">assembly</a></li>
<li><a href="#shade">shade</a></li>
</ol>
</li>
</ol>
</li>
<li><a href="#maven%E7%9A%84%E4%BE%9D%E8%B5%96">maven的依赖</a>
<ol>
<li><a href="#1-%E4%BE%9D%E8%B5%96%E7%9A%84%E8%8C%83%E5%9B%B4">1 依赖的范围</a>
<ol>
<li><a href="#%E4%BE%9D%E8%B5%96%E7%9A%84%E4%BC%A0%E9%80%92">依赖的传递</a></li>
</ol>
</li>
<li><a href="#%E5%A4%84%E7%90%86%E9%A1%B9%E7%9B%AE%E9%97%B4%E4%BE%9D%E8%B5%96%E6%96%B9%E6%B3%95">处理项目间依赖方法</a></li>
<li><a href="#%E4%BE%9D%E8%B5%96%E5%86%B2%E7%AA%81">依赖冲突</a>
<ol>
<li><a href="#%E6%8E%92%E9%99%A4%E4%BE%9D%E8%B5%96">排除依赖</a></li>
</ol>
</li>
<li><a href="#%E7%BB%A7%E6%89%BF">继承</a></li>
</ol>
</li>
<li><a href="#%E5%B8%B8%E7%94%A8%E6%8F%92%E4%BB%B6">常用插件</a>
<ol>
<li><a href="#lombok">lombok</a></li>
<li><a href="#protobuf">protobuf</a></li>
<li><a href="#versions-maven-plugin">Versions Maven Plugin</a></li>
<li><a href="#maven-enforcer-plugin">Maven Enforcer Plugin</a></li>
<li><a href="#maven-deploy-plugin">Maven Deploy plugin</a></li>
</ol>
</li>
<li><a href="#%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E5%AF%B9%E6%AF%94">构建工具对比</a>
<ol>
<li><a href="#maven%E5%92%8Cant%E7%9A%84%E5%8C%BA%E5%88%AB%E4%B8%80">Maven和Ant的区别一</a></li>
<li><a href="#maven%E7%9A%84%E4%BC%98%E5%8A%BF">Maven的优势</a></li>
</ol>
</li>
<li><a href="#%E5%8F%91%E5%B8%83%E6%9E%84%E4%BB%B6%E5%88%B0%E5%85%AC%E5%85%B1%E4%BB%93%E5%BA%93">发布构件到公共仓库</a></li>
</ol>
</li>
<li><a href="#%E9%85%8D%E7%BD%AE%E7%A7%81%E6%9C%8D">配置私服</a>
<ol>
<li><a href="#nexus">nexus</a></li>
<li><a href="#%E7%A0%81%E4%BA%91">码云</a>
<ol>
<li><a href="#%E5%88%9B%E5%BB%BA%E4%BB%93%E5%BA%93">创建仓库</a></li>
<li><a href="#%E5%BC%95%E7%94%A8%E4%BB%93%E5%BA%93%E4%B8%AD%E7%9A%84%E6%9E%84%E4%BB%B6">引用仓库中的构件</a>
<ol>
<li><a href="#gradle">Gradle</a></li>
<li><a href="#maven">Maven</a></li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
</ol>
<p><strong>目录 end</strong>|<em>2021-01-15 21:26</em>|</p>
<hr>
<h1 id="maven">Maven</h1>
<blockquote>
<p><a href="https://maven.apache.org/">官网</a> | <a href="https://maven.apache.org/guides/">官网手册</a> | <a href="http://takari.io/">http://takari.io/ 在线练习网</a>
<a href="http://tengj.top/2018/01/01/maven/">关于Maven的完整博客</a></p>
</blockquote>
<h2 id="安装">安装</h2>
<ul>
<li>下载zip包解压，将bin目录配置至PATH（最好是配置MAVEN_HOME然后引用）</li>
</ul>
<h3 id="maven常用命令">Maven常用命令</h3>
<blockquote>
<p><code>mvn [插件]:[目标] [参数]</code><br>
<code>mvn [阶段]</code></p>
</blockquote>
<ul>
<li>mvn archetype:generate ：创建 Maven 项目
<ul>
<li>-DgroupId=组织名/公司网址的反写+项目名</li>
<li>-DartifactId=项目名-模块名</li>
<li>-Dversion=版本号</li>
<li>-Dpackage=代码所在的包</li>
</ul>
</li>
</ul>
<ul>
<li>
<p><code>compile</code> ：编译源代码</p>
</li>
<li>
<p><code>test-compile</code> ：编译测试代码</p>
</li>
<li>
<p><code>test</code> ： 运行应用程序中的单元测试</p>
</li>
<li>
<p><code>site</code> ： 生成项目相关信息的网站</p>
</li>
<li>
<p><code>clean</code> ：清除目标目录中的生成结果</p>
</li>
<li>
<p><code>package</code> ： 依据项目生成 jar 文件</p>
</li>
<li>
<p><code>install</code> ：在本地 Repository 中安装 jar</p>
</li>
<li>
<p><code>deploy</code>：将jar包发布到远程仓库</p>
</li>
<li>
<p>使用id为ChatServer的Profile <code>-PChatServer</code></p>
</li>
<li>
<p>跳过测试</p>
<ul>
<li><code>-Dmaven.test.skip=true</code> 不执行测试用例，也不编译测试用例类。</li>
<li><code>-DskipTests=true</code> 不执行测试用例，但编译测试用例类生成相应的class文件至target/test-classes下</li>
<li><code>-Dmaven.javadoc.skip=true</code> 跳过文档生成</li>
</ul>
</li>
</ul>
<p><em>配置文件中配置</em></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;plugin&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;artifactId&gt;</span>maven-surefire-plugin<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;configuration&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;skip&gt;</span>true<span class="nt">&lt;/skip&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/configuration&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/plugin&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="从jar安装到本地库">从jar安装到本地库</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">mvn install:install-file 
</span></span><span class="line"><span class="cl">    -Dfile=D:\mvn\spring-context-support-3.1.0.RELEASE.jar \
</span></span><span class="line"><span class="cl">    -DgroupId=org.springframework  \
</span></span><span class="line"><span class="cl">    -DartifactId=spring-context-support \
</span></span><span class="line"><span class="cl">    -Dversion=3.1.0.RELEASE \
</span></span><span class="line"><span class="cl">    -Dpackaging=jar
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<h3 id="settingsxml配置">settings.xml配置</h3>
<blockquote>
<p>要特别注意 <code>settings.xml</code> 后者覆盖前者 加载顺序是:</p>
<blockquote>
<p><code>maven目录/conf/setting.xml</code><br>
<code>用户目录下/.m2/setting.xml</code></p>
</blockquote>
</blockquote>
<h4 id="配置镜像源">配置镜像源</h4>
<blockquote>
<p>在 用户目录下 .m2/setttings.xml 中 找到 mirrors 标签 进行添加<code>mirror节点</code>即可</p>
</blockquote>
<h5 id="阿里云">阿里云</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;mirror&gt;</span> 
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;id&gt;</span>alimaven<span class="nt">&lt;/id&gt;</span> 
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;name&gt;</span>aliyun maven<span class="nt">&lt;/name&gt;</span> 
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;url&gt;</span>http://maven.aliyun.com/nexus/content/groups/public/<span class="nt">&lt;/url&gt;</span> 
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;mirrorOf&gt;</span>central<span class="nt">&lt;/mirrorOf&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/mirror&gt;</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="配置本地仓库">配置本地仓库</h4>
<p><code>localRepository节点</code></p>
<hr>
<h2 id="maven配置">maven配置</h2>
<blockquote>
<p><a href="http://maven.apache.org/plugins/index.html">插件地址</a></p>
</blockquote>
<h3 id="主配置文件详解">主配置文件详解</h3>
<blockquote>
<p><a href="http://www.blogjava.net/RomulusW/archive/2008/05/04/197985.html">版本说明</a></p>
</blockquote>
<p><code>pom.xml</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl">      <span class="nt">&lt;project</span> <span class="na">xmlns=</span><span class="s">&#34;http://maven.apache.org/POM/4.0.0&#34;</span> <span class="na">xmlns:xsi=</span><span class="s">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="na">xsi:schemaLocation=</span><span class="s">&#34;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">     <span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>
</span></span><span class="line"><span class="cl">     <span class="nt">&lt;groupId&gt;</span>反写的公司域名+项目名<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">     <span class="nt">&lt;artifactId&gt;</span>项目名+模块名<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">     <span class="c">&lt;!--
</span></span></span><span class="line"><span class="cl"><span class="c">         第一个 0 是大版本号
</span></span></span><span class="line"><span class="cl"><span class="c">         第二个 0 是分支版本号
</span></span></span><span class="line"><span class="cl"><span class="c">         第三个 0 是小版本号
</span></span></span><span class="line"><span class="cl"><span class="c">         snapshot 快照
</span></span></span><span class="line"><span class="cl"><span class="c">         alpha 内部测试
</span></span></span><span class="line"><span class="cl"><span class="c">         beta 公测
</span></span></span><span class="line"><span class="cl"><span class="c">         RC 发行候选版本
</span></span></span><span class="line"><span class="cl"><span class="c">         Release/GA 正式发布
</span></span></span><span class="line"><span class="cl"><span class="c">     --&gt;</span>
</span></span><span class="line"><span class="cl">     <span class="nt">&lt;version&gt;</span>0.0.1-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">     <span class="c">&lt;!--jar war zip pom--&gt;</span>
</span></span><span class="line"><span class="cl">     <span class="nt">&lt;packaging&gt;</span>jar<span class="nt">&lt;/packaging&gt;</span>
</span></span><span class="line"><span class="cl">     <span class="c">&lt;!--项目描述名--&gt;</span>
</span></span><span class="line"><span class="cl">     <span class="nt">&lt;name&gt;</span>test<span class="nt">&lt;/name&gt;</span>
</span></span><span class="line"><span class="cl">     <span class="c">&lt;!--项目地址--&gt;</span>
</span></span><span class="line"><span class="cl">     <span class="nt">&lt;url&gt;</span>http://maven.apache.org<span class="nt">&lt;/url&gt;</span>
</span></span><span class="line"><span class="cl">     <span class="c">&lt;!--项目描述--&gt;</span>
</span></span><span class="line"><span class="cl">     <span class="nt">&lt;description&gt;&lt;/description&gt;</span>
</span></span><span class="line"><span class="cl">     <span class="nt">&lt;developers&gt;&lt;/developers&gt;</span>
</span></span><span class="line"><span class="cl">     <span class="nt">&lt;licenses&gt;&lt;/licenses&gt;</span>
</span></span><span class="line"><span class="cl">     <span class="nt">&lt;orgnazation&gt;&lt;/orgnazation&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c">&lt;!-- 配置属性 --&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;properties&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="nt">&lt;project.build.sourceEncoding&gt;</span>UTF-8<span class="nt">&lt;/project.build.sourceEncoding&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="c">&lt;!-- 统一定义版本 --&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;springframework.version&gt;</span>1.5.6<span class="nt">&lt;/springframework.version&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="nt">&lt;/properties&gt;</span>
</span></span><span class="line"><span class="cl">     <span class="c">&lt;!--依赖--&gt;</span>
</span></span><span class="line"><span class="cl">     <span class="nt">&lt;dependencies&gt;</span>
</span></span><span class="line"><span class="cl">       <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">         <span class="nt">&lt;groupId&gt;</span>junit<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">         <span class="nt">&lt;artifactId&gt;</span>junit<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">         <span class="nt">&lt;version&gt;</span>3.8.1<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">         <span class="c">&lt;!--
</span></span></span><span class="line"><span class="cl"><span class="c">            test 表明这个构件只在test目录下可以被引用
</span></span></span><span class="line"><span class="cl"><span class="c">            compile 默认的
</span></span></span><span class="line"><span class="cl"><span class="c">            provided 只在编译中引用
</span></span></span><span class="line"><span class="cl"><span class="c">            runtime 编译和运行都有效
</span></span></span><span class="line"><span class="cl"><span class="c">         --&gt;</span>
</span></span><span class="line"><span class="cl">         <span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
</span></span><span class="line"><span class="cl">         <span class="c">&lt;!--设置依赖是否可选，默认是false--&gt;</span>
</span></span><span class="line"><span class="cl">         <span class="nt">&lt;optional&gt;&lt;/optional&gt;</span>
</span></span><span class="line"><span class="cl">         <span class="c">&lt;!--排除依赖传递列表--&gt;</span>
</span></span><span class="line"><span class="cl">         <span class="nt">&lt;exclusions&gt;&lt;/exclusions&gt;</span>
</span></span><span class="line"><span class="cl">       <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">     <span class="nt">&lt;/dependencies&gt;</span>
</span></span><span class="line"><span class="cl">     <span class="nt">&lt;dependencyManagement&gt;</span>
</span></span><span class="line"><span class="cl">     <span class="nt">&lt;/dependencyManagement&gt;</span>
</span></span><span class="line"><span class="cl">     <span class="nt">&lt;build&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&lt;plugins&gt;</span>
</span></span><span class="line"><span class="cl">         <span class="c">&lt;!-- 构件三要素 --&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&lt;/plugins&gt;</span>
</span></span><span class="line"><span class="cl">     <span class="nt">&lt;/build&gt;</span>
</span></span><span class="line"><span class="cl">     <span class="c">&lt;!--继承--&gt;</span>
</span></span><span class="line"><span class="cl">     <span class="nt">&lt;parent&gt;&lt;/parent&gt;</span>
</span></span><span class="line"><span class="cl">     <span class="nt">&lt;modules&gt;</span>
</span></span><span class="line"><span class="cl">         <span class="nt">&lt;module&gt;&lt;/module&gt;</span>
</span></span><span class="line"><span class="cl">     <span class="nt">&lt;/modules&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="配置代码编译版本">配置代码编译版本</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl">    <span class="nt">&lt;plugin&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;artifactId&gt;</span>maven-compiler-plugin<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;version&gt;</span>3.1<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;configuration&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;source&gt;</span>1.8<span class="nt">&lt;/source&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;target&gt;</span>1.8<span class="nt">&lt;/target&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;encoding&gt;</span>UTF-8<span class="nt">&lt;/encoding&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/configuration&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/plugin&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="构建">构建</h2>
<h3 id="使用maven构建多模块的项目">使用maven构建多模块的项目</h3>
<p><code>父项目pom文件</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl">    <span class="nt">&lt;groupId&gt;</span>com.github.kuangcp<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;artifactId&gt;</span>Modules<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;version&gt;</span>1.0-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;packaging&gt;</span>pom<span class="nt">&lt;/packaging&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;modules&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;module&gt;</span>repository<span class="nt">&lt;/module&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;module&gt;</span>service<span class="nt">&lt;/module&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;module&gt;</span>website<span class="nt">&lt;/module&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/modules&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;properties&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;project.build.sourceEncoding&gt;</span>UTF-8<span class="nt">&lt;/project.build.sourceEncoding&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;java.version&gt;</span>1.8<span class="nt">&lt;/java.version&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/properties&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>子项目pom文件</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl">    <span class="nt">&lt;artifactId&gt;</span>website<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;version&gt;</span>1.0-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;packaging&gt;</span>jar<span class="nt">&lt;/packaging&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;parent&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;groupId&gt;</span>com.github.kuangcp<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;artifactId&gt;</span>Modules<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;version&gt;</span>1.0-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/parent&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="profiles">Profiles</h3>
<blockquote>
<p><a href="http://maven.apache.org/guides/introduction/introduction-to-profiles.html">Official Doc</a></p>
</blockquote>
<p><code>简单配置</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl">    <span class="nt">&lt;profiles&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;profile&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;id&gt;</span>development<span class="nt">&lt;/id&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;activation&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;activeByDefault&gt;</span>true<span class="nt">&lt;/activeByDefault&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;/activation&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;properties&gt;&lt;/properties&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/profile&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;profile&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;id&gt;</span>production<span class="nt">&lt;/id&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;properties&gt;&lt;/properties&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/profile&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/profiles&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p><a href="https://www.zybuluo.com/haokuixi/note/25985">Maven 如何为不同的环境打包</a> <code>开发、测试和产品环境</code></p>
</blockquote>
<ul>
<li>
<p>使用 test profile 执行命令 <code>mvn clean package -P test</code></p>
</li>
<li>
<p><input disabled="" type="checkbox"> 子项目编译打包各自独立，怎么整合成一个</p>
</li>
</ul>
<h3 id="测试">测试</h3>
<blockquote>
<p>mvn test</p>
</blockquote>
<ul>
<li>跳过测试 <code>mvn test -DskipTests</code></li>
<li>执行指定测试类 <code>mvn test -Dtest=类名</code></li>
</ul>
<h3 id="打包部署">打包部署</h3>
<blockquote>
<p><a href="https://stackoverflow.com/questions/4725668/how-to-deploy-snapshot-with-sources-and-javadoc">deploy with source</a></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;plugin&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;artifactId&gt;</span>maven-source-plugin<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;executions&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;execution&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;id&gt;</span>attach-sources<span class="nt">&lt;/id&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;phase&gt;</span>verify<span class="nt">&lt;/phase&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;goals&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;goal&gt;</span>jar-no-fork<span class="nt">&lt;/goal&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;/goals&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/execution&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/executions&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/plugin&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>不依赖Jar的项目</strong></p>
<blockquote>
<p><a href="https://gitee.com/gin9/codes/ri4x8cut3awgh0e271lfb54">Demo项目</a></p>
</blockquote>
<p><strong>依赖Jar的项目</strong></p>
<h4 id="assembly">assembly</h4>
<blockquote>
<p><a href="http://maven.apache.org/plugins/maven-assembly-plugin/index.html">Maven Doc</a></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl">    <span class="nt">&lt;plugin&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;artifactId&gt;</span>maven-assembly-plugin<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;version&gt;</span>3.0.0<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;configuration&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;archive&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;manifest&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="nt">&lt;mainClass&gt;</span>com.xxx.Main<span class="nt">&lt;/mainClass&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;/manifest&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;/archive&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;descriptorRefs&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;descriptorRef&gt;</span>jar-with-dependencies<span class="nt">&lt;/descriptorRef&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;/descriptorRefs&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/configuration&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;executions&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;execution&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;id&gt;</span>make-assembly<span class="nt">&lt;/id&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;phase&gt;</span>package<span class="nt">&lt;/phase&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;goals&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="nt">&lt;goal&gt;</span>single<span class="nt">&lt;/goal&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;/goals&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;/execution&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/executions&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/plugin&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="shade">shade</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl">    <span class="nt">&lt;plugin&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;artifactId&gt;</span>maven-shade-plugin<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;version&gt;</span>3.2.1<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;executions&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;execution&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;phase&gt;</span>package<span class="nt">&lt;/phase&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;goals&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="nt">&lt;goal&gt;</span>shade<span class="nt">&lt;/goal&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;/goals&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;configuration&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="nt">&lt;transformers&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="nt">&lt;transformer</span> <span class="na">implementation=</span><span class="s">&#34;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="nt">&lt;mainClass&gt;</span>com.xxx.Main<span class="nt">&lt;/mainClass&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="nt">&lt;/transformer&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="nt">&lt;/transformers&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;/configuration&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;/execution&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/executions&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/plugin&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<blockquote>
<p><a href="http://www.infoq.com/cn/news/2011/06/xxb-maven-9-package">Maven实战（九）——打包的技巧</a>
<a href="https://blog.csdn.net/u013177446/article/details/53944424">Maven打包成可执行jar</a>
<a href="https://www.jianshu.com/p/afb79650b606">参考: 使用MAVEN打包可执行的jar包</a></p>
</blockquote>
<blockquote>
<p>war和jar一样使用</p>
</blockquote>
<ul>
<li>Springboot项目能够做到, 其实就是 Main 方法, 然后配置了一个Servlet的加载类就可以当war用了
<ul>
<li><a href="http://lib.csdn.net/article/java/65574">通过Maven构建打包Spring boot，并将config配置文件提取到jar文件外</a></li>
</ul>
</li>
</ul>
<blockquote>
<p><a href="https://stackoverflow.com/questions/2424015/maven-best-practice-for-generating-multiple-jars-with-different-filtered-classes">一个项目生成若干不同内容的Jar</a></p>
</blockquote>
<hr>
<h2 id="maven的依赖">maven的依赖</h2>
<h3 id="1-依赖的范围">1 依赖的范围</h3>
<blockquote>
<p>依赖范围就是用来控制依赖和三种classpath(编译classpath，测试classpath、运行classpath)的关系</p>
</blockquote>
<ul>
<li><code>compile</code>:编译依赖范围。如果没有指定，就会默认使用该依赖范围。使用此依赖范围的Maven依赖，对于编译、测试、运行三种classpath都有效。
<ul>
<li>典型的例子是spring-core,在编译、测试和运行的时候都需要使用该依赖。</li>
</ul>
</li>
<li><code>test</code>: 测试依赖范围。使用次依赖范围的Maven依赖，只对于测试classpath有效
<ul>
<li>在编译主代码或者运行项目的使用时将无法使用此依赖。典型的例子是Jnuit,它只有在编译测试代码及运行测试的时候才需要。</li>
</ul>
</li>
<li><code>provided</code>:已提供依赖范围。使用此依赖范围的Maven依赖，对于编译和测试classpath有效，但在运行时候无效。
<ul>
<li>典型的例子是servlet-api,编译和测试项目的时候需要该依赖，但在运行项目的时候，由于容器以及提供，就不需要Maven重复地引入一遍。</li>
</ul>
</li>
<li><code>runtime</code>:运行时依赖范围。使用此依赖范围的Maven依赖，对于测试和运行classpath有效，但在编译主代码时无效。
<ul>
<li>典型的例子是JDBC驱动实现，项目主代码的编译只需要JDK提供的JDBC接口，只有在执行测试或者运行项目的时候才需要实现上述接口的具体JDBC驱动。</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">依赖范围 Scope</th>
<th style="text-align:center">对于编译classpath</th>
<th style="text-align:center">对于测试classpath</th>
<th style="text-align:center">对于运行classpath</th>
<th style="text-align:center">Demo</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">compile</td>
<td style="text-align:center">Y</td>
<td style="text-align:center">Y</td>
<td style="text-align:center">Y</td>
<td style="text-align:center">spring-boot-starter-web</td>
</tr>
<tr>
<td style="text-align:center">test</td>
<td style="text-align:center"></td>
<td style="text-align:center">Y</td>
<td style="text-align:center"></td>
<td style="text-align:center">Junit</td>
</tr>
<tr>
<td style="text-align:center">provided</td>
<td style="text-align:center">Y</td>
<td style="text-align:center">Y</td>
<td style="text-align:center"></td>
<td style="text-align:center">servlet-api</td>
</tr>
<tr>
<td style="text-align:center">runtime</td>
<td style="text-align:center"></td>
<td style="text-align:center">Y</td>
<td style="text-align:center">Y</td>
<td style="text-align:center">JDBC的实现Jar</td>
</tr>
<tr>
<td style="text-align:center">system</td>
<td style="text-align:center">Y</td>
<td style="text-align:center">Y</td>
<td style="text-align:center"></td>
<td style="text-align:center">Maven仓库之外的类库文件</td>
</tr>
</tbody>
</table>
<h4 id="依赖的传递">依赖的传递</h4>
<ul>
<li>比如一个account-email项目为例
<ul>
<li>account-email有一个compile范围的spring-code依赖，</li>
<li>spring-core有一个compile范围的commons-logging依赖，</li>
</ul>
</li>
<li>那么commons-logging就会成为account-email的compile的范围依赖，commons-logging是account-email的一个传递性依赖</li>
</ul>
<h3 id="处理项目间依赖方法">处理项目间依赖方法</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">项目A依赖B
</span></span><span class="line"><span class="cl">A项目 pom.xml中配置依赖 （构件三要素）
</span></span><span class="line"><span class="cl">B项目 先clean package
</span></span><span class="line"><span class="cl">      然后build 的 install
</span></span><span class="line"><span class="cl">A 项目 compile
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="依赖冲突">依赖冲突</h3>
<ul>
<li>依赖路径短优先
<ul>
<li>1 A-&gt;B-&gt;C-&gt;X(jar文件)</li>
<li>2 A-&gt;C-&gt;X(jar文件)</li>
<li>会选择 2 中的X的jar版本</li>
</ul>
</li>
<li>先声明的优先</li>
</ul>
<h4 id="排除依赖">排除依赖</h4>
<p><code>对应的&lt;dependency&gt;标签中添加</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl">    <span class="nt">&lt;exclusions&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;exclusion&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-logging<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/exclusion&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/exclusions&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="继承">继承</h3>
<blockquote>
<p>新建一个项目作为父项目<br>
然后在需要引用父项目的子项目pom文件中, 加上parent 标签里面写上 父项目的三要素</p>
</blockquote>
<hr>
<h2 id="常用插件">常用插件</h2>
<h3 id="lombok">lombok</h3>
<blockquote>
<p><a href="/Java/Tool/Lombok.md">详细</a></p>
</blockquote>
<h3 id="protobuf">protobuf</h3>
<blockquote>
<p><a href="https://www.xolstice.org/protobuf-maven-plugin/">maven 插件 </a> <code>本质还是要使用系统安装的protoc, 然后插件实现了自动编译文件</code></p>
</blockquote>
<ul>
<li><a href="https://github.com/os72/protoc-jar-maven-plugin">protoc-jar</a><code>自动识别平台, 使用对应的编译器编译得到java文件, 但是目前还有一些bug</code></li>
</ul>
<h3 id="versions-maven-plugin">Versions Maven Plugin</h3>
<blockquote>
<p><a href="http://www.mojohaus.org/versions-maven-plugin/">Official Site</a></p>
</blockquote>
<h3 id="maven-enforcer-plugin">Maven Enforcer Plugin</h3>
<blockquote>
<p><a href="http://maven.apache.org/enforcer/maven-enforcer-plugin/">Official Site</a></p>
</blockquote>
<p><a href="https://www.baeldung.com/maven-enforcer-plugin">Maven Enforcer Plugin - Baeldung</a></p>
<h3 id="maven-deploy-plugin">Maven Deploy plugin</h3>
<blockquote>
<p><a href="https://maven.apache.org/plugins/maven-deploy-plugin/deploy-mojo.html">maven-deploy-plugin</a></p>
</blockquote>
<p><strong>跳过 deploy</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl">    <span class="nt">&lt;plugin&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;artifactId&gt;</span>maven-deploy-plugin<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;version&gt;</span>3.0.0-M1<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;configuration&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;skip&gt;</span>true<span class="nt">&lt;/skip&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/configuration&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/plugin&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<h2 id="构建工具对比">构建工具对比</h2>
<blockquote>
<p><a href="https://mp.weixin.qq.com/s?__biz=MzAxOTc0NzExNg==&amp;mid=2665513207&amp;idx=1&amp;sn=cbfad70e656fc50c4fff18678a282b95&amp;scene=21#wechat_redirect">码农翻身:小李的Build之路(上)</a> | <a href="https://mp.weixin.qq.com/s?__biz=MzAxOTc0NzExNg==&amp;mid=2665513212&amp;idx=1&amp;sn=280647b0c6cd265f85590f64d3216bee&amp;scene=21#wechat_redirect">码农翻身:小李的Build之路(下)</a> <code>这个小故事讲述了ant到maven的演化</code></p>
</blockquote>
<h3 id="maven和ant的区别一">Maven和Ant的区别一</h3>
<ol>
<li>
<p>ant脚本是可以直接运行在maven中的。maven和ant最大的差别就是在于maven的编译以及所有的脚本都有一个基础，就是POM（project object model）。这个模型定义了项目的方方面面，然后各式各样的脚本在这个模型上工作，而ant完全是自己定义，显然maven更胜一筹。</p>
</li>
<li>
<p>maven对所依赖的包有明确的定义，如使用那个包，版本是多少，一目了然。而ant则通常是简单的inclde 所有的jar。导致的最终结果就是，你根本无法确定JBoss中的lib下的common－logging 是哪个版本的，唯一的方法就是打开 META－INF 目录下MANIFEST.MF。</p>
</li>
<li>
<p>maven是基于中央仓库的编译，即把编译所需要的资源放在一个中央仓库里，如jar，tld，pom，等。当编译的时候，maven会自动在仓库中找到相应的包，如果本地仓库没有，则从设定好的远程仓库中下载到本地。这一切都是自动的，而ant需要自己定义了。这个好处导致的结果就是，用maven编译的项目在发布的时候只需要发布源码，小得很，而反之，ant的发布则要把所有的包一起发布，显然maven又胜了一筹。</p>
</li>
<li>
<p>maven有大量的重用脚本可以利用，如生成网站，生成javadoc，sourcecode reference，等。而ant都需要自己去写。</p>
</li>
<li>
<p>maven目前不足的地方就是没有象ant那样成熟的GUI界面，不过mavengui正在努力中。目前使用maven最好的方法还是命令行，又快又方便</p>
</li>
</ol>
<h3 id="maven的优势">Maven的优势</h3>
<ul>
<li>协同开发的基本规范，为大家提供方便的协作的模式，能增加代码的复用，提高生产率。</li>
<li>提供方便，规范化的打包方法，是公司完成自动构建系统的核心部分，能帮助提高敏捷开发的效率(敏捷开发提倡尽早集成)。</li>
<li>减少冗余，减少出错的可能。</li>
<li>中心资源库管理，能减低源码库的大小，中心资源库可以统一定期备份。</li>
<li>目录结构规范，让开发者从一个maven项目过度到另一maven项目很容易。</li>
<li>大量的开源项目使用了maven。</li>
</ul>
<hr>
<h2 id="发布构件到公共仓库">发布构件到公共仓库</h2>
<ul>
<li><input disabled="" type="checkbox"> Jforg mvnrepository</li>
</ul>
<blockquote>
<p><a href="http://blog.csdn.net/h3243212/article/details/72374363">将项目发布到 maven 中央仓库踩过的坑</a></p>
</blockquote>
<blockquote>
<p><a href="https://www.xncoding.com/2018/01/27/tool/maven-central.html">发布Maven构件到中央仓库</a><br>
<a href="https://github.com/panpf/android-library-publish-to-jcenter">android-library-publish-to-jcenter</a></p>
</blockquote>
<hr>
<h1 id="配置私服">配置私服</h1>
<blockquote>
<p>不用去跑审核流程, 私有, 快速, 便捷</p>
</blockquote>
<h2 id="nexus">nexus</h2>
<blockquote>
<p>需要运行软件, 一般公司内部局域网使用, 如果自己有服务器也能开放给公众使用 <a href="https://www.jianshu.com/p/b1fe26d5b8c8">参考: maven私服搭建及gradle上传</a></p>
</blockquote>
<ol>
<li>设置 RELEASE 不可重复 deploy 管理后台 Repositories -&gt; Releases -&gt; ANALYZE -&gt; Configuration -&gt; Deployment Policy 设置为 Disable Redeploy</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl">    <span class="nt">&lt;distributionManagement&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;repository&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;id&gt;</span>nexus-releases<span class="nt">&lt;/id&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;url&gt;</span>http://192.168.0.221:8081/nexus/content/repositories/releases<span class="nt">&lt;/url&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/repository&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;snapshotRepository&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;id&gt;</span>nexus-snapshots<span class="nt">&lt;/id&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;url&gt;</span>http://192.168.0.221:8081/nexus/content/repositories/snapshots<span class="nt">&lt;/url&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/snapshotRepository&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/distributionManagement&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<h2 id="码云">码云</h2>
<blockquote>
<p>利用公开仓库来搭建私服 | <a href="https://my.oschina.net/polly/blog/1649362">参考:  使用git仓库搭建maven私服 </a></p>
</blockquote>
<h3 id="创建仓库">创建仓库</h3>
<blockquote>
<p>当然了在各个托管平台都可以的, 只不过码云是国内的, 毕竟要快 github gitlab bitbucket 就&hellip;.</p>
</blockquote>
<ol>
<li>创建好一个空的公开仓库</li>
<li>使用统一的groupId, 这样就会放到默认目录 <code>~/.m2/repository/</code> 下 只要在groupId对应的目录下 git init</li>
<li>只需在项目中执行install, 然后在此目录进行提交即可</li>
</ol>
<h3 id="引用仓库中的构件">引用仓库中的构件</h3>
<h4 id="gradle">Gradle</h4>
<p>build.gradle 中添加</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-groovy" data-lang="groovy"><span class="line"><span class="cl"><span class="n">repositories</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">maven</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">url</span> <span class="s2">&#34;https://gitee.com/你的用户名/创建的仓库/raw/master&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="maven-1">Maven</h4>
<p>pom.xml中添加</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl">    <span class="nt">&lt;repositories&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;repository&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;id&gt;</span>mvnrepo<span class="nt">&lt;/id&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;name&gt;</span>mvn repository<span class="nt">&lt;/name&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;url&gt;</span>https://gitee.com/用户名/仓库/raw/master<span class="nt">&lt;/url&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/repository&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/repositories&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div>
    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">Author</span>
    <span class="item-content">Mythos</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">LastMod</span>
    <span class="item-content">
        2018-12-20
        
    </span>
  </p>
  
  
</div>
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/maven/">Maven</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/java/tool/mavenadvance/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Maven进阶</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/skills/test/testtheory/">
            <span class="next-text nav-default">测试基础理论</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="http://github.com/kuangcp" class="iconfont icon-github" title="github"></a>
  <a href="https://blogs.kuangcp.top/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://gitee.com/gin9/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2016 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span>
    <span>Mythos</span>
    
    <br/><span><a href='https://beian.miit.gov.cn/'; target=_blank>赣ICP备17014189号-1</a></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  <script src="/lib/highlight/highlight.pack.js?v=20171001"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.64437849d125a2d603b3e71d6de5225d641a32d17168a58106e0b61852079683.js"></script>








</body>
</html>
