<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Java8 - Mythos Â· Java Developer</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="Kuangcp" /><meta name="description" content="ğŸ’  Java8 1.1. å®æˆ˜åº“é¡¹ç›® æ¥å£çš„å˜åŒ– 2.1. defaultæ–¹æ³• 2.2. staticæ–¹æ³• å‡½æ•°å¼ 3.1. å‡½æ•°å¼æ¥å£ 3.1.1. æ„é€ å‡½æ•°çš„å¼•ç”¨ 3.2. å‡½æ•°å¼æ¥å£æ¡ˆä¾‹ Lambda 4.1. è¡Œä¸ºå‚æ•°åŒ– 4.2. Lambd" /><meta name="keywords" content="Hugo, theme, even" />






<meta name="generator" content="Hugo 0.99.0 with theme even" />


<link rel="canonical" href="https://www.kuangcp.top/post/java/advancedlearning/release/java8/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.b5a744db6de49a86cadafb3b70f555ab443f83c307a483402259e94726b045ff.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="Java8" />
<meta property="og:description" content="ğŸ’  Java8 1.1. å®æˆ˜åº“é¡¹ç›® æ¥å£çš„å˜åŒ– 2.1. defaultæ–¹æ³• 2.2. staticæ–¹æ³• å‡½æ•°å¼ 3.1. å‡½æ•°å¼æ¥å£ 3.1.1. æ„é€ å‡½æ•°çš„å¼•ç”¨ 3.2. å‡½æ•°å¼æ¥å£æ¡ˆä¾‹ Lambda 4.1. è¡Œä¸ºå‚æ•°åŒ– 4.2. Lambd" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.kuangcp.top/post/java/advancedlearning/release/java8/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2018-12-13T16:05:51+00:00" />
<meta property="article:modified_time" content="2018-12-13T16:05:51+00:00" />

<meta itemprop="name" content="Java8">
<meta itemprop="description" content="ğŸ’  Java8 1.1. å®æˆ˜åº“é¡¹ç›® æ¥å£çš„å˜åŒ– 2.1. defaultæ–¹æ³• 2.2. staticæ–¹æ³• å‡½æ•°å¼ 3.1. å‡½æ•°å¼æ¥å£ 3.1.1. æ„é€ å‡½æ•°çš„å¼•ç”¨ 3.2. å‡½æ•°å¼æ¥å£æ¡ˆä¾‹ Lambda 4.1. è¡Œä¸ºå‚æ•°åŒ– 4.2. Lambd"><meta itemprop="datePublished" content="2018-12-13T16:05:51+00:00" />
<meta itemprop="dateModified" content="2018-12-13T16:05:51+00:00" />
<meta itemprop="wordCount" content="15385">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Java8"/>
<meta name="twitter:description" content="ğŸ’  Java8 1.1. å®æˆ˜åº“é¡¹ç›® æ¥å£çš„å˜åŒ– 2.1. defaultæ–¹æ³• 2.2. staticæ–¹æ³• å‡½æ•°å¼ 3.1. å‡½æ•°å¼æ¥å£ 3.1.1. æ„é€ å‡½æ•°çš„å¼•ç”¨ 3.2. å‡½æ•°å¼æ¥å£æ¡ˆä¾‹ Lambda 4.1. è¡Œä¸ºå‚æ•°åŒ– 4.2. Lambd"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Mythos</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">Mythos</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Java8</h1>

      <div class="post-meta">
        <span class="post-time"> 2018-12-13 </span>
        <div class="post-category">
            <a href="/categories/java/"> Java </a>
            </div>
          <span class="more-meta"> 15385 words </span>
          <span class="more-meta"> 31 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#java8">Java8</a>
      <ul>
        <li><a href="#å®æˆ˜åº“é¡¹ç›®">å®æˆ˜åº“é¡¹ç›®</a></li>
      </ul>
    </li>
    <li><a href="#æ¥å£çš„å˜åŒ–">æ¥å£çš„å˜åŒ–</a>
      <ul>
        <li><a href="#defaultæ–¹æ³•">defaultæ–¹æ³•</a></li>
        <li><a href="#staticæ–¹æ³•">staticæ–¹æ³•</a></li>
      </ul>
    </li>
    <li><a href="#å‡½æ•°å¼">å‡½æ•°å¼</a>
      <ul>
        <li><a href="#å‡½æ•°å¼æ¥å£">å‡½æ•°å¼æ¥å£</a>
          <ul>
            <li><a href="#æ„é€ å‡½æ•°çš„å¼•ç”¨">æ„é€ å‡½æ•°çš„å¼•ç”¨</a></li>
          </ul>
        </li>
        <li><a href="#å‡½æ•°å¼æ¥å£æ¡ˆä¾‹">å‡½æ•°å¼æ¥å£æ¡ˆä¾‹</a></li>
      </ul>
    </li>
    <li><a href="#lambda">Lambda</a>
      <ul>
        <li><a href="#è¡Œä¸ºå‚æ•°åŒ–">è¡Œä¸ºå‚æ•°åŒ–</a></li>
        <li><a href="#lambdaåŸºç¡€">LambdaåŸºç¡€</a>
          <ul>
            <li><a href="#lambda-å®ç°åŸç†">Lambda å®ç°åŸç†</a></li>
            <li><a href="#lambda-å±€é™æ€§">Lambda å±€é™æ€§</a></li>
            <li><a href="#lambda-bug">Lambda BUG</a></li>
          </ul>
        </li>
        <li><a href="#åŸå§‹ç±»å‹ç‰¹åŒ–">åŸå§‹ç±»å‹ç‰¹åŒ–</a></li>
        <li><a href="#ç±»å‹æ£€æŸ¥ç±»å‹æ¨æ–­ä»¥åŠé™åˆ¶">ç±»å‹æ£€æŸ¥ã€ç±»å‹æ¨æ–­ä»¥åŠé™åˆ¶</a>
          <ul>
            <li><a href="#ç±»å‹æ£€æŸ¥">ç±»å‹æ£€æŸ¥</a></li>
            <li><a href="#åŒæ ·çš„lambda-ä¸åŒçš„å‡½æ•°å¼æ¥å£">åŒæ ·çš„Lambda ä¸åŒçš„å‡½æ•°å¼æ¥å£</a></li>
            <li><a href="#ç±»å‹æ¨æ–­">ç±»å‹æ¨æ–­</a></li>
            <li><a href="#ä½¿ç”¨å±€éƒ¨å˜é‡">ä½¿ç”¨å±€éƒ¨å˜é‡</a></li>
          </ul>
        </li>
        <li><a href="#å¤åˆ-lambda-è¡¨è¾¾å¼">å¤åˆ Lambda è¡¨è¾¾å¼</a>
          <ul>
            <li><a href="#æ¯”è¾ƒå™¨å¤åˆ">æ¯”è¾ƒå™¨å¤åˆ</a></li>
            <li><a href="#è°“è¯å¤åˆ">è°“è¯å¤åˆ</a></li>
            <li><a href="#å‡½æ•°å¤åˆ">å‡½æ•°å¤åˆ</a></li>
          </ul>
        </li>
        <li><a href="#åˆ©ç”¨lambdaå¼€å‘dslæ¡†æ¶">åˆ©ç”¨Lambdaå¼€å‘DSLæ¡†æ¶</a></li>
      </ul>
    </li>
    <li><a href="#stream">Stream</a>
      <ul>
        <li><a href="#streamä¸é›†åˆ">Streamä¸é›†åˆ</a>
          <ul>
            <li><a href="#åªèƒ½éå†ä¸€æ¬¡">åªèƒ½éå†ä¸€æ¬¡</a></li>
            <li><a href="#å¤–éƒ¨è¿­ä»£å’Œå†…éƒ¨è¿­ä»£">å¤–éƒ¨è¿­ä»£å’Œå†…éƒ¨è¿­ä»£</a></li>
          </ul>
        </li>
        <li><a href="#æ„å»ºæµ">æ„å»ºæµ</a>
          <ul>
            <li><a href="#æœ‰é™æµ">æœ‰é™æµ</a></li>
            <li><a href="#æ— é™æµ">æ— é™æµ</a></li>
          </ul>
        </li>
        <li><a href="#æ•°å€¼æµ">æ•°å€¼æµ</a>
          <ul>
            <li><a href="#åŸå§‹ç±»å‹ç‰¹åŒ–-1">åŸå§‹ç±»å‹ç‰¹åŒ–</a></li>
            <li><a href="#æ•°å€¼èŒƒå›´">æ•°å€¼èŒƒå›´</a></li>
          </ul>
        </li>
        <li><a href="#streamæ“ä½œ">Streamæ“ä½œ</a>
          <ul>
            <li><a href="#ä¸­é—´æ“ä½œ">ä¸­é—´æ“ä½œ</a></li>
            <li><a href="#ç»ˆç«¯æ“ä½œ">ç»ˆç«¯æ“ä½œ</a></li>
          </ul>
        </li>
        <li><a href="#streamçš„ä½¿ç”¨">Streamçš„ä½¿ç”¨</a>
          <ul>
            <li><a href="#ç­›é€‰">ç­›é€‰</a></li>
            <li><a href="#æ˜ å°„">æ˜ å°„</a></li>
            <li><a href="#æŸ¥æ‰¾å’ŒåŒ¹é…">æŸ¥æ‰¾å’ŒåŒ¹é…</a></li>
            <li><a href="#å½’çº¦">å½’çº¦</a></li>
          </ul>
        </li>
        <li><a href="#æ”¶é›†å™¨çš„ä½¿ç”¨">æ”¶é›†å™¨çš„ä½¿ç”¨</a>
          <ul>
            <li><a href="#é¢„å®šä¹‰æ”¶é›†å™¨">é¢„å®šä¹‰æ”¶é›†å™¨</a></li>
            <li><a href="#è‡ªå®šä¹‰-collector">è‡ªå®šä¹‰ Collector</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#optional">Optional</a>
      <ul>
        <li><a href="#optionalç±»å’Œstreamæ¥å£çš„ç›¸ä¼¼ä¹‹å¤„">Optionalç±»å’ŒStreamæ¥å£çš„ç›¸ä¼¼ä¹‹å¤„</a></li>
        <li><a href="#å®è·µè¯»å–propertiesæŸå±æ€§">å®è·µ:è¯»å–PropertiesæŸå±æ€§</a></li>
      </ul>
    </li>
    <li><a href="#æ—¶é—´å¤„ç†">æ—¶é—´å¤„ç†</a>
      <ul>
        <li><a href="#zoneid">ZoneId</a></li>
        <li><a href="#clock">Clock</a></li>
        <li><a href="#duration">Duration</a></li>
        <li><a href="#period">Period</a></li>
        <li><a href="#instant">Instant</a></li>
        <li><a href="#localdatetime">LocalDateTime</a>
          <ul>
            <li><a href="#localdate">LocalDate</a></li>
            <li><a href="#localtime">LocalTime</a></li>
          </ul>
        </li>
        <li><a href="#zoneoffset">ZoneOffset</a></li>
        <li><a href="#zoneddatetime">ZonedDateTime</a></li>
        <li><a href="#clock-1">Clock</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>ğŸ’ </p>
<ul>
<li>
<ol>
<li><a href="#java8">Java8</a></li>
</ol>
<ul>
<li>1.1. <a href="#%E5%AE%9E%E6%88%98%E5%BA%93%E9%A1%B9%E7%9B%AE">å®æˆ˜åº“é¡¹ç›®</a></li>
</ul>
</li>
<li>
<ol start="2">
<li><a href="#%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%8F%98%E5%8C%96">æ¥å£çš„å˜åŒ–</a></li>
</ol>
<ul>
<li>2.1. <a href="#default%E6%96%B9%E6%B3%95">defaultæ–¹æ³•</a></li>
<li>2.2. <a href="#static%E6%96%B9%E6%B3%95">staticæ–¹æ³•</a></li>
</ul>
</li>
<li>
<ol start="3">
<li><a href="#%E5%87%BD%E6%95%B0%E5%BC%8F">å‡½æ•°å¼</a></li>
</ol>
<ul>
<li>3.1. <a href="#%E5%87%BD%E6%95%B0%E5%BC%8F%E6%8E%A5%E5%8F%A3">å‡½æ•°å¼æ¥å£</a>
<ul>
<li>3.1.1. <a href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E7%9A%84%E5%BC%95%E7%94%A8">æ„é€ å‡½æ•°çš„å¼•ç”¨</a></li>
</ul>
</li>
<li>3.2. <a href="#%E5%87%BD%E6%95%B0%E5%BC%8F%E6%8E%A5%E5%8F%A3%E6%A1%88%E4%BE%8B">å‡½æ•°å¼æ¥å£æ¡ˆä¾‹</a></li>
</ul>
</li>
<li>
<ol start="4">
<li><a href="#lambda">Lambda</a></li>
</ol>
<ul>
<li>4.1. <a href="#%E8%A1%8C%E4%B8%BA%E5%8F%82%E6%95%B0%E5%8C%96">è¡Œä¸ºå‚æ•°åŒ–</a></li>
<li>4.2. <a href="#lambda%E5%9F%BA%E7%A1%80">LambdaåŸºç¡€</a>
<ul>
<li>4.2.1. <a href="#lambda-%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86">Lambda å®ç°åŸç†</a></li>
<li>4.2.2. <a href="#lambda-%E5%B1%80%E9%99%90%E6%80%A7">Lambda å±€é™æ€§</a></li>
<li>4.2.3. <a href="#lambda-bug">Lambda BUG</a></li>
</ul>
</li>
<li>4.3. <a href="#%E5%8E%9F%E5%A7%8B%E7%B1%BB%E5%9E%8B%E7%89%B9%E5%8C%96">åŸå§‹ç±»å‹ç‰¹åŒ–</a></li>
<li>4.4. <a href="#%E7%B1%BB%E5%9E%8B%E6%A3%80%E6%9F%A5%E3%80%81%E7%B1%BB%E5%9E%8B%E6%8E%A8%E6%96%AD%E4%BB%A5%E5%8F%8A%E9%99%90%E5%88%B6">ç±»å‹æ£€æŸ¥ã€ç±»å‹æ¨æ–­ä»¥åŠé™åˆ¶</a>
<ul>
<li>4.4.1. <a href="#%E7%B1%BB%E5%9E%8B%E6%A3%80%E6%9F%A5">ç±»å‹æ£€æŸ¥</a></li>
<li>4.4.2. <a href="#%E5%90%8C%E6%A0%B7%E7%9A%84lambda-%E4%B8%8D%E5%90%8C%E7%9A%84%E5%87%BD%E6%95%B0%E5%BC%8F%E6%8E%A5%E5%8F%A3">åŒæ ·çš„Lambda ä¸åŒçš„å‡½æ•°å¼æ¥å£</a></li>
<li>4.4.3. <a href="#%E7%B1%BB%E5%9E%8B%E6%8E%A8%E6%96%AD">ç±»å‹æ¨æ–­</a></li>
<li>4.4.4. <a href="#%E4%BD%BF%E7%94%A8%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F">ä½¿ç”¨å±€éƒ¨å˜é‡</a></li>
</ul>
</li>
<li>4.5. <a href="#%E5%A4%8D%E5%90%88-lambda-%E8%A1%A8%E8%BE%BE%E5%BC%8F">å¤åˆ Lambda è¡¨è¾¾å¼</a>
<ul>
<li>4.5.1. <a href="#%E6%AF%94%E8%BE%83%E5%99%A8%E5%A4%8D%E5%90%88">æ¯”è¾ƒå™¨å¤åˆ</a></li>
<li>4.5.2. <a href="#%E8%B0%93%E8%AF%8D%E5%A4%8D%E5%90%88">è°“è¯å¤åˆ</a></li>
<li>4.5.3. <a href="#%E5%87%BD%E6%95%B0%E5%A4%8D%E5%90%88">å‡½æ•°å¤åˆ</a></li>
</ul>
</li>
<li>4.6. <a href="#%E5%88%A9%E7%94%A8lambda%E5%BC%80%E5%8F%91dsl%E6%A1%86%E6%9E%B6">åˆ©ç”¨Lambdaå¼€å‘DSLæ¡†æ¶</a></li>
</ul>
</li>
<li>
<ol start="5">
<li><a href="#stream">Stream</a></li>
</ol>
<ul>
<li>5.1. <a href="#stream%E4%B8%8E%E9%9B%86%E5%90%88">Streamä¸é›†åˆ</a>
<ul>
<li>5.1.1. <a href="#%E5%8F%AA%E8%83%BD%E9%81%8D%E5%8E%86%E4%B8%80%E6%AC%A1">åªèƒ½éå†ä¸€æ¬¡</a></li>
<li>5.1.2. <a href="#%E5%A4%96%E9%83%A8%E8%BF%AD%E4%BB%A3%E5%92%8C%E5%86%85%E9%83%A8%E8%BF%AD%E4%BB%A3">å¤–éƒ¨è¿­ä»£å’Œå†…éƒ¨è¿­ä»£</a></li>
</ul>
</li>
<li>5.2. <a href="#%E6%9E%84%E5%BB%BA%E6%B5%81">æ„å»ºæµ</a>
<ul>
<li>5.2.1. <a href="#%E6%9C%89%E9%99%90%E6%B5%81">æœ‰é™æµ</a></li>
<li>5.2.2. <a href="#%E6%97%A0%E9%99%90%E6%B5%81">æ— é™æµ</a></li>
</ul>
</li>
<li>5.3. <a href="#%E6%95%B0%E5%80%BC%E6%B5%81">æ•°å€¼æµ</a>
<ul>
<li>5.3.1. <a href="#%E5%8E%9F%E5%A7%8B%E7%B1%BB%E5%9E%8B%E7%89%B9%E5%8C%96">åŸå§‹ç±»å‹ç‰¹åŒ–</a></li>
<li>5.3.2. <a href="#%E6%95%B0%E5%80%BC%E8%8C%83%E5%9B%B4">æ•°å€¼èŒƒå›´</a></li>
</ul>
</li>
<li>5.4. <a href="#stream%E6%93%8D%E4%BD%9C">Streamæ“ä½œ</a>
<ul>
<li>5.4.1. <a href="#%E4%B8%AD%E9%97%B4%E6%93%8D%E4%BD%9C">ä¸­é—´æ“ä½œ</a></li>
<li>5.4.2. <a href="#%E7%BB%88%E7%AB%AF%E6%93%8D%E4%BD%9C">ç»ˆç«¯æ“ä½œ</a></li>
</ul>
</li>
<li>5.5. <a href="#stream%E7%9A%84%E4%BD%BF%E7%94%A8">Streamçš„ä½¿ç”¨</a>
<ul>
<li>5.5.1. <a href="#%E7%AD%9B%E9%80%89">ç­›é€‰</a></li>
<li>5.5.2. <a href="#%E6%98%A0%E5%B0%84">æ˜ å°„</a></li>
<li>5.5.3. <a href="#%E6%9F%A5%E6%89%BE%E5%92%8C%E5%8C%B9%E9%85%8D">æŸ¥æ‰¾å’ŒåŒ¹é…</a></li>
<li>5.5.4. <a href="#%E5%BD%92%E7%BA%A6">å½’çº¦</a>
<ul>
<li>5.5.4.1. <a href="#%E6%B1%82%E5%92%8C">æ±‚å’Œ</a></li>
<li>5.5.4.2. <a href="#%E6%9E%81%E5%80%BC">æå€¼</a></li>
<li>5.5.4.3. <a href="#%E5%BD%92%E7%BA%A6%E7%9A%84%E4%BC%98%E5%8A%BF%E4%B8%8E%E5%B9%B6%E8%A1%8C%E5%8C%96">å½’çº¦çš„ä¼˜åŠ¿ä¸å¹¶è¡ŒåŒ–</a></li>
</ul>
</li>
</ul>
</li>
<li>5.6. <a href="#%E6%94%B6%E9%9B%86%E5%99%A8%E7%9A%84%E4%BD%BF%E7%94%A8">æ”¶é›†å™¨çš„ä½¿ç”¨</a>
<ul>
<li>5.6.1. <a href="#%E9%A2%84%E5%AE%9A%E4%B9%89%E6%94%B6%E9%9B%86%E5%99%A8">é¢„å®šä¹‰æ”¶é›†å™¨</a>
<ul>
<li>5.6.1.1. <a href="#%E6%B1%87%E6%80%BB-collector">æ±‡æ€» collector</a></li>
<li>5.6.1.2. <a href="#%E8%A7%84%E7%BA%A6-reduce">è§„çº¦ reduce</a></li>
<li>5.6.1.3. <a href="#%E5%88%86%E7%BB%84">åˆ†ç»„</a>
<ul>
<li>5.6.1.3.1. <a href="#%E5%A4%9A%E7%BA%A7%E5%88%86%E7%BB%84">å¤šçº§åˆ†ç»„</a></li>
<li>5.6.1.3.2. <a href="#%E6%8C%89%E5%AD%90%E7%BB%84%E6%94%B6%E9%9B%86%E6%95%B0%E6%8D%AE">æŒ‰å­ç»„æ”¶é›†æ•°æ®</a></li>
</ul>
</li>
<li>5.6.1.4. <a href="#%E5%88%86%E5%8C%BA">åˆ†åŒº</a></li>
</ul>
</li>
<li>5.6.2. <a href="#%E8%87%AA%E5%AE%9A%E4%B9%89-collector">è‡ªå®šä¹‰ Collector</a></li>
</ul>
</li>
</ul>
</li>
<li>
<ol start="6">
<li><a href="#optional">Optional</a></li>
</ol>
<ul>
<li>6.1. <a href="#optional%E7%B1%BB%E5%92%8Cstream%E6%8E%A5%E5%8F%A3%E7%9A%84%E7%9B%B8%E4%BC%BC%E4%B9%8B%E5%A4%84">Optionalç±»å’ŒStreamæ¥å£çš„ç›¸ä¼¼ä¹‹å¤„</a></li>
<li>6.2. <a href="#%E5%AE%9E%E8%B7%B5%E8%AF%BB%E5%8F%96properties%E6%9F%90%E5%B1%9E%E6%80%A7">å®è·µ:è¯»å–PropertiesæŸå±æ€§</a></li>
</ul>
</li>
<li>
<ol start="7">
<li><a href="#%E6%97%B6%E9%97%B4%E5%A4%84%E7%90%86">æ—¶é—´å¤„ç†</a></li>
</ol>
<ul>
<li>7.1. <a href="#zoneid">ZoneId</a></li>
<li>7.2. <a href="#clock">Clock</a></li>
<li>7.3. <a href="#duration">Duration</a></li>
<li>7.4. <a href="#period">Period</a></li>
<li>7.5. <a href="#instant">Instant</a></li>
<li>7.6. <a href="#localdatetime">LocalDateTime</a>
<ul>
<li>7.6.1. <a href="#localdate">LocalDate</a></li>
<li>7.6.2. <a href="#localtime">LocalTime</a></li>
</ul>
</li>
<li>7.7. <a href="#zoneoffset">ZoneOffset</a></li>
<li>7.8. <a href="#zoneddatetime">ZonedDateTime</a></li>
<li>7.9. <a href="#clock">Clock</a></li>
</ul>
</li>
</ul>
<p>ğŸ’  2024-11-14 16:40:22</p>
<hr>
<h1 id="java8">Java8</h1>
<blockquote>
<p><a href="https://docs.oracle.com/javase/8/">Doc</a> | <a href="https://docs.oracle.com/javase/8/docs/api/">API</a></p>
</blockquote>
<p><a href="https://www.oracle.com/technetwork/java/javase/documentation/jdk8-doc-downloads-2133158.html">docä¸‹è½½</a></p>
<blockquote>
<p><a href="http://www.oracle.com/technetwork/java/javase/jdk-8-readme-2095712.html">Java8 JDK Readme</a> | <a href="http://www.oracle.com/technetwork/java/javase/jre-8-readme-2095710.html">Jre8 Readme</a><code>æœ‰è¯´æ˜å“ªäº›æ˜¯JREè¿è¡Œä¸å¿…è¦çš„æ–‡ä»¶</code></p>
</blockquote>
<blockquote>
<p><a href="https://docs.oracle.com/javase/8/docs/technotes/tools/">Java8 tools</a><code>ä»‹ç»ç›®å½• bin/* ä¸‹çš„å·¥å…·</code> | <a href="https://docs.oracle.com/javase/8/docs/technotes/guides/desc_jdk_structure.html">jdk structure</a></p>
</blockquote>
<ul>
<li><a href="https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/">Oracle:Java8æ•…éšœæ’é™¤æŒ‡å—</a></li>
</ul>
<blockquote>
<p><a href="http://ifeve.com/java-8-features-tutorial/">å‚è€ƒ: Java 8 ç‰¹æ€§ â€“ ç»ˆææ‰‹å†Œ</a></p>
</blockquote>
<p><strong><code>å‚è€ƒä¹¦ç±</code></strong></p>
<ol>
<li>Java8 in action</li>
<li>å†™ç»™å¤§å¿™äººçœ‹çš„Java8</li>
</ol>
<h2 id="å®æˆ˜åº“é¡¹ç›®">å®æˆ˜åº“é¡¹ç›®</h2>
<ul>
<li><a href="https://github.com/vavr-io/vavr">vavr</a> <code>æ”¹è¿›Java8å‡½æ•°å¼</code></li>
<li><a href="https://github.com/resilience4j/resilience4j">resilience4j</a> <code>Hystrixç»§ä»»è€…</code></li>
</ul>
<hr>
<h1 id="æ¥å£çš„å˜åŒ–">æ¥å£çš„å˜åŒ–</h1>
<h2 id="defaultæ–¹æ³•">defaultæ–¹æ³•</h2>
<blockquote>
<p>æ¥å£ä¸­ä¹Ÿèƒ½å†™å…·æœ‰æ–¹æ³•ä½“çš„æ–¹æ³•äº†</p>
</blockquote>
<ol>
<li>è°ƒç”¨æ–¹å¼: <code>æ¥å£.super.æ–¹æ³•</code></li>
</ol>
<h2 id="staticæ–¹æ³•">staticæ–¹æ³•</h2>
<p>ç±»ä¼¼äºScala Ruby trait/mixin è¿™ç§é»˜è®¤æ¥å£å®ç°</p>
<ol>
<li>è°ƒç”¨æ–¹å¼: static æ–¹æ³• <code>æ¥å£.æ–¹æ³•</code></li>
</ol>
<hr>
<h1 id="å‡½æ•°å¼">å‡½æ•°å¼</h1>
<blockquote>
<p><a href="http://www.cnblogs.com/lovesqcc/p/6083759.html">å‚è€ƒ  Java8å‡½æ•°æ¥å£å®ç°å›è°ƒåŠGroovyé—­åŒ…çš„ä»£ç ç¤ºä¾‹</a>
<a href="http://ifeve.com/jjava-util-function-java8/">Functionæ¥å£ â€“ Java8ä¸­java.util.functionåŒ…ä¸‹çš„å‡½æ•°å¼æ¥å£</a></p>
</blockquote>
<p>An informative annotation type used to indicate that an interface type declaration is intended to be a functional interface as defined by the Java Language Specification.</p>
<p>å¦‚æœä½ ç”¨ <code>@FunctionalInterface</code> å®šä¹‰äº†ä¸€ä¸ªæ¥å£, æ¥å£ä¸­åªèƒ½æœ‰ä¸€ä¸ªæ–¹æ³•å£°æ˜, å¦åˆ™ä¼šç¼–è¯‘æŠ¥é”™<br>
è€Œä¸”æ— è®ºæ¥å£å£°æ˜ä¸­æ˜¯å¦ä½¿ç”¨è¯¥æ³¨è§£ï¼Œç¼–è¯‘å™¨éƒ½ä¼šå°†æ¥å£åªæœ‰ä¸€ä¸ªæ–¹æ³•å£°æ˜çš„ä»»ä½•æ¥å£è§†ä¸º <code>FunctionalInterface</code></p>
<blockquote>
<p>å¸¸ç”¨å‡½æ•°æ¥å£: (è¯¦ç»†å¯å‚è€ƒ java.util.function; åŒ…ä¸‹çš„ç±»)</p>
</blockquote>
<table>
<thead>
<tr>
<th style="text-align:left">å‡½æ•°å¼æ¥å£</th>
<th style="text-align:left">å‡½æ•°æè¿°ç¬¦</th>
<th style="text-align:left">åŸå§‹ç±»å‹ç‰¹åŒ–</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>Predicate&lt;T&gt;</code></td>
<td style="text-align:left">T-&gt;boolean</td>
<td style="text-align:left">IntPredicate<br/>LongPredicate<br/> DoublePredicate</td>
</tr>
<tr>
<td style="text-align:left"><code>Consumer&lt;T&gt;</code></td>
<td style="text-align:left">T-&gt;void</td>
<td style="text-align:left">IntConsumer<br/>LongConsumer<br/> DoubleConsumer</td>
</tr>
<tr>
<td style="text-align:left">Function&lt;T,R&gt;</td>
<td style="text-align:left">T-&gt;R</td>
<td style="text-align:left"><code>IntFunction&lt;R&gt;</code> <br/> IntToDoubleFunction <br/> IntToLongFunction <br/> <code>LongFunction&lt;R&gt;</code><br/> LongToDoubleFunction <br/> LongToIntFunction <br/> <code>DoubleFunction&lt;R&gt;</code> <br/><code>ToIntFunction&lt;T&gt;</code><br/><code>ToDoubleFunction&lt;T&gt;</code><br/><code>ToLongFunction&lt;T&gt;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>Supplier&lt;T&gt;</code></td>
<td style="text-align:left">()-&gt;T</td>
<td style="text-align:left">BooleanSupplier<br/>IntSupplier<br/> LongSupplier<br/> DoubleSupplier</td>
</tr>
<tr>
<td style="text-align:left"><code>UnaryOperator&lt;T&gt;</code></td>
<td style="text-align:left">T-&gt;T</td>
<td style="text-align:left">IntUnaryOperator<br/>LongUnaryOperator<br/>DoubleUnaryOperator</td>
</tr>
<tr>
<td style="text-align:left"><code>BinaryOperator&lt;T&gt;</code></td>
<td style="text-align:left">(T,T)-&gt; T</td>
<td style="text-align:left">IntBinaryOperator<br/>LongBinaryOperator<br/>DoubleBinaryOperator</td>
</tr>
<tr>
<td style="text-align:left">BiPredicate&lt;L,R&gt;</td>
<td style="text-align:left">(L,R)-&gt;boolean</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">BiConsumer&lt;T,U&gt;</td>
<td style="text-align:left">(T,U)-&gt;void</td>
<td style="text-align:left"><code>ObjIntConsumer&lt;T&gt;</code><br/><code>ObjLongConsumer&lt;T&gt;</code><br/><code>ObjDoubleConsumer&lt;T&gt;</code></td>
</tr>
<tr>
<td style="text-align:left">BiFunction&lt;T,U,R&gt;</td>
<td style="text-align:left">(T,U)-&gt;R</td>
<td style="text-align:left">ToIntBiFunction&lt;T,U&gt;<br/>ToLongBiFunction&lt;T,U&gt;<br/>ToDoubleBiFunction&lt;T,U&gt;</td>
</tr>
</tbody>
</table>
<ul>
<li>
<p><code>(T,U) -&gt; R</code> çš„è¡¨è¾¾æ–¹å¼å±•ç¤ºäº†åº”å½“å¦‚ä½•æ€è€ƒä¸€ä¸ªå‡½æ•°æè¿°ç¬¦ã€‚</p>
<ul>
<li>è¡¨çš„å·¦ä¾§ä»£è¡¨äº†å‚æ•°ç±»å‹ã€‚è¿™é‡Œå®ƒä»£è¡¨ä¸€ä¸ªå‡½æ•°ï¼Œå…·æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«ä¸ºæ³›å‹Tå’ŒUï¼Œè¿”å›ç±»å‹ä¸ºRã€‚</li>
</ul>
</li>
<li>
<p>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ Function ä»¥åŠé—­åŒ…å‘¢ï¼Ÿ</p>
<ul>
<li>åœ¨è¯­æ³•ä¸Šæ¯”å®šä¹‰å›è°ƒæ¥å£ã€åˆ›å»ºåŒ¿åç±»æ›´åŠ ç®€æ´ï¼›</li>
<li>å°è¯•ä½¿ç”¨æ–°çš„è¯­è¨€ç‰¹æ€§ï¼Œç†è§£å¤šæ ·åŒ–çš„ç¼–ç¨‹æ€æƒ³ï¼Œæå‡ç¼–ç¨‹è¡¨è¾¾èƒ½åŠ›ã€‚</li>
</ul>
</li>
</ul>
<h2 id="å‡½æ•°å¼æ¥å£">å‡½æ•°å¼æ¥å£</h2>
<blockquote>
<p>é€šè¿‡ :: æ“ä½œç¬¦ ç®€åŒ–ä»£ç </p>
</blockquote>
<table>
<thead>
<tr>
<th style="text-align:left">Lambda</th>
<th style="text-align:left">æ–¹æ³•å¼•ç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">(Apple a) -&gt; a.getWeight()</td>
<td style="text-align:left">Apple::getWeight</td>
</tr>
<tr>
<td style="text-align:left">() -&gt; Thread.currentThread().dumpStack()</td>
<td style="text-align:left">Thread.currentThread()::dumpStack</td>
</tr>
<tr>
<td style="text-align:left">(str, i) -&gt; str.substring(i)</td>
<td style="text-align:left">String::substring</td>
</tr>
<tr>
<td style="text-align:left">(String s) -&gt; System.out.println(s)</td>
<td style="text-align:left">System.out::println</td>
</tr>
</tbody>
</table>
<ol>
<li>æŒ‡å‘é™æ€æ–¹æ³•çš„æ–¹æ³•å¼•ç”¨ï¼ˆä¾‹å¦‚Integerçš„parseIntæ–¹æ³•ï¼Œå†™ä½œInteger::parseIntï¼‰</li>
<li>æŒ‡å‘ä»»æ„ç±»å‹å®ä¾‹æ–¹æ³•çš„æ–¹æ³•å¼•ç”¨ ï¼ˆ ä¾‹ å¦‚ String çš„ length æ–¹ æ³• ï¼Œ å†™ä½œString::lengthï¼‰ã€‚</li>
<li>æŒ‡å‘ç°æœ‰å¯¹è±¡çš„å®ä¾‹æ–¹æ³•çš„æ–¹æ³•å¼•ç”¨
<ul>
<li>å‡è®¾ä½ æœ‰ä¸€ä¸ªå±€éƒ¨å˜é‡expensiveTransaction ç”¨äºå­˜æ”¾Transactionç±»å‹çš„å¯¹è±¡ï¼Œå®ƒæ”¯æŒå®ä¾‹æ–¹æ³•getValueï¼Œ</li>
<li>é‚£ä¹ˆä½ å°±å¯ä»¥å†™expensiveTransaction::getValue</li>
</ul>
</li>
</ol>
<h3 id="æ„é€ å‡½æ•°çš„å¼•ç”¨">æ„é€ å‡½æ•°çš„å¼•ç”¨</h3>
<ol>
<li>ç©ºæ„é€ å‡½æ•° ç­‰ä»·äº <code>() -&gt; T</code>
<ul>
<li>ä¾‹å¦‚ <code>Supplier&lt;Apple&gt; c1 = Apple::new;</code></li>
<li>ä¹‹å <code>Apple a1 = c1.get();</code> è°ƒç”¨æ¥å£çš„getæ–¹æ³•å®ä¾‹åŒ–Appleå¯¹è±¡</li>
</ul>
</li>
</ol>
<p>ä¸å°†æ„é€ å‡½æ•°å®ä¾‹åŒ–å´èƒ½å¤Ÿå¼•ç”¨å®ƒï¼Œè¿™ä¸ªåŠŸèƒ½æœ‰ä¸€äº›æœ‰è¶£çš„åº”ç”¨ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥ä½¿ç”¨Mapæ¥å°†æ„é€ å‡½æ•°æ˜ å°„åˆ°å­—ç¬¦ä¸²å€¼ã€‚
ä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªgiveMeFruitæ–¹æ³•ï¼Œç»™å®ƒä¸€ä¸ªStringå’Œä¸€ä¸ªIntegerï¼Œå®ƒå°±å¯ä»¥åˆ›å»ºå‡ºä¸åŒé‡é‡çš„å„ç§æ°´æœï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">    <span class="kd">static</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Function</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">Fruit</span><span class="o">&gt;&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;();</span>
</span></span><span class="line"><span class="cl">    <span class="kd">static</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&#34;apple&#34;</span><span class="o">,</span> <span class="n">Apple</span><span class="o">::</span><span class="k">new</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&#34;orange&#34;</span><span class="o">,</span> <span class="n">Orange</span><span class="o">::</span><span class="k">new</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// etc...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="n">Fruit</span> <span class="nf">giveMeFruit</span><span class="o">(</span><span class="n">String</span> <span class="n">fruit</span><span class="o">,</span> <span class="n">Integer</span> <span class="n">weight</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">map</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">fruit</span><span class="o">.</span><span class="na">toLowerCase</span><span class="o">()).</span><span class="na">apply</span><span class="o">(</span><span class="n">weight</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>åˆ©ç”¨JDKæä¾›çš„å‡½æ•°å¼æ¥å£ å¯ä»¥å®ç°å°†ä¸€ä¸ª,ä¸¤ä¸ªå‚æ•°çš„æ„é€ å‡½æ•°è½¬å˜ä¸ºæ„é€ å‡½æ•°å¼•ç”¨, é‚£ä¹ˆå¯ä»¥è‡ªå®šä¹‰å®ç°ä¸‰ä¸ªå‚æ•°çš„æ¥å£</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">interface</span> <span class="nc">TriFunction</span><span class="o">&lt;</span><span class="n">T</span><span class="o">,</span> <span class="n">U</span><span class="o">,</span> <span class="n">V</span><span class="o">,</span> <span class="n">R</span><span class="o">&gt;{</span>
</span></span><span class="line"><span class="cl">        <span class="n">R</span> <span class="nf">apply</span><span class="o">(</span><span class="n">T</span> <span class="n">t</span><span class="o">,</span> <span class="n">U</span> <span class="n">u</span><span class="o">,</span> <span class="n">V</span> <span class="n">v</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="n">TriFunction</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">Integer</span><span class="o">,</span> <span class="n">Integer</span><span class="o">,</span> <span class="n">Color</span><span class="o">&gt;</span> <span class="n">colorFactory</span> <span class="o">=</span> <span class="n">Color</span><span class="o">::</span><span class="k">new</span><span class="o">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="å‡½æ•°å¼æ¥å£æ¡ˆä¾‹">å‡½æ•°å¼æ¥å£æ¡ˆä¾‹</h2>
<table>
<thead>
<tr>
<th style="text-align:left">ä½¿ç”¨æ¡ˆä¾‹</th>
<th style="text-align:left">Lambdaä¾‹å­</th>
<th style="text-align:left">å¯¹åº”çš„å‡½æ•°å¼æ¥å£</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">å¸ƒå°”è¡¨è¾¾å¼</td>
<td style="text-align:left">(List<String> list) -&gt; list.isEmpty()</td>
<td style="text-align:left"><code>Predicate&lt;List&lt;String&gt;&gt;</code></td>
</tr>
<tr>
<td style="text-align:left">åˆ›å»ºå¯¹è±¡</td>
<td style="text-align:left">() -&gt; new Apple(10)</td>
<td style="text-align:left"><code>Supplier&lt;Apple&gt;</code></td>
</tr>
<tr>
<td style="text-align:left">æ¶ˆè´¹ä¸€ä¸ªå¯¹è±¡</td>
<td style="text-align:left">(Apple a) -&gt;System.out.println(a.getWeight())</td>
<td style="text-align:left"><code>Consumer&lt;Apple&gt;</code></td>
</tr>
<tr>
<td style="text-align:left">ä»ä¸€ä¸ªå¯¹è±¡ä¸­ é€‰æ‹©/æå–</td>
<td style="text-align:left">(String s) -&gt; s.length()</td>
<td style="text-align:left">Function&lt;String, Integer&gt; æˆ– <code>ToIntFunction&lt;String&gt;</code></td>
</tr>
<tr>
<td style="text-align:left">åˆå¹¶ä¸¤ä¸ªå€¼</td>
<td style="text-align:left">(int a, int b) -&gt; a * b</td>
<td style="text-align:left">IntBinaryOperator</td>
</tr>
<tr>
<td style="text-align:left">æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡</td>
<td style="text-align:left">(Apple a1, Apple a2) -&gt; a1.getWeight().compareTo(a2.getWeight())</td>
<td style="text-align:left">Comparator&lt; Apple &gt; æˆ– BiFunction&lt;Apple, Apple, Integer&gt; æˆ– ToIntBiFunction&lt;Apple, Apple&gt;</td>
</tr>
</tbody>
</table>
<ul>
<li>è¯·æ³¨æ„ï¼Œä»»ä½•å‡½æ•°å¼æ¥å£éƒ½ä¸å…è®¸æŠ›å‡ºå—æ£€å¼‚å¸¸ï¼ˆchecked exceptionï¼‰ã€‚å¦‚æœä½ éœ€è¦Lambda è¡¨è¾¾å¼æ¥æŠ›å‡ºå¼‚å¸¸ï¼Œæœ‰ä¸¤ç§åŠæ³•ï¼š
<ul>
<li>å®šä¹‰ä¸€ä¸ªè‡ªå·±çš„å‡½æ•°å¼æ¥å£ï¼Œå¹¶å£°æ˜å—æ£€å¼‚å¸¸ï¼Œ</li>
<li>æˆ–è€…æŠŠLambda åŒ…åœ¨ä¸€ä¸ªtry/catchå—ä¸­ã€‚</li>
</ul>
</li>
<li>æ¯”å¦‚å‡½æ•°å¼æ¥å£BufferedReaderProcessorï¼Œå®ƒæ˜¾å¼å£°æ˜äº†ä¸€ä¸ªIOExceptionï¼š
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">    <span class="nd">@FunctionalInterface</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">interface</span> <span class="nc">BufferedReaderProcessor</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">String</span> <span class="nf">process</span><span class="o">(</span><span class="n">BufferedReader</span> <span class="n">b</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="n">BufferedReaderProcessor</span> <span class="n">p</span> <span class="o">=</span> <span class="o">(</span><span class="n">BufferedReader</span> <span class="n">br</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">br</span><span class="o">.</span><span class="na">readLine</span><span class="o">();</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>ä½†æ˜¯ä½ å¯èƒ½æ˜¯åœ¨ä½¿ç”¨ä¸€ä¸ªæ¥å—å‡½æ•°å¼æ¥å£çš„APIï¼Œæ¯”å¦‚Function&lt;T, R&gt;ï¼Œæ²¡æœ‰åŠæ³•è‡ªå·±åˆ›å»ºä¸€ä¸ªã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œ ä½ å¯ä»¥æ˜¾å¼æ•æ‰å—æ£€å¼‚å¸¸ï¼š
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">    <span class="n">Function</span><span class="o">&lt;</span><span class="n">BufferedReader</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">f</span> <span class="o">=</span> <span class="o">(</span><span class="n">BufferedReader</span> <span class="n">b</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">b</span><span class="o">.</span><span class="na">readLine</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span> <span class="k">catch</span><span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">throw</span> <span class="k">new</span> <span class="n">RuntimeException</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<hr>
<h1 id="lambda">Lambda</h1>
<blockquote>
<p>Î» è¡¨è¾¾å¼</p>
</blockquote>
<ol>
<li>Lambdaè¡¨è¾¾å¼å¯ä»¥ç†è§£ä¸ºä¸€ç§åŒ¿åå‡½æ•°ï¼šå®ƒæ²¡æœ‰åç§°ï¼Œä½†æœ‰å‚æ•°åˆ—è¡¨ã€å‡½æ•°ä¸»ä½“ã€è¿”å›ç±»å‹ï¼Œå¯èƒ½è¿˜æœ‰ä¸€ä¸ªå¯ä»¥æŠ›å‡ºçš„å¼‚å¸¸çš„åˆ—è¡¨ã€‚</li>
<li>Lambdaè¡¨è¾¾å¼è®©ä½ å¯ä»¥ç®€æ´åœ°ä¼ é€’ä»£ç ã€‚</li>
<li>å‡½æ•°å¼æ¥å£å°±æ˜¯ä»…ä»…å£°æ˜äº†ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„æ¥å£ã€‚</li>
<li>åªæœ‰åœ¨æ¥å—å‡½æ•°å¼æ¥å£çš„åœ°æ–¹æ‰å¯ä»¥ä½¿ç”¨Lambdaè¡¨è¾¾å¼ã€‚</li>
<li>Lambdaè¡¨è¾¾å¼å…è®¸ä½ ç›´æ¥å†…è”ï¼Œä¸ºå‡½æ•°å¼æ¥å£çš„æŠ½è±¡æ–¹æ³•æä¾›å®ç°ï¼Œå¹¶ä¸”å°†æ•´ä¸ªè¡¨è¾¾å¼ä½œä¸ºå‡½æ•°å¼æ¥å£çš„ä¸€ä¸ªå®ä¾‹ã€‚</li>
<li>Java 8è‡ªå¸¦ä¸€äº›å¸¸ç”¨çš„å‡½æ•°å¼æ¥å£ï¼Œæ”¾åœ¨java.util.functionåŒ…é‡Œï¼ŒåŒ…æ‹¬<code>Predicate&lt;T&gt;ã€ Function&lt;T,R&gt;ã€ Supplier&lt;T&gt;ã€Consumer&lt;T&gt; å’ŒBinaryOperator&lt;T&gt;</code></li>
<li>ä¸ºäº†é¿å…è£…ç®±æ“ä½œï¼Œå¯¹<code>Predicate&lt;T&gt;</code>å’Œ<code>Function&lt;T, R&gt;</code>ç­‰é€šç”¨å‡½æ•°å¼æ¥å£çš„åŸå§‹ç±»å‹ç‰¹åŒ–ï¼š IntPredicateã€ IntToLongFunctionç­‰ã€‚</li>
<li>ç¯ç»•æ‰§è¡Œæ¨¡å¼ï¼ˆå³åœ¨æ–¹æ³•æ‰€å¿…éœ€çš„ä»£ç ä¸­é—´ï¼Œä½ éœ€è¦æ‰§è¡Œç‚¹å„¿ä»€ä¹ˆæ“ä½œï¼Œæ¯”å¦‚èµ„æºåˆ†é…å’Œæ¸…ç†ï¼‰å¯ä»¥é…åˆLambdaæé«˜çµæ´»æ€§å’Œå¯é‡ç”¨æ€§ã€‚</li>
<li>Lambdaè¡¨è¾¾å¼æ‰€éœ€è¦ä»£è¡¨çš„ç±»å‹ç§°ä¸ºç›®æ ‡ç±»å‹ã€‚</li>
<li>æ–¹æ³•å¼•ç”¨è®©ä½ é‡å¤ä½¿ç”¨ç°æœ‰çš„æ–¹æ³•å®ç°å¹¶ç›´æ¥ä¼ é€’å®ƒä»¬ã€‚</li>
<li>Comparatorã€ Predicateå’ŒFunctionç­‰å‡½æ•°å¼æ¥å£éƒ½æœ‰å‡ ä¸ªå¯ä»¥ç”¨æ¥ç»“åˆLambdaè¡¨è¾¾å¼çš„é»˜è®¤æ–¹æ³•ã€‚</li>
</ol>
<blockquote>
<p><a href="https://mp.weixin.qq.com/s?__biz=MzAxODcyNjEzNQ==&amp;mid=2247485682&amp;idx=1&amp;sn=f3fb281b49a029b607f9377853a644bf&amp;chksm=9bd0a56aaca72c7c8beebbea8f9471446cb444bd8e1e7d21016e906d1227e8f87770e2f8f31e&amp;mpshare=1&amp;scene=1&amp;srcid=0810geQnLXB2oMjfoAOEJ39L#rd">å‚è€ƒ: ä½ çœŸçš„äº†è§£lambdaå—ï¼Ÿä¸€æ–‡è®©ä½ æ˜ç™½lambdaç”¨æ³•ä¸æºç åˆ†æ </a>
<a href="http://www.techug.com/post/java-lambda.html">å‚è€ƒ: çº§è” lambda è¡¨è¾¾å¼çš„å‡½æ•°é‡ç”¨ä¸ä»£ç ç®€çŸ­é—®é¢˜</a>
<a href="http://www.importnew.com/15259.html">å‚è€ƒ: Java8ï¼šLambdaè¡¨è¾¾å¼å¢å¼ºç‰ˆComparatorå’Œæ’åº</a></p>
</blockquote>
<h2 id="è¡Œä¸ºå‚æ•°åŒ–">è¡Œä¸ºå‚æ•°åŒ–</h2>
<blockquote>
<ol>
<li>è¡Œä¸ºå‚æ•°åŒ–ï¼Œå°±æ˜¯ä¸€ä¸ªæ–¹æ³•æ¥å—å¤šä¸ªä¸åŒçš„è¡Œä¸ºä½œä¸ºå‚æ•°ï¼Œå¹¶åœ¨å†…éƒ¨ä½¿ç”¨å®ƒä»¬ï¼Œ å®Œæˆä¸åŒè¡Œä¸ºçš„èƒ½åŠ›ã€‚</li>
<li>è¡Œä¸ºå‚æ•°åŒ–å¯è®©ä»£ç æ›´å¥½åœ°é€‚åº”ä¸æ–­å˜åŒ–çš„è¦æ±‚ï¼Œå‡è½»æœªæ¥çš„å·¥ä½œé‡ã€‚</li>
<li>ä¼ é€’ä»£ç ï¼Œå°±æ˜¯å°†æ–°è¡Œä¸ºä½œä¸ºå‚æ•°ä¼ é€’ç»™æ–¹æ³•ã€‚ä½†åœ¨Java 8ä¹‹å‰è¿™å®ç°èµ·æ¥å¾ˆå•°å—¦ã€‚ä¸ºæ¥</li>
<li>å£°æ˜è®¸å¤šåªç”¨ä¸€æ¬¡çš„å®ä½“ç±»è€Œé€ æˆçš„å•°å—¦ä»£ç ï¼Œåœ¨Java 8ä¹‹å‰å¯ä»¥ç”¨åŒ¿åç±»æ¥å‡å°‘ã€‚</li>
<li>Java APIåŒ…å«å¾ˆå¤šå¯ä»¥ç”¨ä¸åŒè¡Œä¸ºè¿›è¡Œå‚æ•°åŒ–çš„æ–¹æ³•ï¼ŒåŒ…æ‹¬æ’åºã€çº¿ç¨‹å’ŒGUIå¤„ç†ã€‚</li>
</ol>
</blockquote>
<blockquote>
<p>è¿™ç§æ¨¡å¼å¯ä»¥æŠŠä¸€ä¸ªè¡Œä¸ºï¼ˆä¸€æ®µä»£ç ï¼‰å°è£…èµ·æ¥ï¼Œå¹¶é€šè¿‡ä¼ é€’å’Œä½¿ç”¨åˆ›å»ºçš„è¡Œä¸º, å°†æ–¹æ³•çš„è¡Œä¸ºå‚æ•°åŒ–ã€‚å‰é¢æåˆ°è¿‡ï¼Œè¿™ç§åšæ³•ç±»ä¼¼äºç­–ç•¥è®¾è®¡æ¨¡å¼<br>
Java APIä¸­çš„å¾ˆå¤šæ–¹æ³•éƒ½å¯ä»¥ç”¨ä¸åŒçš„è¡Œä¸ºæ¥å‚æ•°åŒ–ã€‚è¿™äº›æ–¹æ³•å¾€å¾€ä¸åŒ¿åç±»ä¸€èµ·ä½¿ç”¨</p>
</blockquote>
<h2 id="lambdaåŸºç¡€">LambdaåŸºç¡€</h2>
<ul>
<li>
<p>å¯ä»¥æŠŠLambdaè¡¨è¾¾å¼ç†è§£ä¸ºç®€æ´åœ°è¡¨ç¤ºå¯ä¼ é€’çš„åŒ¿åå‡½æ•°çš„ä¸€ç§æ–¹å¼ï¼šå®ƒæ²¡æœ‰åç§°ï¼Œä½†å®ƒæœ‰å‚æ•°åˆ—è¡¨ã€å‡½æ•°ä¸»ä½“ã€è¿”å›ç±»å‹ï¼Œå¯èƒ½è¿˜æœ‰ä¸€ä¸ªå¯ä»¥æŠ›å‡ºçš„å¼‚å¸¸åˆ—è¡¨ã€‚</p>
<ul>
<li><code>åŒ¿å</code>  æˆ‘ä»¬è¯´åŒ¿åï¼Œæ˜¯å› ä¸ºå®ƒä¸åƒæ™®é€šçš„æ–¹æ³•é‚£æ ·æœ‰ä¸€ä¸ªæ˜ç¡®çš„åç§°ï¼šå†™å¾—å°‘è€Œæƒ³å¾—å¤šï¼</li>
<li><code>å‡½æ•°</code>  æˆ‘ä»¬è¯´å®ƒæ˜¯å‡½æ•°ï¼Œæ˜¯å› ä¸ºLambdaå‡½æ•°ä¸åƒæ–¹æ³•é‚£æ ·å±äºæŸä¸ªç‰¹å®šçš„ç±»ã€‚ä½†å’Œæ–¹æ³•ç­¾åçš„ç»„æˆæ˜¯ä¸€è‡´çš„</li>
<li><code>ä¼ é€’</code>  Lambdaè¡¨è¾¾å¼å¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’ç»™æ–¹æ³•æˆ–å­˜å‚¨åœ¨å˜é‡ä¸­ã€‚</li>
<li><code>ç®€æ´</code>  æ— éœ€åƒåŒ¿åç±»é‚£æ ·å†™å¾ˆå¤šæ¨¡æ¿ä»£ç ã€‚</li>
</ul>
</li>
<li>
<p>LambdaåŸºç¡€è¯­æ³•: <code>(parameters) -&gt; expression</code> æˆ–è€… <code>(parameters) -&gt; { statements; }</code></p>
</li>
</ul>
<p>ä¾‹å¦‚ <code>() -&gt; void</code> æ˜¯ä¸€ä¸ªå‚æ•°åˆ—è¡¨ä¸ºç©º è¿”å›å€¼ä¸ºvoidçš„å‡½æ•°, Runnable çš„ run æ–¹æ³•</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">Callable</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="nf">fetch</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// è¿”å›çš„æ–¹æ³•çš„æ–¹æ³•ç­¾åæ˜¯ () -&gt; String
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">return</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="s">&#34;Tricky example ;-)&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// æ–¹æ³•ç­¾åä¸º () -&gt; void
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">execute</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{});</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">execute</span><span class="o">(</span><span class="n">Runnable</span> <span class="n">r</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">        <span class="n">r</span><span class="o">.</span><span class="na">run</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong><code>å®è·µ</code></strong></p>
<ul>
<li>èµ„æºå¤„ç†ï¼ˆä¾‹å¦‚å¤„ç†æ–‡ä»¶æˆ–æ•°æ®åº“ï¼‰æ—¶ä¸€ä¸ªå¸¸è§çš„æ¨¡å¼å°±æ˜¯æ‰“å¼€ä¸€ä¸ªèµ„æºï¼Œåšä¸€äº›å¤„ç†ï¼Œç„¶åå…³é—­èµ„æºã€‚è¿™ä¸ªè®¾ç½®å’Œæ¸…ç†é˜¶æ®µæ€»æ˜¯å¾ˆç±»ä¼¼
<ul>
<li>å¹¶ä¸”ä¼šå›´ç»•ç€æ‰§è¡Œå¤„ç†çš„é‚£äº›é‡è¦ä»£ç ã€‚è¿™å°±æ˜¯æ‰€è°“çš„ç¯ç»•æ‰§è¡Œï¼ˆexecute aroundï¼‰ æ¨¡å¼</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">    <span class="c1">// ç®€å•çš„ä»æ–‡ä»¶è¯»å–ä¸€è¡Œ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="kd">static</span> <span class="n">String</span> <span class="nf">processFile</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span> <span class="o">(</span><span class="n">BufferedReader</span> <span class="n">br</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="n">FileReader</span><span class="o">(</span><span class="s">&#34;data.txt&#34;</span><span class="o">)))</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">br</span><span class="o">.</span><span class="na">readLine</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// å¦‚æœå°†è¡Œä¸ºå‚æ•°åŒ–, å°±èƒ½é€šç”¨çš„å®Œæˆéœ€æ±‚
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nd">@FunctionalInterface</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">interface</span> <span class="nc">BufferedReaderProcessor</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">String</span> <span class="nf">process</span><span class="o">(</span><span class="n">BufferedReader</span> <span class="n">b</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="n">String</span> <span class="nf">processFile</span><span class="o">(</span><span class="n">BufferedReaderProcessor</span> <span class="n">p</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{}</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// å¤„ç†ä¸€è¡Œ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">String</span> <span class="n">twoLines</span> <span class="o">=</span><span class="n">processFile</span><span class="o">((</span><span class="n">BufferedReader</span> <span class="n">br</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">br</span><span class="o">.</span><span class="na">readLine</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// å¤„ç†ä¸¤è¡Œ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">String</span> <span class="n">result</span> <span class="o">=</span> <span class="n">processFile</span><span class="o">((</span><span class="n">BufferedReader</span> <span class="n">br</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">br</span><span class="o">.</span><span class="na">readLine</span><span class="o">()</span> <span class="o">+</span> <span class="n">br</span><span class="o">.</span><span class="na">readLine</span><span class="o">());</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="lambda-å®ç°åŸç†">Lambda å®ç°åŸç†</h3>
<ol>
<li>åˆæ­¥åˆ†æ ç¼–è¯‘åç”ŸæˆåŒ¿åå†…éƒ¨ç±»æ›¿æ¢lambdaè¡¨è¾¾å¼</li>
</ol>
<blockquote>
<p><a href="https://blog.csdn.net/jiankunking/article/details/79825928">å‚è€ƒ: Java Lambdaè¡¨è¾¾å¼ å®ç°åŸç†åˆ†æ</a></p>
</blockquote>
<blockquote>
<p>ä¸ºä»€ä¹ˆLambdaèŒƒå›´å†…çš„ä»£ç å¼•ç”¨å¤–éƒ¨å˜é‡æ—¶å¾—æ˜¯finalä¿®é¥°çš„ã€‚
å› ä¸ºåŒ¿åå†…éƒ¨ç±»çš„å¼•ç”¨ä¸å…è®¸æ­¤æ“ä½œ</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">    int b = 0;
</span></span><span class="line"><span class="cl">    new Runnable(){
</span></span><span class="line"><span class="cl">        @Override
</span></span><span class="line"><span class="cl">        public void run() {
</span></span><span class="line"><span class="cl">            System.out.println(i++);//ç±»å±æ€§ï¼Œæ­£å¸¸
</span></span><span class="line"><span class="cl">            System.out.println(b++);//ç¼–è¯‘é”™è¯¯
</span></span><span class="line"><span class="cl">        }
</span></span><span class="line"><span class="cl">    };
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="lambda-å±€é™æ€§">Lambda å±€é™æ€§</h3>
<ol>
<li>å½“æ–¹æ³•ä¸Šå…·æœ‰<code>ç±»èŒƒå›´</code>çš„æ³›å‹å‚æ•°æ—¶æ— æ³•ä½¿ç”¨ Lambda å†™æ³•
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Test</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">T</span> <span class="nf">execute</span><span class="o">(</span><span class="n">T</span> <span class="n">param</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<h3 id="lambda-bug">Lambda BUG</h3>
<blockquote>
<p><a href="https://bugs.java.com/bugdatabase/view_bug.do?bug_id=8142476">æ³›å‹å†…extendså¤šä¸ªç±» lambda è¡¨è¾¾å¼æ–¹æ³•å¼•ç”¨æ—¶ä¼šæŠ¥é”™</a></p>
</blockquote>
<hr>
<h2 id="åŸå§‹ç±»å‹ç‰¹åŒ–">åŸå§‹ç±»å‹ç‰¹åŒ–</h2>
<blockquote>
<p>Primitive Specializations</p>
</blockquote>
<blockquote>
<p>Javaæ•°æ®ç±»å‹è¦ä¹ˆæ˜¯å¼•ç”¨ç±»å‹ï¼ˆæ¯”å¦‚Byteã€ Integerã€ Objectã€ Listï¼‰ï¼Œè¦ä¹ˆæ˜¯åŸå§‹ç±»å‹ï¼ˆæ¯”å¦‚intã€ doubleã€ byteã€ charï¼‰ã€‚<br>
ä½†æ˜¯æ³›å‹ï¼ˆæ¯”å¦‚<code>List&lt;T&gt;</code>ä¸­çš„Tï¼‰åªèƒ½ç»‘å®šåˆ°å¼•ç”¨ç±»å‹ã€‚è¿™æ˜¯ç”±æ³›å‹å†…éƒ¨çš„å®ç°æ–¹å¼é€ æˆçš„ <a href="/Java/AdvancedLearning/JavaGenerics.md">æ³›å‹ è¯¦ç»†</a>ã€‚</p>
</blockquote>
<p>å› æ­¤ï¼Œåœ¨Javaé‡Œæœ‰ä¸€ä¸ªå°†åŸå§‹ç±»å‹è½¬æ¢ä¸ºå¯¹åº”çš„å¼•ç”¨ç±»å‹çš„æœºåˆ¶ã€‚è¿™ä¸ªæœºåˆ¶å«ä½œè£…ç®± boxing ï¼Œåä¹‹ä¸ºæ‹†ç®± unboxing ã€‚<br>
Javaè¿˜æœ‰ä¸€ä¸ªè‡ªåŠ¨è£…ç®±æœºåˆ¶æ¥å¸®åŠ©ç¨‹åºå‘˜æ‰§è¡Œè¿™ä¸€ä»»åŠ¡ï¼šè£…ç®±å’Œæ‹†ç®±æ“ä½œæ˜¯è‡ªåŠ¨å®Œæˆçš„ã€‚ä½†è¿™åœ¨æ€§èƒ½æ–¹é¢æ˜¯è¦ä»˜å‡ºä»£ä»·çš„ã€‚</p>
<p>è£…ç®±åçš„å€¼æœ¬è´¨ä¸Šå°±æ˜¯æŠŠåŸå§‹ç±»å‹åŒ…è£¹èµ·æ¥ï¼Œå¹¶ä¿å­˜åœ¨å †é‡Œã€‚å› æ­¤ï¼Œè£…ç®±åçš„å€¼éœ€è¦æ›´å¤šçš„å†…å­˜ï¼Œå¹¶éœ€è¦é¢å¤–çš„å†…å­˜æœç´¢æ¥è·å–è¢«åŒ…è£¹çš„åŸå§‹å€¼ã€‚<br>
Java 8ä¸ºæˆ‘ä»¬å‰é¢æ‰€è¯´çš„å‡½æ•°å¼æ¥å£å¸¦æ¥äº†ä¸€ä¸ªä¸“é—¨çš„ç‰ˆæœ¬ï¼Œä»¥ä¾¿åœ¨è¾“å…¥å’Œè¾“å‡ºéƒ½æ˜¯åŸå§‹ç±»å‹æ—¶é¿å…è‡ªåŠ¨è£…ç®±çš„æ“ä½œã€‚</p>
<p>æ¯”å¦‚ï¼Œåœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œä½¿ç”¨IntPredicateå°±é¿å…äº†å¯¹å€¼1000è¿›è¡Œè£…ç®±æ“ä½œï¼Œä½†è¦æ˜¯ç”¨Predicate<Integer>å°±ä¼šæŠŠå‚æ•°1000è£…ç®±åˆ°ä¸€ä¸ªIntegerå¯¹è±¡ä¸­ &ndash; Java8 in action</p>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œé’ˆå¯¹ä¸“é—¨çš„è¾“å…¥å‚æ•°ç±»å‹çš„å‡½æ•°å¼æ¥å£çš„åç§°éƒ½è¦åŠ ä¸Šå¯¹åº”çš„åŸå§‹ç±»å‹å‰ç¼€ï¼Œæ¯”å¦‚ DoublePredicateã€LongBinaryOperatorç­‰ã€‚<br>
Functionæ¥å£è¿˜æœ‰é’ˆå¯¹è¾“å‡ºå‚æ•°ç±»å‹çš„å˜ç§ï¼š ToIntFunction<T>ã€ IntToDoubleFunctionç­‰ã€‚</p>
<hr>
<h2 id="ç±»å‹æ£€æŸ¥ç±»å‹æ¨æ–­ä»¥åŠé™åˆ¶">ç±»å‹æ£€æŸ¥ã€ç±»å‹æ¨æ–­ä»¥åŠé™åˆ¶</h2>
<p>å½“æˆ‘ä»¬ç¬¬ä¸€æ¬¡æåˆ°Lambdaè¡¨è¾¾å¼æ—¶ï¼Œè¯´å®ƒå¯ä»¥ä¸ºå‡½æ•°å¼æ¥å£ç”Ÿæˆä¸€ä¸ªå®ä¾‹ã€‚ç„¶è€Œï¼Œ Lambda è¡¨è¾¾å¼æœ¬èº«å¹¶ä¸åŒ…å«å®ƒåœ¨å®ç°å“ªä¸ªå‡½æ•°å¼æ¥å£çš„ä¿¡æ¯ã€‚</p>
<h3 id="ç±»å‹æ£€æŸ¥">ç±»å‹æ£€æŸ¥</h3>
<blockquote>
<p>Lambdaçš„ç±»å‹æ˜¯ä»ä½¿ç”¨Lambdaçš„ä¸Šä¸‹æ–‡æ¨æ–­å‡ºæ¥çš„ã€‚ä¸Šä¸‹æ–‡ï¼ˆæ¯”å¦‚ï¼Œæ¥å—å®ƒä¼ é€’çš„æ–¹æ³•çš„å‚æ•°ï¼Œæˆ–æ¥å—å®ƒçš„å€¼çš„å±€éƒ¨å˜é‡ï¼‰ä¸­Lambdaè¡¨è¾¾å¼éœ€è¦çš„ç±»å‹ç§°ä¸ºç›®æ ‡ç±»å‹ã€‚
è¯·æ³¨æ„ï¼Œå¦‚æœLambdaè¡¨è¾¾å¼æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼Œé‚£ä¹ˆæŠ½è±¡æ–¹æ³•æ‰€å£°æ˜çš„throwsè¯­å¥ä¹Ÿå¿…é¡»ä¸ä¹‹åŒ¹é…ã€‚</p>
</blockquote>
<h3 id="åŒæ ·çš„lambda-ä¸åŒçš„å‡½æ•°å¼æ¥å£">åŒæ ·çš„Lambda ä¸åŒçš„å‡½æ•°å¼æ¥å£</h3>
<blockquote>
<p>æœ‰äº†ç›®æ ‡ç±»å‹çš„æ¦‚å¿µï¼ŒåŒä¸€ä¸ªLambdaè¡¨è¾¾å¼å°±å¯ä»¥ä¸ä¸åŒçš„å‡½æ•°å¼æ¥å£è”ç³»èµ·æ¥ï¼Œåªè¦å®ƒä»¬çš„æŠ½è±¡æ–¹æ³•ç­¾åèƒ½å¤Ÿå…¼å®¹ã€‚</p>
</blockquote>
<p>æ¯”å¦‚ï¼Œå‰é¢æåˆ°çš„Callableå’ŒPrivilegedActionï¼Œè¿™ä¸¤ä¸ªæ¥å£ éƒ½ä»£è¡¨ç€ä»€ä¹ˆä¹Ÿä¸æ¥å—ä¸”è¿”å›ä¸€ä¸ªæ³›å‹Tçš„å‡½æ•°ã€‚ å› æ­¤ï¼Œä¸‹é¢ä¸¤ä¸ªèµ‹å€¼æ˜¯æœ‰æ•ˆçš„ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">    <span class="n">Callable</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">c</span> <span class="o">=</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="n">42</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">PrivilegedAction</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">p</span> <span class="o">=</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="n">42</span><span class="o">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong><code>ç‰¹æ®Šçš„voidå…¼å®¹è§„åˆ™</code></strong>
å¦‚æœä¸€ä¸ªLambdaçš„ä¸»ä½“æ˜¯ä¸€ä¸ªè¯­å¥è¡¨è¾¾å¼ï¼Œ å®ƒå°±å’Œä¸€ä¸ªè¿”å›voidçš„å‡½æ•°æè¿°ç¬¦å…¼å®¹ï¼ˆå½“ç„¶éœ€è¦å‚æ•°åˆ—è¡¨ä¹Ÿå…¼å®¹ï¼‰ã€‚
ä¾‹å¦‚ï¼Œä»¥ä¸‹ä¸¤è¡Œéƒ½æ˜¯åˆæ³•çš„ï¼Œå°½ç®¡Listçš„addæ–¹æ³•è¿”å›äº†ä¸€ä¸ª booleanï¼Œè€Œä¸æ˜¯Consumerä¸Šä¸‹æ–‡ï¼ˆT -&gt; voidï¼‰ æ‰€è¦æ±‚çš„voidï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">    <span class="c1">// Predicateè¿”å›äº†ä¸€ä¸ªboolean
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">Predicate</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">p</span> <span class="o">=</span> <span class="n">s</span> <span class="o">-&gt;</span> <span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">s</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Consumerè¿”å›äº†ä¸€ä¸ªvoid
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">Consumer</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">b</span> <span class="o">=</span> <span class="n">s</span> <span class="o">-&gt;</span> <span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">s</span><span class="o">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ol>
<li><code>Object o = () -&gt; {System.out.println(&quot;Tricky example&quot;); };</code> ä¸èƒ½é€šè¿‡ç¼–è¯‘
<ul>
<li>Lambdaè¡¨è¾¾å¼çš„ä¸Šä¸‹æ–‡æ˜¯Objectï¼ˆç›®æ ‡ç±»å‹ï¼‰ã€‚ä½†Objectä¸æ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£ã€‚</li>
<li>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½ å¯ä»¥æŠŠç›®æ ‡ç±»å‹æ”¹æˆRunnableï¼Œå®ƒçš„å‡½æ•°æè¿°ç¬¦æ˜¯() -&gt; void</li>
</ul>
</li>
</ol>
<p>æ—¢å¯ä»¥åˆ©ç”¨ç›®æ ‡ç±»å‹æ¥æ£€æŸ¥ä¸€ä¸ªLambdaæ˜¯å¦å¯ä»¥ç”¨äºæŸä¸ªç‰¹å®šçš„ä¸Šä¸‹æ–‡. ä¹Ÿå¯ä»¥ç”¨æ¥åšä¸€äº›ç•¥æœ‰ä¸åŒçš„äº‹ï¼šæ¨æ–­Lambdaå‚æ•°çš„ç±»å‹ã€‚</p>
<h3 id="ç±»å‹æ¨æ–­">ç±»å‹æ¨æ–­</h3>
<blockquote>
<p>ä½ è¿˜å¯ä»¥è¿›ä¸€æ­¥ç®€åŒ–ä½ çš„ä»£ç ã€‚ Javaç¼–è¯‘å™¨ä¼šä»ä¸Šä¸‹æ–‡ï¼ˆç›®æ ‡ç±»å‹ï¼‰æ¨æ–­å‡ºç”¨ä»€ä¹ˆå‡½æ•°å¼æ¥å£æ¥é…åˆLambdaè¡¨è¾¾å¼ï¼Œ
è¿™æ„å‘³ç€å®ƒä¹Ÿå¯ä»¥æ¨æ–­å‡ºé€‚åˆLambdaçš„ç­¾åï¼Œå› ä¸ºå‡½æ•°æè¿°ç¬¦å¯ä»¥é€šè¿‡ç›®æ ‡ç±»å‹æ¥å¾—åˆ°ã€‚<br>
è¿™æ ·åšçš„å¥½å¤„åœ¨äºï¼Œç¼–è¯‘å™¨å¯ä»¥äº†è§£Lambdaè¡¨è¾¾å¼çš„å‚æ•°ç±»å‹ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨Lambdaè¯­æ³•ä¸­çœå»æ ‡æ³¨å‚æ•°ç±»å‹ã€‚</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">    <span class="c1">// æ— ç±»å‹æ¨æ–­
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">Comparator</span><span class="o">&lt;</span><span class="n">Apple</span><span class="o">&gt;</span> <span class="n">c</span> <span class="o">=</span> <span class="o">(</span><span class="n">Apple</span> <span class="n">a1</span><span class="o">,</span> <span class="n">Apple</span> <span class="n">a2</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">a1</span><span class="o">.</span><span class="na">getWeight</span><span class="o">().</span><span class="na">compareTo</span><span class="o">(</span><span class="n">a2</span><span class="o">.</span><span class="na">getWeight</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// æœ‰ç±»å‹æ¨æ–­
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">Comparator</span><span class="o">&lt;</span><span class="n">Apple</span><span class="o">&gt;</span> <span class="n">c</span> <span class="o">=</span> <span class="o">(</span><span class="n">a1</span><span class="o">,</span> <span class="n">a2</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">a1</span><span class="o">.</span><span class="na">getWeight</span><span class="o">().</span><span class="na">compareTo</span><span class="o">(</span><span class="n">a2</span><span class="o">.</span><span class="na">getWeight</span><span class="o">());</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ä½¿ç”¨å±€éƒ¨å˜é‡">ä½¿ç”¨å±€éƒ¨å˜é‡</h3>
<p>æˆ‘ä»¬è¿„ä»Šä¸ºæ­¢æ‰€ä»‹ç»çš„æ‰€æœ‰Lambdaè¡¨è¾¾å¼éƒ½åªç”¨åˆ°äº†å…¶ä¸»ä½“é‡Œé¢çš„å‚æ•°ã€‚ä½†Lambdaè¡¨è¾¾å¼ä¹Ÿå…è®¸ä½¿ç”¨è‡ªç”±å˜é‡ï¼ˆä¸æ˜¯å‚æ•°ï¼Œè€Œæ˜¯åœ¨å¤–å±‚ä½œç”¨åŸŸä¸­å®šä¹‰çš„å˜é‡ï¼‰ï¼Œ
å°±åƒåŒ¿åç±»ä¸€æ ·ã€‚ å®ƒä»¬è¢«ç§°ä½œæ•è·Lambdaã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„Lambdaæ•è·äº†portNumberå˜é‡ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">portNumber</span> <span class="o">=</span> <span class="n">1337</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">Runnable</span> <span class="n">r</span> <span class="o">=</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">portNumber</span><span class="o">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å°½ç®¡å¦‚æ­¤ï¼Œè¿˜æœ‰ä¸€ç‚¹ç‚¹å°éº»çƒ¦ï¼šå…³äºèƒ½å¯¹è¿™äº›å˜é‡åšä»€ä¹ˆæœ‰ä¸€äº›é™åˆ¶ã€‚ Lambdaå¯ä»¥æ²¡æœ‰é™åˆ¶åœ°æ•è·ï¼ˆä¹Ÿå°±æ˜¯åœ¨å…¶ä¸»ä½“ä¸­å¼•ç”¨ï¼‰å®ä¾‹å˜é‡å’Œé™æ€å˜é‡ã€‚
ä½†å±€éƒ¨å˜é‡å¿…é¡»æ˜¾å¼å£°æ˜ä¸ºfinalï¼Œæˆ–äº‹å®ä¸Šæ˜¯finalã€‚
æ¢å¥è¯è¯´ï¼Œ Lambdaè¡¨è¾¾å¼åªèƒ½æ•è·æŒ‡æ´¾ç»™å®ƒä»¬çš„å±€éƒ¨å˜é‡ä¸€æ¬¡ã€‚ï¼ˆæ³¨ï¼šæ•è·å®ä¾‹å˜é‡å¯ä»¥è¢«çœ‹ä½œæ•è·æœ€ç»ˆå±€éƒ¨å˜é‡thisã€‚ï¼‰</p>
<p>ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä»£ç æ— æ³•ç¼–è¯‘ï¼Œå› ä¸ºportNumber å˜é‡è¢«èµ‹å€¼ä¸¤æ¬¡ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">portNumber</span> <span class="o">=</span> <span class="n">1337</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">Runnable</span> <span class="n">r</span> <span class="o">=</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">portNumber</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">portNumber</span> <span class="o">=</span> <span class="n">31337</span><span class="o">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong><code>å¯¹å±€éƒ¨å˜é‡çš„é™åˆ¶</code></strong></p>
<ul>
<li>ä½ å¯èƒ½ä¼šé—®è‡ªå·±ï¼Œä¸ºä»€ä¹ˆå±€éƒ¨å˜é‡æœ‰è¿™äº›é™åˆ¶ã€‚
<ol>
<li>ç¬¬ä¸€ï¼Œå®ä¾‹å˜é‡å’Œå±€éƒ¨å˜é‡èƒŒåçš„å®ç°æœ‰ä¸€ä¸ªå…³é”®ä¸åŒã€‚å®ä¾‹å˜é‡éƒ½å­˜å‚¨åœ¨å †ä¸­ï¼Œè€Œå±€éƒ¨å˜é‡åˆ™ä¿å­˜åœ¨æ ˆä¸Šã€‚
<ul>
<li>å¦‚æœLambdaå¯ä»¥ç›´æ¥è®¿é—®å±€éƒ¨å˜é‡ï¼Œè€Œä¸”Lambdaæ˜¯åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­ä½¿ç”¨çš„ï¼Œåˆ™ä½¿ç”¨Lambdaçš„çº¿ç¨‹ï¼Œå¯èƒ½ä¼šåœ¨åˆ†é…è¯¥å˜é‡çš„çº¿ç¨‹å°†è¿™ä¸ªå˜é‡æ”¶å›ä¹‹åï¼Œå»è®¿é—®è¯¥å˜é‡ã€‚</li>
<li>å› æ­¤ï¼Œ Javaåœ¨è®¿é—®è‡ªç”±å±€éƒ¨å˜é‡æ—¶ï¼Œå®é™…ä¸Šæ˜¯åœ¨è®¿é—®å®ƒçš„å‰¯æœ¬ï¼Œè€Œä¸æ˜¯è®¿é—®åŸå§‹å˜é‡ã€‚å¦‚æœå±€éƒ¨å˜é‡ä»…ä»…èµ‹å€¼ä¸€æ¬¡é‚£å°±æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«äº†â€”â€”å› æ­¤å°±æœ‰äº†è¿™ä¸ªé™åˆ¶ã€‚</li>
</ul>
</li>
<li>ç¬¬äºŒï¼Œè¿™ä¸€é™åˆ¶ä¸é¼“åŠ±ä½ ä½¿ç”¨æ”¹å˜å¤–éƒ¨å˜é‡çš„å…¸å‹å‘½ä»¤å¼ç¼–ç¨‹æ¨¡å¼ï¼ˆè¿™ç§æ¨¡å¼ä¼šé˜»ç¢å¾ˆå®¹æ˜“åšåˆ°çš„å¹¶è¡Œå¤„ç†ï¼‰ã€‚</li>
</ol>
</li>
</ul>
<p><strong><code>é—­åŒ…</code></strong></p>
<p>ä½ å¯èƒ½å·²ç»å¬è¯´è¿‡é—­åŒ…ï¼ˆclosureï¼Œä¸è¦å’ŒClojureç¼–ç¨‹è¯­è¨€æ··æ·†ï¼‰è¿™ä¸ªè¯ï¼Œä½ å¯èƒ½ä¼šæƒ³Lambdaæ˜¯å¦æ»¡è¶³é—­åŒ…çš„å®šä¹‰ã€‚
ç”¨ç§‘å­¦çš„è¯´æ³•æ¥è¯´ï¼Œé—­åŒ…å°±æ˜¯ä¸€ä¸ªå‡½æ•°çš„å®ä¾‹ï¼Œä¸”å®ƒå¯ä»¥æ— é™åˆ¶åœ°è®¿é—®é‚£ä¸ªå‡½æ•°çš„éæœ¬åœ°å˜é‡ã€‚ä¾‹å¦‚ï¼Œé—­åŒ…å¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°ã€‚
å®ƒä¹Ÿå¯ä»¥è®¿é—®å’Œä¿®æ”¹å…¶ä½œç”¨åŸŸä¹‹å¤–çš„å˜é‡ã€‚ç°åœ¨ï¼Œ Java 8çš„Lambdaå’ŒåŒ¿åç±»å¯ä»¥åšç±»ä¼¼äºé—­åŒ…çš„äº‹æƒ…ï¼š
å®ƒä»¬å¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’ç»™æ–¹æ³•ï¼Œå¹¶ä¸”å¯ä»¥è®¿é—®å…¶ä½œç”¨åŸŸä¹‹å¤–çš„å˜é‡ã€‚ä½†æœ‰ä¸€ä¸ªé™åˆ¶ï¼šå®ƒä»¬ä¸èƒ½ä¿®æ”¹å®šä¹‰Lambdaçš„æ–¹æ³•çš„å±€éƒ¨å˜é‡çš„å†…å®¹ã€‚
è¿™äº›å˜é‡å¿…é¡»æ˜¯éšå¼æœ€ç»ˆçš„ã€‚å¯ä»¥è®¤ä¸ºLambdaæ˜¯å¯¹å€¼å°é—­ï¼Œè€Œä¸æ˜¯å¯¹å˜é‡å°é—­ã€‚å¦‚å‰æ‰€è¿°ï¼Œè¿™ç§é™åˆ¶å­˜åœ¨çš„åŸå› åœ¨äºå±€éƒ¨å˜é‡ä¿å­˜åœ¨æ ˆä¸Šï¼Œ
å¹¶ä¸”éšå¼è¡¨ç¤ºå®ƒä»¬ä»…é™äºå…¶æ‰€åœ¨çº¿ç¨‹ã€‚å¦‚æœå…è®¸æ•è·å¯æ”¹å˜çš„å±€éƒ¨å˜é‡ï¼Œå°±ä¼šå¼•å‘é€ æˆçº¿ç¨‹ä¸å®‰å…¨çš„æ–°çš„å¯èƒ½æ€§ï¼Œ
è€Œè¿™æ˜¯æˆ‘ä»¬ä¸æƒ³çœ‹åˆ°çš„ï¼ˆå®ä¾‹å˜é‡å¯ä»¥ï¼Œå› ä¸ºå®ƒä»¬ä¿å­˜åœ¨å †ä¸­ï¼Œè€Œå †æ˜¯åœ¨çº¿ç¨‹ä¹‹é—´å…±äº«çš„ï¼‰ ã€‚</p>
<h2 id="å¤åˆ-lambda-è¡¨è¾¾å¼">å¤åˆ Lambda è¡¨è¾¾å¼</h2>
<p>åœ¨å®è·µä¸­ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥æŠŠå¤šä¸ªç®€å•çš„Lambdaå¤åˆæˆå¤æ‚çš„è¡¨è¾¾å¼ã€‚æ¯”å¦‚ï¼Œä½ å¯ä»¥è®©ä¸¤ä¸ªè°“è¯ä¹‹é—´åšä¸€ä¸ªoræ“ä½œï¼Œç»„åˆæˆä¸€ä¸ªæ›´å¤§çš„è°“è¯ã€‚
è€Œä¸”ï¼Œä½ è¿˜å¯ä»¥è®©ä¸€ä¸ªå‡½æ•°çš„ç»“æœæˆä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„è¾“å…¥ã€‚
çªé—¨åœ¨äºï¼Œæˆ‘ä»¬å³å°†ä»‹ç»çš„æ–¹æ³•éƒ½æ˜¯<strong>é»˜è®¤æ–¹æ³•</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒä»¬ä¸æ˜¯æŠ½è±¡æ–¹æ³•ã€‚</p>
<h3 id="æ¯”è¾ƒå™¨å¤åˆ">æ¯”è¾ƒå™¨å¤åˆ</h3>
<blockquote>
<p><a href="https://mp.weixin.qq.com/s?__biz=MzAxODcyNjEzNQ==&amp;mid=2247487247&amp;idx=1&amp;sn=55dc46cdde683b79864997a183c258df&amp;chksm=9bd0a297aca72b8106cb40bedade4a69d539dbdbb579bed6238a54cf30bb270b8b4a8e45ec04&amp;mpshare=1&amp;scene=1&amp;srcid=#rd">Java Comparator çè—ç‰ˆ </a></p>
</blockquote>
<ol>
<li>å•ä¸€å±æ€§æ¯”è¾ƒ <code>Comparator&lt;Apple&gt; c = Comparator.comparing(Apple::getWeight);</code> (å®ç”¨çš„<strong>Comparator.comparing</strong>æ–¹æ³•)
<ul>
<li>é¡ºåº(å°åˆ°å¤§) é€†åºåˆ™å†è°ƒç”¨ä¸‹ reversed()</li>
</ul>
</li>
<li>æŒ‰é‡é‡æ’åº, é‡é‡ä¸€è‡´åˆ™å†æŒ‰å›½å®¶æ’åº <code>inventory.sort(comparing(Apple::getWeight).thenComparing(Apple::getCountry));</code></li>
<li>nullsFirstæ˜¯ComparatoråŠŸèƒ½æ¥å£çš„é™æ€æ–¹æ³•ã€‚Comparator.nullsFirstæ–¹æ³•è¿”å›ä¸€ä¸ªç©ºå€¼å‹å¥½çš„æ¯”è¾ƒå™¨ï¼Œè¯¥æ¯”è¾ƒå™¨å°†nullè§†ä¸ºå°äºénullã€‚
<ol>
<li>nullLast ä¸ä¹‹ç›¸å</li>
</ol>
</li>
</ol>
<h3 id="è°“è¯å¤åˆ">è°“è¯å¤åˆ</h3>
<blockquote>
<p>è°“è¯æ¥å£åŒ…æ‹¬ä¸‰ä¸ªæ–¹æ³•ï¼š negateã€ andå’Œorï¼Œè®©ä½ å¯ä»¥é‡ç”¨å·²æœ‰çš„Predicateæ¥åˆ›å»ºæ›´å¤æ‚çš„è°“è¯ã€‚<br>
è¯·æ³¨æ„ï¼Œ andå’Œoræ–¹æ³•æ˜¯æŒ‰ç…§åœ¨è¡¨è¾¾å¼é“¾ä¸­çš„ä½ç½®ï¼Œä»å·¦å‘å³ç¡®å®šä¼˜å…ˆçº§çš„ã€‚å› æ­¤ï¼Œ a.or(b).and(c)å¯ä»¥çœ‹ä½œ(a || b) &amp;&amp; cã€‚</p>
</blockquote>
<ol>
<li>ä¸çº¢ <code>Predicate&lt;Apple&gt; notRedApple = redApple.negate();</code></li>
<li>çº¢ä¸”é‡<code>Predicate&lt;Apple&gt; redAndHeavyApple = redApple.and(a -&gt; a.getWeight() &gt; 150);</code></li>
<li>çº¢ä¸”é‡æˆ–è€…æ˜¯ç»¿çš„ <code>Predicate&lt;Apple&gt; redAndHeavyAppleOrGreen = redApple.and(a -&gt; a.getWeight() &gt; 150).or(a -&gt; &quot;green&quot;.equals(a.getColor()));</code></li>
</ol>
<h3 id="å‡½æ•°å¤åˆ">å‡½æ•°å¤åˆ</h3>
<p>å¯ä»¥æŠŠFunctionæ¥å£æ‰€ä»£è¡¨çš„Lambdaè¡¨è¾¾å¼å¤åˆèµ·æ¥ã€‚ Functionæ¥å£ä¸ºæ­¤é…äº†andThenå’Œcomposeä¸¤ä¸ªé»˜è®¤æ–¹æ³•ï¼Œå®ƒä»¬éƒ½ä¼šè¿”å›Functionçš„ä¸€ä¸ªå®ä¾‹ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">    <span class="n">Function</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">Integer</span><span class="o">&gt;</span> <span class="n">f</span> <span class="o">=</span> <span class="n">x</span> <span class="o">-&gt;</span> <span class="n">x</span> <span class="o">+</span> <span class="n">1</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">Function</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">Integer</span><span class="o">&gt;</span> <span class="n">g</span> <span class="o">=</span> <span class="n">x</span> <span class="o">-&gt;</span> <span class="n">x</span> <span class="o">*</span> <span class="n">2</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">Function</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">Integer</span><span class="o">&gt;</span> <span class="n">h</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="na">andThen</span><span class="o">(</span><span class="n">g</span><span class="o">);</span> <span class="c1">// g(f(x))
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">1</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">Function</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">Integer</span><span class="o">&gt;</span> <span class="n">f</span> <span class="o">=</span> <span class="n">x</span> <span class="o">-&gt;</span> <span class="n">x</span> <span class="o">+</span> <span class="n">1</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">Function</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">Integer</span><span class="o">&gt;</span> <span class="n">g</span> <span class="o">=</span> <span class="n">x</span> <span class="o">-&gt;</span> <span class="n">x</span> <span class="o">*</span> <span class="n">2</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">Function</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">Integer</span><span class="o">&gt;</span> <span class="n">h</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="na">compose</span><span class="o">(</span><span class="n">g</span><span class="o">);</span> <span class="c1">// f(g(x))
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">1</span><span class="o">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>ä½¿ç”¨åœºæ™¯ ç”¨Stringè¡¨ç¤ºçš„ä¸€å°ä¿¡åšæ–‡æœ¬è½¬æ¢ï¼šç°åœ¨ä½ å¯ä»¥é€šè¿‡å¤åˆè¿™äº›å·¥å…·æ–¹æ³•æ¥åˆ›å»ºå„ç§è½¬å‹æµæ°´çº¿äº†<br>
æ¯”å¦‚åˆ›å»ºä¸€ä¸ªæµæ°´çº¿ï¼šå…ˆåŠ ä¸ŠæŠ¬å¤´ï¼Œç„¶åè¿›è¡Œæ‹¼å†™æ£€æŸ¥ï¼Œæœ€ååŠ ä¸Šä¸€ä¸ªè½æ¬¾ï¼Œ</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">    <span class="n">Function</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">addHeader</span> <span class="o">=</span> <span class="n">Letter</span><span class="o">::</span><span class="n">addHeader</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">Function</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">transformationPipeline</span> <span class="o">=</span> <span class="n">addHeader</span>
</span></span><span class="line"><span class="cl">        <span class="o">.</span><span class="na">andThen</span><span class="o">(</span><span class="n">Letter</span><span class="o">::</span><span class="n">checkSpelling</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">        <span class="o">.</span><span class="na">andThen</span><span class="o">(</span><span class="n">Letter</span><span class="o">::</span><span class="n">addFooter</span><span class="o">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong><code>å’Œæ•°å­¦å¯¹æ¯”</code></strong>
ä¾‹å¦‚ æ ¹æ®ç»™å®šçš„æŸä¸ªå‡½æ•° ä»¥åŠä¸Šä¸‹é™, æ±‚ç§¯åˆ†: å®šä¹‰å‡½æ•° integrate <code>integrate(f, 3, 7)</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">double</span> <span class="nf">integrate</span><span class="o">(</span><span class="n">DoubleFunction</span><span class="o">&lt;</span><span class="n">Double</span><span class="o">&gt;</span> <span class="n">f</span><span class="o">,</span> <span class="kt">double</span> <span class="n">a</span><span class="o">,</span> <span class="kt">double</span> <span class="n">b</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="o">(</span><span class="n">f</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">a</span><span class="o">)</span> <span class="o">+</span> <span class="n">f</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">b</span><span class="o">))</span> <span class="o">*</span> <span class="o">(</span><span class="n">b</span><span class="o">-</span><span class="n">a</span><span class="o">)</span> <span class="o">/</span> <span class="n">2</span><span class="o">.</span><span class="na">0</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="åˆ©ç”¨lambdaå¼€å‘dslæ¡†æ¶">åˆ©ç”¨Lambdaå¼€å‘DSLæ¡†æ¶</h2>
<hr>
<h1 id="stream">Stream</h1>
<blockquote>
<p><a href="https://www.ibm.com/developerworks/cn/java/j-lo-java8streamapi/">å‚è€ƒ: Java 8 ä¸­çš„ Streams API è¯¦è§£</a></p>
</blockquote>
<ul>
<li>
<p>Java 8ä¸­çš„Stream APIå¯ä»¥è®©ä½ å†™å‡ºè¿™æ ·çš„ä»£ç </p>
<ol>
<li>å£°æ˜æ€§, æ›´ç®€æ´, æ›´æ˜“è¯»</li>
<li>å¯å¤åˆ, æ›´çµæ´»</li>
<li>å¯å¹¶è¡Œ, æ€§èƒ½æ›´å¥½</li>
</ol>
</li>
<li>
<p>Stream ç®€çŸ­çš„å®šä¹‰å°±æ˜¯ â€œä»æ”¯æŒæ•°æ®å¤„ç†æ“ä½œçš„æºï¼Œç”Ÿæˆçš„å…ƒç´ åºåˆ—â€</p>
<ul>
<li><strong>å…ƒç´ åºåˆ—</strong>
<ul>
<li>å°±åƒé›†åˆä¸€æ ·ï¼Œæµä¹Ÿæä¾›äº†ä¸€ä¸ªæ¥å£ï¼Œå¯ä»¥è®¿é—®ç‰¹å®šå…ƒç´ ç±»å‹çš„ä¸€ç»„æœ‰åºå€¼ã€‚</li>
<li>å› ä¸ºé›†åˆæ˜¯æ•°æ®ç»“æ„ï¼Œæ‰€ä»¥å®ƒçš„ä¸»è¦ç›®çš„æ˜¯ä»¥ç‰¹å®šçš„æ—¶é—´/ç©ºé—´å¤æ‚åº¦å­˜å‚¨å’Œç´ ï¼ˆå¦‚ArrayListä¸LinkedListï¼‰ã€‚</li>
<li>ä½†æµçš„ç›®çš„åœ¨äºè¡¨è¾¾è®¡ç®—ï¼Œæ¯”å¦‚ä½ å‰é¢è§åˆ°çš„filterã€sorted å’Œmapã€‚é›†åˆè®²çš„æ˜¯æ•°æ®ï¼Œæµè®²çš„æ˜¯è®¡ç®—ã€‚</li>
</ul>
</li>
<li><strong>æº</strong>
<ul>
<li>æµä¼šä½¿ç”¨ä¸€ä¸ªæä¾›æ•°æ®çš„æºï¼Œå¦‚é›†åˆã€æ•°ç»„æˆ–è¾“å…¥/è¾“å‡ºèµ„æºã€‚è¯·æ³¨æ„ï¼Œä»æœ‰åºé›†åˆç”Ÿæˆæµæ—¶ä¼šä¿ç•™åŸæœ‰çš„é¡ºåºã€‚ç”±åˆ—è¡¨ç”Ÿæˆçš„æµï¼Œå…¶å…ƒç´ é¡ºåºä¸åˆ—è¡¨ä¸€è‡´ã€‚</li>
</ul>
</li>
<li><strong>æ•°æ®å¤„ç†æ“ä½œ</strong>
<ul>
<li>æµçš„æ•°æ®å¤„ç†åŠŸèƒ½æ”¯æŒç±»ä¼¼äºæ•°æ®åº“çš„æ“ä½œï¼Œä»¥åŠå‡½æ•°å¼ç¼–ç¨‹è¯­è¨€ä¸­çš„å¸¸ç”¨æ“ä½œï¼Œå¦‚filterã€mapã€reduceã€findã€matchã€sortç­‰ã€‚æµæ“ä½œå¯ä»¥é¡ºåºæ‰§è¡Œï¼Œä¹Ÿå¯å¹¶è¡Œæ‰§è¡Œ</li>
</ul>
</li>
<li><strong>å†…éƒ¨è¿­ä»£</strong>
<ul>
<li>ä¸ä½¿ç”¨è¿­ä»£å™¨æ˜¾å¼è¿­ä»£çš„é›†åˆä¸åŒï¼Œæµçš„è¿­ä»£æ“ä½œæ˜¯åœ¨èƒŒåè¿›è¡Œçš„ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<blockquote>
<p>æ³¨æ„ï¼š</p>
</blockquote>
<ul>
<li>é€šå¸¸ç®€å•çš„è¿­ä»£ä½¿ç”¨å¤–éƒ¨è¿­ä»£æ€§èƒ½ä¼šæ›´å¥½ï¼Œå¤æ‚æ“ä½œä½¿ç”¨Streamèƒ½è®©JDKä¸ºä½ åœ¨è¿­ä»£æ—¶åšä¼˜åŒ–</li>
<li>ä½¿ç”¨ parallel() å¼€å¯å¹¶è¡Œæµæ—¶è¦æ³¨æ„æ­¤æ—¶å¹¶è¡Œæ˜¯ä¾èµ–JVMå†…å…¨å±€å…±ç”¨çš„Forkjoinçº¿ç¨‹æ± å®ç°çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ç†è®ºä¸Šä¼šå‘ç”Ÿï¼š
<ul>
<li>ä½¿ç”¨äº†å¹¶è¡Œæµçš„ä¸šåŠ¡ä»£ç Aè€—æ—¶å¾ˆä¹…ä¼šå¡ä½ä½¿ç”¨äº†å¹¶è¡Œæµä¸šåŠ¡ä»£ç Bï¼Œè¿™ç§é—®é¢˜å‘ç”Ÿäº†å°±æ¯”è¾ƒéš¾æ’æŸ¥äº†ï¼Œæ‰€ä»¥å¹¶è¡Œæµé€šå¸¸ä½¿ç”¨è¾ƒå°‘ï¼Œæœ‰å¼‚æ­¥åœºæ™¯å‡æŒ‰ä¸šåŠ¡ç‹¬ç«‹çº¿ç¨‹æ± ç»Ÿä¸€ç®¡ç†ä¼šæ›´å¥½</li>
</ul>
</li>
</ul>
<blockquote>
<p><a href="https://github.com/burukeYou/JDFrame">JDFrame</a><code>å°è£…å‡ºç±»ä¼¼Spark Frame çš„API</code></p>
</blockquote>
<hr>
<h2 id="streamä¸é›†åˆ">Streamä¸é›†åˆ</h2>
<p>ç²—ç•¥åœ°è¯´ï¼Œé›†åˆä¸æµä¹‹é—´çš„å·®å¼‚å°±åœ¨äºä»€ä¹ˆæ—¶å€™è¿›è¡Œè®¡ç®—ã€‚é›†åˆæ˜¯ä¸€ä¸ªå†…å­˜ä¸­çš„æ•°æ®ç»“æ„ï¼Œå®ƒåŒ…å«æ•°æ®ç»“æ„ä¸­ç›®å‰æ‰€æœ‰çš„å€¼â€”â€”é›†åˆä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½å¾—å…ˆç®—å‡ºæ¥æ‰èƒ½æ·»åŠ åˆ°é›†åˆä¸­ã€‚<br>
ï¼ˆä½ å¯ä»¥å¾€é›†åˆé‡ŒåŠ ä¸œè¥¿æˆ–è€…åˆ ä¸œè¥¿ï¼Œä½†æ˜¯ä¸ç®¡ä»€ä¹ˆæ—¶å€™ï¼Œé›†åˆä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯æ”¾åœ¨å†…å­˜é‡Œçš„ï¼Œå…ƒç´ éƒ½å¾—å…ˆç®—å‡ºæ¥æ‰èƒ½æˆä¸ºé›†åˆçš„ä¸€éƒ¨åˆ†ï¼‰<br>
ç›¸æ¯”ä¹‹ä¸‹ï¼Œæµåˆ™æ˜¯åœ¨æ¦‚å¿µä¸Šå›ºå®šçš„æ•°æ®ç»“æ„ï¼ˆä½ ä¸èƒ½æ·»åŠ æˆ–åˆ é™¤å…ƒç´ ï¼‰ï¼Œå…¶å…ƒç´ åˆ™æ˜¯æŒ‰éœ€è®¡ç®—çš„ã€‚</p>
<p>ä¾‹å¦‚æ„å»ºä¸€ä¸ªè´¨æ•°æµ, å¯¹æ‰€æœ‰çš„è´¨æ•°å¤„ç†, å¦‚æœä½¿ç”¨é›†åˆå°±è¦æŠŠæ‰€æœ‰çš„è´¨æ•°æ„å»ºå‡ºæ¥, ç„¶ååšä¸‹ä¸€æ­¥æ“ä½œ, ä½†æ˜¯æµåªä¼šæŒ‰éœ€ç”Ÿæˆã€‚<br>
è¿™æ˜¯ä¸€ç§ç”Ÿäº§è€…ï¼æ¶ˆè´¹è€…çš„å…³ç³». ä»å¦ä¸€ä¸ªè§’åº¦æ¥è¯´ï¼Œæµå°±åƒæ˜¯ä¸€ä¸ªå»¶è¿Ÿåˆ›å»ºçš„é›†åˆï¼šåªæœ‰åœ¨æ¶ˆè´¹è€…è¦æ±‚çš„æ—¶å€™æ‰ä¼šè®¡ç®—å€¼</p>
<h3 id="åªèƒ½éå†ä¸€æ¬¡">åªèƒ½éå†ä¸€æ¬¡</h3>
<blockquote>
<p>å’Œè¿­ä»£å™¨ç±»ä¼¼ï¼Œæµåªèƒ½éå†ä¸€æ¬¡, éå†å®Œä¹‹åï¼Œæˆ‘ä»¬å°±è¯´è¿™ä¸ªæµå·²ç»è¢«æ¶ˆè´¹æ‰äº†<br>
ä»å“²å­¦çš„è§’åº¦çœ‹, é›†åˆæ˜¯ç©ºé—´ä¸­åˆ†å¸ƒçš„ä¸€ç»„å€¼, è€Œæµæ˜¯æ—¶é—´ä¸­åˆ†å¸ƒçš„ä¸€ç»„å€¼</p>
</blockquote>
<h3 id="å¤–éƒ¨è¿­ä»£å’Œå†…éƒ¨è¿­ä»£">å¤–éƒ¨è¿­ä»£å’Œå†…éƒ¨è¿­ä»£</h3>
<ul>
<li>
<p>ä½¿ç”¨Collectionæ¥å£éœ€è¦ç”¨æˆ·å»åšè¿­ä»£ï¼ˆæ¯”å¦‚ç”¨for-eachï¼‰ï¼Œè¿™ç§°ä¸ºå¤–éƒ¨è¿­ä»£ã€‚</p>
</li>
<li>
<p>ç›¸åï¼ŒStreamsåº“ä½¿ç”¨å†…éƒ¨è¿­ä»£â€”â€”å®ƒå¸®ä½ æŠŠè¿­ä»£åšäº†ï¼Œè¿˜æŠŠå¾—åˆ°çš„æµå€¼å­˜åœ¨äº†æŸä¸ªåœ°æ–¹ï¼Œä½ åªè¦ç»™å‡ºä¸€ä¸ªå‡½æ•°å£°æ˜è¿­ä»£ä¸­æ‰§è¡Œçš„æ“ä½œå³å¯ã€‚</p>
</li>
<li>
<p>å¤–éƒ¨è¿­ä»£</p>
<ul>
<li>æ˜¾å¼çš„è¿­ä»£é›†åˆ, å‘½ä»¤å¼çš„æ‰§è¡Œæ“ä½œ</li>
</ul>
</li>
<li>
<p>å†…éƒ¨è¿­ä»£</p>
<ul>
<li>å°†è¿­ä»£çš„ç»†èŠ‚éšè—èµ·æ¥, æ–¹ä¾¿ä¼˜åŒ–</li>
</ul>
</li>
</ul>
<hr>
<h2 id="æ„å»ºæµ">æ„å»ºæµ</h2>
<blockquote>
<p>ä»å€¼åºåˆ—ã€æ•°ç»„ã€æ–‡ä»¶æ¥åˆ›å»ºæµï¼Œç”šè‡³ç”±å‡½æ•°åˆ›å»ºæ— é™æµ</p>
</blockquote>
<h3 id="æœ‰é™æµ">æœ‰é™æµ</h3>
<blockquote>
<p>ç”±å€¼åˆ›å»ºæµ</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">Stream</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">stream</span> <span class="o">=</span> <span class="n">Stream</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">&#34;Java 8 &#34;</span><span class="o">,</span> <span class="s">&#34;Lambdas &#34;</span><span class="o">,</span> <span class="s">&#34;In &#34;</span><span class="o">,</span> <span class="s">&#34;Action&#34;</span><span class="o">);</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>ç”±æ•°ç»„åˆ›å»ºæµ</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">    <span class="kt">int</span><span class="o">[]</span> <span class="n">numbers</span> <span class="o">=</span> <span class="o">{</span><span class="n">2</span><span class="o">,</span> <span class="n">3</span><span class="o">,</span> <span class="n">5</span><span class="o">,</span> <span class="n">7</span><span class="o">,</span> <span class="n">11</span><span class="o">,</span> <span class="n">13</span><span class="o">};</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">sum</span> <span class="o">=</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">numbers</span><span class="o">).</span><span class="na">sum</span><span class="o">();</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>ç”±æ–‡ä»¶ç”Ÿæˆæµ</p>
</blockquote>
<p>Javaä¸­ç”¨äºå¤„ç†æ–‡ä»¶ç­‰I/Oæ“ä½œçš„NIO  APIï¼ˆéé˜»å¡I/Oï¼‰å·²æ›´æ–°ï¼Œä»¥ä¾¿åˆ©ç”¨Stream  APIã€‚java.nio.file.Filesä¸­çš„å¾ˆå¤šé™æ€æ–¹æ³•éƒ½ä¼šè¿”å›ä¸€ä¸ªæµã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">    <span class="kt">long</span> <span class="n">uniqueWords</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span> 
</span></span><span class="line"><span class="cl">    <span class="k">try</span><span class="o">(</span><span class="n">Stream</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">lines</span> <span class="o">=</span> <span class="n">Files</span><span class="o">.</span><span class="na">lines</span><span class="o">(</span><span class="n">Paths</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&#34;data.txt&#34;</span><span class="o">),</span> <span class="n">Charset</span><span class="o">.</span><span class="na">defaultCharset</span><span class="o">())){</span> 
</span></span><span class="line"><span class="cl">        <span class="n">uniqueWords</span> <span class="o">=</span> <span class="n">lines</span><span class="o">.</span><span class="na">flatMap</span><span class="o">(</span><span class="n">line</span> <span class="o">-&gt;</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">line</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">&#34; &#34;</span><span class="o">))).</span><span class="na">distinct</span><span class="o">()</span> <span class="o">.</span><span class="na">count</span><span class="o">();</span> 
</span></span><span class="line"><span class="cl">    <span class="o">}</span><span class="k">catch</span><span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">){}</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="æ— é™æµ">æ— é™æµ</h3>
<blockquote>
<p>Stream APIæä¾›äº†ä¸¤ä¸ªé™æ€æ–¹æ³•æ¥ <strong>ä»å‡½æ•°ç”Ÿæˆæµ</strong>ï¼š<code>Stream.iterate</code> å’Œ <code>Stream.generate</code>ã€‚è¿™ä¸¤ä¸ªæ“ä½œå¯ä»¥åˆ›å»ºæ‰€è°“çš„ <strong>æ— é™æµ</strong><br>
åŒæ ·ï¼Œä½ ä¸èƒ½å¯¹æ— é™æµåšæ’åºæˆ–å½’çº¦ï¼Œå› ä¸ºæ‰€æœ‰å…ƒç´ éƒ½éœ€è¦å¤„ç†ï¼Œè€Œè¿™æ°¸è¿œä¹Ÿå®Œä¸æˆï¼</p>
</blockquote>
<p><strong><code>è¿­ä»£</code></strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">    <span class="n">Stream</span><span class="o">.</span><span class="na">iterate</span><span class="o">(</span><span class="n">0</span><span class="o">,</span> <span class="n">n</span> <span class="o">-&gt;</span> <span class="n">n</span> <span class="o">+</span> <span class="n">2</span><span class="o">).</span><span class="na">limit</span><span class="o">(</span><span class="n">10</span><span class="o">).</span><span class="na">forEach</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// è·å–æ–æ³¢é‚£å¥‘åºåˆ— å…ƒç»„
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">Stream</span><span class="o">.</span><span class="na">iterate</span><span class="o">(</span><span class="k">new</span> <span class="kt">int</span><span class="o">[]{</span><span class="n">0</span><span class="o">,</span> <span class="n">1</span><span class="o">},</span> <span class="n">t</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[]{</span><span class="n">t</span><span class="o">[</span><span class="n">1</span><span class="o">],</span> <span class="n">t</span><span class="o">[</span><span class="n">0</span><span class="o">]+</span><span class="n">t</span><span class="o">[</span><span class="n">1</span><span class="o">]})</span> 
</span></span><span class="line"><span class="cl">      <span class="o">.</span><span class="na">limit</span><span class="o">(</span><span class="n">20</span><span class="o">)</span> 
</span></span><span class="line"><span class="cl">      <span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="n">t</span> <span class="o">-&gt;</span> <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;(&#34;</span> <span class="o">+</span> <span class="n">t</span><span class="o">[</span><span class="n">0</span><span class="o">]</span> <span class="o">+</span> <span class="s">&#34;,&#34;</span> <span class="o">+</span> <span class="n">t</span><span class="o">[</span><span class="n">1</span><span class="o">]</span> <span class="o">+</span><span class="s">&#34;)&#34;</span><span class="o">));</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong><code>ç”Ÿæˆ</code></strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">    <span class="n">Stream</span><span class="o">.</span><span class="na">generate</span><span class="o">(</span><span class="n">Math</span><span class="o">::</span><span class="n">random</span><span class="o">).</span><span class="na">limit</span><span class="o">(</span><span class="n">5</span><span class="o">).</span><span class="na">forEach</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// å¾ˆé‡è¦çš„ä¸€ç‚¹æ˜¯ï¼Œåœ¨å¹¶è¡Œä»£ç ä¸­ä½¿ç”¨æœ‰çŠ¶æ€çš„ä¾›åº”æºæ˜¯ä¸å®‰å…¨çš„ã€‚å› æ­¤ä¸‹é¢çš„ä»£ç ä»…ä»…æ˜¯ä¸ºäº†å†…å®¹å®Œæ•´ï¼Œåº”å°½é‡é¿å…ä½¿ç”¨ï¼
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">IntSupplier</span> <span class="n">fib</span> <span class="o">=</span> <span class="k">new</span> <span class="n">IntSupplier</span><span class="o">(){</span> 
</span></span><span class="line"><span class="cl">        <span class="kd">private</span> <span class="kt">int</span> <span class="n">previous</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span> 
</span></span><span class="line"><span class="cl">        <span class="kd">private</span> <span class="kt">int</span> <span class="n">current</span> <span class="o">=</span> <span class="n">1</span><span class="o">;</span> 
</span></span><span class="line"><span class="cl">        <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getAsInt</span><span class="o">(){</span> 
</span></span><span class="line"><span class="cl">            <span class="kt">int</span> <span class="n">oldPrevious</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">previous</span><span class="o">;</span> 
</span></span><span class="line"><span class="cl">            <span class="kt">int</span> <span class="n">nextValue</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">previous</span> <span class="o">+</span> <span class="k">this</span><span class="o">.</span><span class="na">current</span><span class="o">;</span> 
</span></span><span class="line"><span class="cl">            <span class="k">this</span><span class="o">.</span><span class="na">previous</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">current</span><span class="o">;</span> 
</span></span><span class="line"><span class="cl">            <span class="k">this</span><span class="o">.</span><span class="na">current</span> <span class="o">=</span> <span class="n">nextValue</span><span class="o">;</span> 
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">oldPrevious</span><span class="o">;</span> 
</span></span><span class="line"><span class="cl">        <span class="o">}</span> 
</span></span><span class="line"><span class="cl">    <span class="o">};</span> 
</span></span><span class="line"><span class="cl">    <span class="n">IntStream</span><span class="o">.</span><span class="na">generate</span><span class="o">(</span><span class="n">fib</span><span class="o">).</span><span class="na">limit</span><span class="o">(</span><span class="n">10</span><span class="o">).</span><span class="na">forEach</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>åˆ¤æ–­æ— é™æµï¼š <code>stream.spliterator().estimateSize()</code></p>
</blockquote>
<h2 id="æ•°å€¼æµ">æ•°å€¼æµ</h2>
<h3 id="åŸå§‹ç±»å‹ç‰¹åŒ–-1">åŸå§‹ç±»å‹ç‰¹åŒ–</h3>
<p>Java8 å¼•å…¥äº†ä¸‰ä¸ªåŸå§‹ç±»å‹ç‰¹åŒ–æµæ¥å£æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š <code>IntStreamã€DoubleStream å’Œ LongStream</code>ï¼Œåˆ†åˆ«å°†æµä¸­çš„å…ƒç´ ç‰¹åŒ–ä¸ºintã€longå’Œdoubleï¼Œä»è€Œé¿å…äº†æš—å«çš„è£…ç®±æˆæœ¬ã€‚</p>
<p><strong>æ˜ å°„åˆ°æ•°å€¼æµ</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">    <span class="c1">// ä¾‹å¦‚æ±‚å’Œ, é‡Œé¢æœ‰ä¸€ä¸ªéšå«çš„æ‹†ç®±æ“ä½œ å†æ±‚å’Œ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">numbers</span><span class="o">.</span><span class="na">parallelStream</span><span class="o">().</span><span class="na">reduce</span><span class="o">(</span><span class="n">0</span><span class="o">,</span> <span class="n">Integer</span><span class="o">::</span><span class="n">sum</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// è¯·æ³¨æ„ï¼Œå¦‚æœæµæ˜¯ç©ºçš„ï¼Œsumé»˜è®¤è¿”å› 0
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">numbers</span><span class="o">.</span><span class="na">parallelStream</span><span class="o">().</span><span class="na">mapToInt</span><span class="o">(</span><span class="n">Integer</span><span class="o">::</span><span class="n">intValue</span><span class="o">).</span><span class="na">sum</span><span class="o">()</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>æ˜ å°„åˆ°å¯¹è±¡æµ</strong>
ä½¿ç”¨ boxed() æ–¹æ³•å³å¯</p>
<p><strong>é»˜è®¤å€¼OptionalInt</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">    <span class="n">OptionalInt</span> <span class="n">maxCalories</span> <span class="o">=</span> <span class="n">menu</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">mapToInt</span><span class="o">(</span><span class="n">Dish</span><span class="o">::</span><span class="n">getCalories</span><span class="o">).</span><span class="na">max</span><span class="o">();</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="æ•°å€¼èŒƒå›´">æ•°å€¼èŒƒå›´</h3>
<p>IntStreamå’ŒLongStream çš„ range() æˆ–è€… rangeClose() æ–¹æ³•èƒ½äº§ç”Ÿä¸€ä¸ªæ•°å€¼æµ</p>
<blockquote>
<p>ä¾‹å¦‚ IntStream.rangeClose(1,100).filter(num-&gt;num%2==0).count() ç»Ÿè®¡100ä»¥å†…çš„å¶æ•°</p>
</blockquote>
<blockquote>
<p><strong>è·å–å‹¾è‚¡æ•°æµ</strong></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">    <span class="n">Stream</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">[]&gt;</span> <span class="n">pythagoreanTriples</span> <span class="o">=</span> <span class="n">IntStream</span><span class="o">.</span><span class="na">rangeClosed</span><span class="o">(</span><span class="n">1</span><span class="o">,</span> <span class="n">100</span><span class="o">).</span><span class="na">boxed</span><span class="o">()</span> <span class="o">.</span><span class="na">flatMap</span><span class="o">(</span><span class="n">a</span> <span class="o">-&gt;</span> 
</span></span><span class="line"><span class="cl">        <span class="n">IntStream</span><span class="o">.</span><span class="na">rangeClosed</span><span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">100</span><span class="o">)</span> 
</span></span><span class="line"><span class="cl">                <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">b</span> <span class="o">-&gt;</span> <span class="n">Math</span><span class="o">.</span><span class="na">sqrt</span><span class="o">(</span><span class="n">a</span><span class="o">*</span><span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="o">*</span><span class="n">b</span><span class="o">)</span> <span class="o">%</span> <span class="n">1</span> <span class="o">==</span> <span class="n">0</span><span class="o">)</span> 
</span></span><span class="line"><span class="cl">                <span class="o">.</span><span class="na">mapToObj</span><span class="o">(</span><span class="n">b</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[]{</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">,</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span><span class="n">Math</span><span class="o">.</span><span class="na">sqrt</span><span class="o">(</span><span class="n">a</span> <span class="o">*</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="o">*</span> <span class="n">b</span><span class="o">)})</span> 
</span></span><span class="line"><span class="cl">            <span class="o">);</span> 
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="n">pythagoreanTriples</span><span class="o">.</span><span class="na">limit</span><span class="o">(</span><span class="n">5</span><span class="o">)</span> <span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="n">t</span> <span class="o">-&gt;</span> <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">t</span><span class="o">[</span><span class="n">0</span><span class="o">]</span> <span class="o">+</span> <span class="s">&#34;, &#34;</span> <span class="o">+</span> <span class="n">t</span><span class="o">[</span><span class="n">1</span><span class="o">]</span> <span class="o">+</span> <span class="s">&#34;, &#34;</span> <span class="o">+</span> <span class="n">t</span><span class="o">[</span><span class="n">2</span><span class="o">]));</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<h2 id="streamæ“ä½œ">Streamæ“ä½œ</h2>
<p>å› ä¸ºfilterã€sortedã€map å’Œcollect ç­‰æ“ä½œæ˜¯ä¸å…·ä½“çº¿ç¨‹æ¨¡å‹æ— å…³çš„é«˜å±‚æ¬¡æ„ä»¶, æ‰€ä»¥å®ƒä»¬çš„å†…éƒ¨å®ç°å¯ä»¥æ˜¯å•çº¿ç¨‹çš„ï¼Œä¹Ÿå¯èƒ½é€æ˜åœ°å……åˆ†åˆ©ç”¨ä½ çš„å¤šæ ¸æ¶æ„</p>
<h3 id="ä¸­é—´æ“ä½œ">ä¸­é—´æ“ä½œ</h3>
<p>è¯¸å¦‚ filter æˆ– sorted  map flatMap limit distinct ç­‰ä¸­é—´æ“ä½œä¼šè¿”å›å¦ä¸€ä¸ªæµã€‚è¿™è®©å¤šä¸ªæ“ä½œå¯ä»¥è¿æ¥èµ·æ¥å½¢æˆä¸€ä¸ªæŸ¥è¯¢ã€‚
é‡è¦çš„æ˜¯ï¼Œé™¤éæµæ°´çº¿ä¸Šè§¦å‘ä¸€ä¸ªç»ˆç«¯æ“ä½œï¼Œå¦åˆ™ä¸­é—´æ“ä½œä¸ä¼šæ‰§è¡Œä»»ä½•å¤„ç†å› ä¸ºä¸­é—´æ“ä½œä¸€èˆ¬éƒ½å¯ä»¥åˆå¹¶èµ·æ¥ï¼Œåœ¨ç»ˆç«¯æ“ä½œæ—¶ä¸€æ¬¡æ€§å…¨éƒ¨å¤„ç† (å¾ªç¯åˆå¹¶)</p>
<ol>
<li>filter æ»¡è¶³è¯¥æ¡ä»¶çš„å…ƒç´ ä¿ç•™ä¸‹æ¥</li>
<li>map å°†ä¸€ä¸ªæµä¸­çš„æ¯ä¸ªå…ƒç´ é€šè¿‡ ä¸€ç§æ˜ å°„ å¾—åˆ°æ–°çš„å…ƒç´ ç»„æˆçš„æµ</li>
<li>flatMap ä½¿ç”¨æµæ—¶ï¼Œ flatMapæ–¹æ³•æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼æ˜¯å¦ä¸€ä¸ªæµã€‚è¿™ä¸ªæ–¹æ³•ä¼šåº”ç”¨åˆ°æµä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œæœ€ç»ˆå½¢æˆä¸€ä¸ªæ–°çš„æµçš„æµã€‚</li>
</ol>
<table>
<thead>
<tr>
<th style="text-align:left">æ“ä½œ</th>
<th style="text-align:left">ç±»å‹</th>
<th style="text-align:left">è¿”å›ç±»å‹</th>
<th style="text-align:left">å‚æ•°</th>
<th style="text-align:left">å‡½æ•°æè¿°ç¬¦</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">filter</td>
<td style="text-align:left">æ— çŠ¶æ€</td>
<td style="text-align:left"><code>Stream&lt;T&gt;</code></td>
<td style="text-align:left"><code>Predicate&lt;T&gt;</code></td>
<td style="text-align:left">T -&gt; boolean</td>
</tr>
<tr>
<td style="text-align:left">peek</td>
<td style="text-align:left">æ— çŠ¶æ€</td>
<td style="text-align:left"><code>Stream&lt;T&gt;</code></td>
<td style="text-align:left"><code>Consumer&lt;T&gt;</code></td>
<td style="text-align:left">T -&gt; void</td>
</tr>
<tr>
<td style="text-align:left">unordered</td>
<td style="text-align:left">æ— çŠ¶æ€</td>
<td style="text-align:left"><code>Stream&lt;T&gt;</code></td>
<td style="text-align:left"></td>
<td style="text-align:left">T -&gt; boolean</td>
</tr>
<tr>
<td style="text-align:left">map/mapToXxx</td>
<td style="text-align:left">æ— çŠ¶æ€</td>
<td style="text-align:left"><code>Stream&lt;R&gt;</code></td>
<td style="text-align:left"><code>Function&lt;T, R&gt;</code></td>
<td style="text-align:left">T -&gt; R</td>
</tr>
<tr>
<td style="text-align:left">flatMap/flatMapToXxx</td>
<td style="text-align:left">æ— çŠ¶æ€</td>
<td style="text-align:left"><code>Stream&lt;R&gt;</code></td>
<td style="text-align:left"><code>Function&lt;T, Stream&lt;R&gt;&gt;</code></td>
<td style="text-align:left">T -&gt; <code>Stream&lt;R&gt;</code></td>
</tr>
<tr>
<td style="text-align:left">sorted</td>
<td style="text-align:left">æœ‰çŠ¶æ€ æ— ç•Œ</td>
<td style="text-align:left"><code>Stream&lt;T&gt;</code></td>
<td style="text-align:left"><code>Comparator&lt;T&gt;</code></td>
<td style="text-align:left">(T,T) -&gt; int</td>
</tr>
<tr>
<td style="text-align:left">skip</td>
<td style="text-align:left">æœ‰çŠ¶æ€ æœ‰ç•Œ</td>
<td style="text-align:left"><code>Stream&lt;T&gt;</code></td>
<td style="text-align:left">long</td>
<td></td>
</tr>
<tr>
<td style="text-align:left">limit</td>
<td style="text-align:left">æœ‰çŠ¶æ€ æœ‰ç•Œ</td>
<td style="text-align:left"><code>Stream&lt;T&gt;</code></td>
<td style="text-align:left">long</td>
<td></td>
</tr>
<tr>
<td style="text-align:left">distinct</td>
<td style="text-align:left">æœ‰çŠ¶æ€ æ— ç•Œ</td>
<td style="text-align:left"><code>Stream&lt;T&gt;</code></td>
<td style="text-align:left"></td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="ç»ˆç«¯æ“ä½œ">ç»ˆç«¯æ“ä½œ</h3>
<blockquote>
<p>éçŸ­è·¯æ“ä½œ</p>
</blockquote>
<table>
<thead>
<tr>
<th style="text-align:left">æ“ä½œ</th>
<th style="text-align:left">ç±»å‹</th>
<th style="text-align:left">è¿”å›ç±»å‹</th>
<th style="text-align:left">å‚æ•°</th>
<th style="text-align:left">å‡½æ•°æè¿°ç¬¦</th>
<th style="text-align:left">ç›®çš„</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">forEach/forEachOrdered</td>
<td style="text-align:left">æ— çŠ¶æ€</td>
<td style="text-align:left">void</td>
<td style="text-align:left"><code>Consumer&lt;T&gt;</code></td>
<td style="text-align:left">T -&gt; void</td>
<td style="text-align:left">æ¶ˆè´¹æµä¸­çš„å…ƒç´ </td>
</tr>
<tr>
<td style="text-align:left">collect</td>
<td style="text-align:left">æ— çŠ¶æ€</td>
<td style="text-align:left">R</td>
<td style="text-align:left"><code>Collector&lt;T, A, R&gt;</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td style="text-align:left">reduce</td>
<td style="text-align:left">æœ‰çŠ¶æ€ æœ‰ç•Œ</td>
<td style="text-align:left"><code>Optional&lt;T&gt;</code></td>
<td style="text-align:left"><code>BinaryOprator&lt;T&gt;</code></td>
<td style="text-align:left">(T, T) -&gt; T</td>
<td style="text-align:left">æŠŠæµå½’çº¦æˆä¸€ä¸ªé›†åˆï¼Œæ¯”å¦‚Listã€Mapç”šè‡³æ˜¯Integer</td>
</tr>
<tr>
<td style="text-align:left">count</td>
<td style="text-align:left">æ— çŠ¶æ€</td>
<td style="text-align:left">long</td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
<td style="text-align:left">è¿”å›æµä¸­å…ƒç´ çš„ä¸ªæ•°</td>
</tr>
<tr>
<td style="text-align:left">toArray</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td style="text-align:left">min/max/count</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<blockquote>
<p>çŸ­è·¯æ“ä½œ</p>
</blockquote>
<table>
<thead>
<tr>
<th style="text-align:left">æ“ä½œ</th>
<th style="text-align:left">è¿”å›ç±»å‹</th>
<th style="text-align:left">å‚æ•°</th>
<th style="text-align:left">å‡½æ•°æè¿°ç¬¦</th>
<th style="text-align:left">ç›®çš„</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">allMatch/anyMatch/noneMatch</td>
<td style="text-align:left">boolean</td>
<td style="text-align:left"><code>Predicate&lt;T&gt;</code></td>
<td style="text-align:left">T -&gt; boolean</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">findFirst/findAny</td>
<td style="text-align:left"><code>Optional&lt;T&gt;</code></td>
<td style="text-align:left"></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<hr>
<h2 id="streamçš„ä½¿ç”¨">Streamçš„ä½¿ç”¨</h2>
<ul>
<li>æµçš„ä½¿ç”¨ä¸€èˆ¬åŒ…æ‹¬ä¸‰ä»¶äº‹ï¼š
<ul>
<li>ä¸€ä¸ªæ•°æ®æºï¼ˆå¦‚é›†åˆï¼‰æ¥æ‰§è¡Œä¸€ä¸ªæŸ¥è¯¢ï¼›</li>
<li>ä¸€ä¸ªä¸­é—´æ“ä½œé“¾ï¼Œå½¢æˆä¸€æ¡æµçš„æµæ°´çº¿ï¼›</li>
<li>ä¸€ä¸ªç»ˆç«¯æ“ä½œï¼Œæ‰§è¡Œæµæ°´çº¿ï¼Œå¹¶èƒ½ç”Ÿæˆç»“æœã€‚</li>
</ul>
<blockquote>
<p>æµçš„æµæ°´çº¿èƒŒåçš„ç†å¿µç±»ä¼¼äºæ„å»ºå™¨æ¨¡å¼ åœ¨æ„å»ºå™¨æ¨¡å¼ä¸­æœ‰ä¸€ä¸ªè°ƒç”¨é“¾ç”¨æ¥è®¾ç½®ä¸€å¥—é…ç½®ï¼ˆå¯¹æµæ¥è¯´è¿™å°±æ˜¯ä¸€ä¸ªä¸­é—´æ“ä½œé“¾ï¼‰ï¼Œæ¥ç€æ˜¯è°ƒç”¨ buildæ–¹æ³• ï¼ˆå¯¹æµæ¥è¯´å°±æ˜¯ç»ˆç«¯æ“ä½œï¼‰</p>
</blockquote>
</li>
</ul>
<h3 id="ç­›é€‰">ç­›é€‰</h3>
<ol>
<li>åˆ©ç”¨ filter ä½¿ç”¨è°“è¯ Predicate ç­›é€‰</li>
<li>å»é‡ distinct()</li>
<li>æˆªæ–­ limit(n) åªèƒ½æŒ‰æµçš„é•¿åº¦å•å‘æˆªæ–­</li>
<li>è·³è¿‡å…ƒç´  skip(n)</li>
</ol>
<h3 id="æ˜ å°„">æ˜ å°„</h3>
<ul>
<li>æµæ”¯æŒmapæ–¹æ³•ï¼Œå®ƒä¼šæ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ã€‚è¿™ä¸ªå‡½æ•°ä¼šè¢«åº”ç”¨åˆ°æ¯ä¸ªå…ƒç´ ä¸Šï¼Œå¹¶å°†å…¶æ˜ å°„æˆä¸€ä¸ªæ–°çš„å…ƒç´ 
<ul>
<li>ï¼ˆä½¿ç”¨æ˜ å°„ä¸€è¯ï¼Œæ˜¯å› ä¸ºå®ƒå’Œè½¬æ¢ç±»ä¼¼ï¼Œä½†å…¶ä¸­çš„ç»†å¾®å·®åˆ«åœ¨äºå®ƒæ˜¯â€œåˆ›å»ºä¸€ä¸ªæ–°ç‰ˆæœ¬â€è€Œä¸æ˜¯å»â€œä¿®æ”¹â€ï¼‰</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">List</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">dishNameLengths</span> <span class="o">=</span> <span class="n">menu</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span> 
</span></span><span class="line"><span class="cl">        <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">Dish</span><span class="o">::</span><span class="n">getName</span><span class="o">)</span> <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">String</span><span class="o">::</span><span class="n">length</span><span class="o">)</span> <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="n">toList</span><span class="o">());</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong><code>flatMap</code></strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">uniqueCharacters</span> <span class="o">=</span> <span class="n">words</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span> 
</span></span><span class="line"><span class="cl">        <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">w</span> <span class="o">-&gt;</span> <span class="n">w</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">&#34;&#34;</span><span class="o">))</span>  <span class="c1">// Stream&lt;Arrays&gt;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="o">.</span><span class="na">flatMap</span><span class="o">(</span><span class="n">Arrays</span><span class="o">::</span><span class="n">stream</span><span class="o">)</span> <span class="c1">// æ‰å¹³åŒ–æµ (åˆå¹¶)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="o">.</span><span class="na">distinct</span><span class="o">()</span> 
</span></span><span class="line"><span class="cl">        <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="n">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">());</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ä½¿ç”¨æµçš„æ–¹å¼åµŒå¥—è¿­ä»£</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">// ç»™å®šä¸¤ä¸ªæ•°å­—åˆ—è¡¨ï¼Œå¦‚ä½•è¿”å›æ‰€æœ‰çš„æ•°å¯¹å‘¢ï¼Ÿä¾‹å¦‚ï¼Œç»™å®šåˆ—è¡¨[1, 2, 3]å’Œåˆ—è¡¨[3, 4]ï¼Œåº”è¯¥è¿”å›[(1, 3), (1, 4), (2, 3), (2, 4), (3, 3), (3, 4)]
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">List</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">numbers1</span> <span class="o">=</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">1</span><span class="o">,</span> <span class="n">2</span><span class="o">,</span> <span class="n">3</span><span class="o">);</span> 
</span></span><span class="line"><span class="cl"><span class="n">List</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">numbers2</span> <span class="o">=</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">3</span><span class="o">,</span> <span class="n">4</span><span class="o">);</span> 
</span></span><span class="line"><span class="cl"><span class="n">List</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">[]&gt;</span> <span class="n">pairs</span> <span class="o">=</span> <span class="n">numbers1</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span> 
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="na">flatMap</span><span class="o">(</span><span class="n">i</span> <span class="o">-&gt;</span> 
</span></span><span class="line"><span class="cl">        <span class="n">numbers2</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span> <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">j</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[]{</span><span class="n">i</span><span class="o">,</span> <span class="n">j</span><span class="o">})</span>
</span></span><span class="line"><span class="cl">    <span class="o">).</span><span class="na">collect</span><span class="o">(</span><span class="n">toList</span><span class="o">());</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="æŸ¥æ‰¾å’ŒåŒ¹é…">æŸ¥æ‰¾å’ŒåŒ¹é…</h3>
<blockquote>
<p>allMatchã€anyMatchã€noneMatchã€findFirst findAny</p>
</blockquote>
<ul>
<li>éƒ½æ˜¯æ¥å—ä¸€ä¸ª è°“è¯ å‡½æ•°, éƒ½ç”¨åˆ°äº†æˆ‘ä»¬æ‰€è°“çš„çŸ­è·¯,ä¸éœ€è¦å¤„ç†æ‰€æœ‰çš„æµï¼Œè¿™å°±æ˜¯å¤§å®¶ç†Ÿæ‚‰çš„Javaä¸­&amp;&amp;å’Œ||è¿ç®—ç¬¦çŸ­è·¯åœ¨æµä¸­çš„ç‰ˆæœ¬
<ul>
<li>allMatchã€anyMatchã€noneMatch æ˜¯ åŒ¹é… è¿”å›å€¼æ˜¯boolean</li>
<li>findFirst findAny æ˜¯æŸ¥æ‰¾ è¿”å› <code>Optional&lt;T&gt;</code> findFirst é’ˆå¯¹æœ‰åºçš„æµ
<ul>
<li>å¦‚æœä½ ä¸å…³å¿ƒè¿”å›çš„å…ƒç´ æ˜¯å“ªä¸ªï¼Œè¯·ä½¿ç”¨ findAny ï¼Œå› ä¸ºå®ƒåœ¨ä½¿ç”¨å¹¶è¡Œæµæ—¶é™åˆ¶è¾ƒå°‘ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="å½’çº¦">å½’çº¦</h3>
<ul>
<li>å¦‚ä½•æŠŠä¸€ä¸ªæµä¸­çš„å…ƒç´ ç»„åˆèµ·æ¥ï¼Œä½¿ç”¨ reduce æ“ä½œæ¥è¡¨è¾¾æ›´å¤æ‚çš„æŸ¥è¯¢ æ­¤ç±»æŸ¥è¯¢éœ€è¦å°†æµä¸­æ‰€æœ‰å…ƒç´ åå¤ç»“åˆèµ·æ¥ï¼Œå¾—åˆ°ä¸€ä¸ªå€¼</li>
<li>è¿™æ ·çš„æŸ¥è¯¢å¯ä»¥è¢«å½’ç±»ä¸ºå½’çº¦æ“ä½œï¼ˆå°†æµå½’çº¦æˆä¸€ä¸ªå€¼ï¼‰ã€‚ç”¨å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€çš„æœ¯è¯­æ¥è¯´ï¼Œè¿™ç§°ä¸ºæŠ˜å ï¼ˆfoldï¼‰</li>
</ul>
<blockquote>
<p>map å’Œ reduce çš„è¿æ¥é€šå¸¸ç§°ä¸º map-reduce æ¨¡å¼ï¼Œå›  Google ç”¨å®ƒæ¥è¿›è¡Œç½‘ç»œæœç´¢è€Œå‡ºåï¼Œå› ä¸ºå®ƒå¾ˆå®¹æ˜“å¹¶è¡ŒåŒ–ã€‚</p>
</blockquote>
<h4 id="æ±‚å’Œ">æ±‚å’Œ</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">sum</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span> 
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">x</span> <span class="o">:</span> <span class="n">numbers</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">        <span class="n">sum</span> <span class="o">+=</span> <span class="n">x</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// reduce å‚æ•°: åˆå§‹å€¼ å‡½æ•°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kt">int</span> <span class="n">sum</span> <span class="o">=</span> <span class="n">numbers</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">reduce</span><span class="o">(</span><span class="n">0</span><span class="o">,</span> <span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">sum</span> <span class="o">=</span> <span class="n">numbers</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">reduce</span><span class="o">(</span><span class="n">0</span><span class="o">,</span> <span class="n">Integer</span><span class="o">::</span><span class="n">sum</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// æ— åˆå§‹å€¼ è¿”å› Optional å¯¹è±¡
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">Optional</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">sum</span> <span class="o">=</span> <span class="n">numbers</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">reduce</span><span class="o">((</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="o">));</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="æå€¼">æå€¼</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">    <span class="c1">// æœ€å¤§å€¼
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">Optional</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">max</span> <span class="o">=</span> <span class="n">numbers</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">reduce</span><span class="o">(</span><span class="n">Integer</span><span class="o">::</span><span class="n">max</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// æœ€å°å€¼
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">Optional</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">min</span> <span class="o">=</span> <span class="n">numbers</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">reduce</span><span class="o">(</span><span class="n">Integer</span><span class="o">::</span><span class="n">min</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">Optional</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">min</span> <span class="o">=</span> <span class="n">numbers</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">reduce</span><span class="o">((</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">y</span> <span class="o">?</span> <span class="n">x</span> <span class="o">:</span> <span class="n">y</span><span class="o">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p><code>return Stream.of(1ï¼Œ2ï¼Œ5ï¼Œ6).summaryStatistics();</code> åŒ…å«ï¼š æœ€å¤§å€¼ï¼Œæœ€å°å€¼ï¼Œå¹³å‡å€¼ï¼Œæ€»æ•°</p>
</blockquote>
<h4 id="å½’çº¦çš„ä¼˜åŠ¿ä¸å¹¶è¡ŒåŒ–">å½’çº¦çš„ä¼˜åŠ¿ä¸å¹¶è¡ŒåŒ–</h4>
<p>ç›¸æ¯”äºå‰é¢å†™çš„é€æ­¥è¿­ä»£æ±‚å’Œï¼Œä½¿ç”¨ reduce çš„å¥½å¤„åœ¨äºï¼Œè¿™é‡Œçš„è¿­ä»£è¢«å†…éƒ¨è¿­ä»£æŠ½è±¡æ‰äº†ï¼Œè¿™è®©å†…éƒ¨å®ç°å¾—ä»¥é€‰æ‹©å¹¶è¡Œæ‰§è¡Œreduce æ“ä½œã€‚<br>
è€Œè¿­ä»£å¼æ±‚å’Œä¾‹å­è¦æ›´æ–°å…±äº«å˜é‡ sum ï¼Œè¿™ä¸æ˜¯é‚£ä¹ˆå®¹æ˜“å¹¶è¡ŒåŒ–çš„ã€‚å¦‚æœä½ åŠ å…¥äº†åŒæ­¥ï¼Œå¾ˆå¯èƒ½ä¼šå‘ç°çº¿ç¨‹ç«äº‰æŠµæ¶ˆäº†å¹¶è¡Œæœ¬åº”å¸¦æ¥çš„æ€§èƒ½æå‡ï¼<br>
è¿™ç§è®¡ç®—çš„å¹¶è¡ŒåŒ–éœ€è¦å¦ä¸€ç§åŠæ³•ï¼šå°†è¾“å…¥åˆ†å—ï¼Œåˆ†å—æ±‚å’Œï¼Œæœ€åå†åˆå¹¶èµ·æ¥ã€‚</p>
<p><code>int sum = numbers.parallelStream().reduce(0, Integer::sum); </code></p>
<p>ä½†è¦å¹¶è¡Œæ‰§è¡Œè¿™æ®µä»£ç ä¹Ÿè¦ä»˜ä¸€å®šä»£ä»·ï¼Œä¼ é€’ç»™ reduce çš„Lambdaä¸èƒ½æ›´æ”¹çŠ¶æ€ï¼ˆå¦‚å®ä¾‹å˜é‡ï¼‰ï¼Œè€Œä¸”æ“ä½œå¿…é¡»æ»¡è¶³ç»“åˆå¾‹æ‰å¯ä»¥æŒ‰ä»»æ„é¡ºåºæ‰§è¡Œã€‚</p>
<hr>
<h2 id="æ”¶é›†å™¨çš„ä½¿ç”¨">æ”¶é›†å™¨çš„ä½¿ç”¨</h2>
<blockquote>
<p>å‡½æ•°å¼ç¼–ç¨‹ç›¸å¯¹äºæŒ‡ä»¤å¼ç¼–ç¨‹çš„ä¸€ä¸ªä¸»è¦ä¼˜åŠ¿ï¼šä½ åªéœ€æŒ‡å‡ºå¸Œæœ›çš„ç»“æœâ€”â€”â€œåšä»€ä¹ˆâ€ï¼Œè€Œä¸ç”¨æ“å¿ƒæ‰§è¡Œçš„æ­¥éª¤â€”â€”â€œå¦‚ä½•åšâ€</p>
</blockquote>
<h3 id="é¢„å®šä¹‰æ”¶é›†å™¨">é¢„å®šä¹‰æ”¶é›†å™¨</h3>
<p>Collectorsæ‰€æä¾›çš„å·¥å‚æ–¹æ³• å®ƒä»¬ä¸»è¦æä¾›äº†ä¸‰å¤§åŠŸèƒ½ï¼šå°†æµå…ƒç´ å½’çº¦å’Œæ±‡æ€»ä¸ºä¸€ä¸ªå€¼ å…ƒç´ åˆ†ç»„ å…ƒç´ åˆ†åŒº</p>
<ul>
<li>toList toMap toSet ç­‰æ–¹æ³•</li>
</ul>
<blockquote>
<p>æ³¨æ„ï¼š toMap æ–¹æ³•çš„ä½¿ç”¨ï¼Œ å½“ key é‡å¤æ—¶ä¼šæŠ›å‡ºå¼‚å¸¸
<code>toMap(k-&gt;k, v-&gt;v, (a,b)-&gt;b);</code> ä½¿ç”¨è¯¥æ–¹å¼èƒ½é¿å…ï¼Œ è®¾ç½®äº†é‡åˆ°é‡å¤çš„ç­–ç•¥ï¼Œ åè€…è¦†ç›–å‰è€…</p>
</blockquote>
<h4 id="æ±‡æ€»-collector">æ±‡æ€» collector</h4>
<blockquote>
<p>Collectorsç±»ä¸“é—¨ä¸ºæ±‡æ€»æä¾›äº†ä¸€ä¸ªå·¥å‚æ–¹æ³•ï¼šCollectors.summingInt å®ƒå¯æ¥å—ä¸€ä¸ªæŠŠå¯¹è±¡æ˜ å°„ä¸ºæ±‚å’Œæ‰€éœ€intçš„å‡½æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ”¶é›†å™¨ï¼›è¯¥æ”¶é›†å™¨åœ¨ä¼ é€’ç»™æ™®é€šçš„collectæ–¹æ³•åå³æ‰§è¡Œæˆ‘ä»¬éœ€è¦çš„æ±‡æ€»æ“ä½œ<br>
æ±‚å¹³å‡æ•° Collectors.averagingInt</p>
</blockquote>
<blockquote>
<p><code>summarizing</code> æ“ä½œä½ å¯ä»¥å¾—å‡ºå…ƒç´ çš„ä¸ªæ•°ï¼Œå¹¶å¾—åˆ°æ€»å’Œã€å¹³å‡å€¼ã€æœ€å¤§å€¼å’Œæœ€å°å€¼</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">    <span class="n">IntSummaryStatistics</span> <span class="n">menuStatistics</span> <span class="o">=</span> <span class="n">menu</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">collect</span><span class="o">(</span><span class="n">summarizingInt</span><span class="o">(</span><span class="n">Dish</span><span class="o">::</span><span class="n">getCalories</span><span class="o">));</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// toString(): IntSummaryStatistics{count=9, sum=4300, min=120, average=477.777778, max=800} 
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><strong><code>è¿æ¥å­—ç¬¦ä¸²</code></strong>
joiningå·¥å‚æ–¹æ³•è¿”å›çš„æ”¶é›†å™¨ä¼šæŠŠå¯¹æµä¸­æ¯ä¸€ä¸ªå¯¹è±¡åº”ç”¨toStringæ–¹æ³•å¾—åˆ°çš„æ‰€æœ‰å­—ç¬¦ä¸²è¿æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²ã€‚
<code>String shortMenu = menu.stream().collect(joining()); </code></p>
<p>Stream.collect å®ç°</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">final</span> <span class="o">&lt;</span><span class="n">R</span><span class="o">,</span> <span class="n">A</span><span class="o">&gt;</span> <span class="n">R</span> <span class="nf">collect</span><span class="o">(</span><span class="n">Collector</span><span class="o">&lt;?</span> <span class="kd">super</span> <span class="n">P_OUT</span><span class="o">,</span> <span class="n">A</span><span class="o">,</span> <span class="n">R</span><span class="o">&gt;</span> <span class="n">collector</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">A</span> <span class="n">container</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">(</span><span class="n">isParallel</span><span class="o">()</span>
</span></span><span class="line"><span class="cl">                <span class="o">&amp;&amp;</span> <span class="o">(</span><span class="n">collector</span><span class="o">.</span><span class="na">characteristics</span><span class="o">().</span><span class="na">contains</span><span class="o">(</span><span class="n">Collector</span><span class="o">.</span><span class="na">Characteristics</span><span class="o">.</span><span class="na">CONCURRENT</span><span class="o">))</span>
</span></span><span class="line"><span class="cl">                <span class="o">&amp;&amp;</span> <span class="o">(!</span><span class="n">isOrdered</span><span class="o">()</span> <span class="o">||</span> <span class="n">collector</span><span class="o">.</span><span class="na">characteristics</span><span class="o">().</span><span class="na">contains</span><span class="o">(</span><span class="n">Collector</span><span class="o">.</span><span class="na">Characteristics</span><span class="o">.</span><span class="na">UNORDERED</span><span class="o">)))</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">container</span> <span class="o">=</span> <span class="n">collector</span><span class="o">.</span><span class="na">supplier</span><span class="o">().</span><span class="na">get</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">            <span class="n">BiConsumer</span><span class="o">&lt;</span><span class="n">A</span><span class="o">,</span> <span class="o">?</span> <span class="kd">super</span> <span class="n">P_OUT</span><span class="o">&gt;</span> <span class="n">accumulator</span> <span class="o">=</span> <span class="n">collector</span><span class="o">.</span><span class="na">accumulator</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">            <span class="n">forEach</span><span class="o">(</span><span class="n">u</span> <span class="o">-&gt;</span> <span class="n">accumulator</span><span class="o">.</span><span class="na">accept</span><span class="o">(</span><span class="n">container</span><span class="o">,</span> <span class="n">u</span><span class="o">));</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">container</span> <span class="o">=</span> <span class="n">evaluate</span><span class="o">(</span><span class="n">ReduceOps</span><span class="o">.</span><span class="na">makeRef</span><span class="o">(</span><span class="n">collector</span><span class="o">));</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">collector</span><span class="o">.</span><span class="na">characteristics</span><span class="o">().</span><span class="na">contains</span><span class="o">(</span><span class="n">Collector</span><span class="o">.</span><span class="na">Characteristics</span><span class="o">.</span><span class="na">IDENTITY_FINISH</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">               <span class="o">?</span> <span class="o">(</span><span class="n">R</span><span class="o">)</span> <span class="n">container</span>
</span></span><span class="line"><span class="cl">               <span class="o">:</span> <span class="n">collector</span><span class="o">.</span><span class="na">finisher</span><span class="o">().</span><span class="na">apply</span><span class="o">(</span><span class="n">container</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="è§„çº¦-reduce">è§„çº¦ reduce</h4>
<p>äº‹å®ä¸Šï¼Œæˆ‘ä»¬å·²ç»è®¨è®ºçš„æ‰€æœ‰æ”¶é›†å™¨ï¼Œéƒ½æ˜¯ä¸€ä¸ªå¯ä»¥ç”¨reducingå·¥å‚æ–¹æ³•å®šä¹‰çš„å½’çº¦è¿‡ç¨‹çš„ç‰¹æ®Šæƒ…å†µè€Œå·²ã€‚Collectors.reducingå·¥å‚æ–¹æ³•æ˜¯æ‰€æœ‰è¿™äº›ç‰¹æ®Šæƒ…å†µçš„ä¸€èˆ¬åŒ–ã€‚</p>
<ul>
<li>ä¾‹å¦‚ è®¡ç®—æ€»çƒ­é‡ <code>int totalCalories = menu.stream().collect(reducing(0, Dish::getCalories, (i, j) -&gt; i + j));</code>
<ul>
<li>ç¬¬ä¸€ä¸ªå‚æ•°: è§„çº¦æ“ä½œçš„èµ·å§‹å€¼ ä¹Ÿæ˜¯å½“æµä¸ºç©ºæ—¶çš„è¿”å›å€¼</li>
<li>ç¬¬äºŒä¸ªå‚æ•°: è½¬æ¢å‡½æ•°</li>
<li>ç¬¬ä¸‰ä¸ªå‚æ•°: BinaryOperator  å°†ä¸¤ä¸ªé¡¹ç›®ç´¯ç§¯æˆä¸€ä¸ªåŒç±»å‹çš„å€¼</li>
</ul>
</li>
</ul>
<p>ä½ å¯ä»¥æŠŠå•å‚æ•°reducingå·¥å‚æ–¹æ³•åˆ›å»ºçš„æ”¶é›†å™¨çœ‹ä½œä¸‰å‚æ•°æ–¹æ³•çš„ç‰¹æ®Šæƒ…å†µï¼Œå®ƒæŠŠæµä¸­çš„ç¬¬ä¸€ä¸ªé¡¹ç›®ä½œä¸ºèµ·ç‚¹ï¼ŒæŠŠæ’ç­‰å‡½æ•°ï¼ˆå³ä¸€ä¸ªå‡½æ•°ä»…ä»…æ˜¯è¿”å›å…¶è¾“å…¥å‚æ•°ï¼‰ä½œä¸ºä¸€ä¸ªè½¬æ¢å‡½æ•°ã€‚
è¿™ä¹Ÿæ„å‘³ç€ï¼Œè¦æ˜¯æŠŠå•å‚æ•°reducingæ”¶é›†å™¨ä¼ é€’ç»™ç©ºæµçš„collectæ–¹æ³•ï¼Œæ”¶é›†å™¨å°±æ²¡æœ‰èµ·ç‚¹;å®ƒå°†å› æ­¤è€Œè¿”å›ä¸€ä¸ªOptional<Dish>å¯¹è±¡ã€‚</p>
<blockquote>
<ol>
<li>æ”¶é›†æ¡†æ¶çš„çµæ´»æ€§ï¼šä»¥ä¸åŒçš„æ–¹æ³•æ‰§è¡ŒåŒæ ·çš„æ“ä½œ</li>
</ol>
</blockquote>
<ol>
<li>ä½¿ç”¨Integerçš„sumæ–¹æ³•ç®€åŒ–ä»¥ä¸Šçš„æ±‚å’Œ <code>int totalCalories = menu.stream().collect(reducing(0, Dish::getCalories,Integer::sum));</code></li>
<li>å°†å¯¹è±¡æ˜ å°„ä¸º int ç„¶åè§„çº¦æ±‚å’Œ <code>int totalCalories = menu.stream().map(Dish::getCalories).reduce(Integer::sum).get(); </code></li>
<li>æˆ–è€…è½¬ä¸º IntStream <code>int totalCalories = menu.stream().mapToInt(Dish::getCalories).sum(); </code></li>
</ol>
<blockquote>
<ol start="2">
<li>æ ¹æ®æƒ…å†µé€‰æ‹©æœ€ä½³è§£å†³æ–¹æ¡ˆ</li>
</ol>
</blockquote>
<p>å‡½æ•°å¼ç¼–ç¨‹ï¼ˆç‰¹åˆ«æ˜¯Java 8çš„Collectionsæ¡†æ¶ä¸­åŠ å…¥çš„åŸºäºå‡½æ•°å¼é£æ ¼åŸç†è®¾è®¡çš„æ–°APIï¼‰é€šå¸¸æä¾›äº†å¤šç§æ–¹æ³•æ¥æ‰§è¡ŒåŒä¸€ä¸ªæ“ä½œã€‚
è¿™ä¸ªä¾‹å­è¿˜è¯´æ˜ï¼Œæ”¶é›†å™¨åœ¨æŸç§ç¨‹åº¦ä¸Šæ¯”Streamæ¥å£ä¸Šç›´æ¥æä¾›çš„æ–¹æ³•ç”¨èµ·æ¥æ›´å¤æ‚ï¼Œä½†å¥½å¤„åœ¨äºå®ƒä»¬èƒ½æä¾›æ›´é«˜æ°´å¹³çš„æŠ½è±¡å’Œæ¦‚æ‹¬ï¼Œä¹Ÿæ›´å®¹æ˜“é‡ç”¨å’Œè‡ªå®šä¹‰ã€‚</p>
<blockquote>
<p>joining æ›¿æ¢ å­—ç¬¦ä¸²ç›´æ¥æ‹¼æ¥</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">    <span class="c1">// è¯¥æ–¹æ¡ˆ æ•ˆç‡ä¸é«˜, æ‰€æœ‰å­—ç¬¦ä¸²è¢«åå¤è¿æ¥, æ¯æ¬¡è¿­ä»£éƒ½éœ€åˆ›å»ºæ–°Stringå¯¹è±¡
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">strings</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">sorted</span><span class="o">().</span><span class="na">reduce</span><span class="o">(</span><span class="s">&#34;&#34;</span><span class="o">,</span> <span class="o">(</span><span class="n">a</span><span class="o">,</span><span class="n">b</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// joining å†…éƒ¨ä¼šä½¿ç”¨ StringBuilder
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">strings</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">sorted</span><span class="o">().</span><span class="na">collect</span><span class="o">(</span><span class="n">Collectors</span><span class="o">.</span><span class="na">joining</span><span class="o">());</span>
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>åœºæ™¯: ä¸€ä¸ªå¯¹è±¡(å«æ—¶é—´å’Œæ•´æ•°ä¸¤ä¸ªå±æ€§)é›†åˆ, å®Œæˆçš„æ“ä½œæ˜¯è·å–åˆ°æœ€å¤§æ—¶é—´ä»¥åŠæ•°å€¼å¹³å‡å€¼&hellip;ç­‰ç­‰å¤šä¸ªå€¼</p>
</blockquote>
<ul>
<li><input disabled="" type="checkbox"> è®¾è®¡å’Œå®ç°</li>
</ul>
<h4 id="åˆ†ç»„">åˆ†ç»„</h4>
<p>ä¸€ä¸ªå¸¸è§çš„æ•°æ®åº“æ“ä½œæ˜¯æ ¹æ®ä¸€ä¸ªæˆ–å¤šä¸ªå±æ€§å¯¹é›†åˆä¸­çš„é¡¹ç›®è¿›è¡Œåˆ†ç»„ã€‚</p>
<ul>
<li>ä½¿ç”¨ groupingBy <code>Map&lt;Dish.Type, List&lt;Dish&gt;&gt; dishesByType = menu.stream().collect(groupingBy(Dish::getType));</code>
<ul>
<li>groupingBy æ–¹æ³•çš„å…¥å‚ä¸ºä¸€ä¸ª Function ä¸€èˆ¬ç§°ä¸ºåˆ†ç±»å‡½æ•°</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">    <span class="c1">// å®ç°å¤æ‚çš„åˆ†ç±»å‡½æ•°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="kd">enum</span> <span class="n">CaloricLevel</span> <span class="o">{</span> <span class="n">DIET</span><span class="o">,</span> <span class="n">NORMAL</span><span class="o">,</span> <span class="n">FAT</span> <span class="o">}</span> 
</span></span><span class="line"><span class="cl">    <span class="n">Map</span><span class="o">&lt;</span><span class="n">CaloricLevel</span><span class="o">,</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Dish</span><span class="o">&gt;&gt;</span> <span class="n">dishesByCaloricLevel</span> <span class="o">=</span> <span class="n">menu</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">collect</span><span class="o">(</span> 
</span></span><span class="line"><span class="cl">            <span class="n">groupingBy</span><span class="o">(</span><span class="n">dish</span> <span class="o">-&gt;</span> <span class="o">{</span> 
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="o">(</span><span class="n">dish</span><span class="o">.</span><span class="na">getCalories</span><span class="o">()</span> <span class="o">&lt;=</span> <span class="n">400</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">                    <span class="k">return</span> <span class="n">CaloricLevel</span><span class="o">.</span><span class="na">DIET</span><span class="o">;</span> 
</span></span><span class="line"><span class="cl">                <span class="o">}</span> 
</span></span><span class="line"><span class="cl">                <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">dish</span><span class="o">.</span><span class="na">getCalories</span><span class="o">()</span> <span class="o">&lt;=</span> <span class="n">700</span><span class="o">){</span> 
</span></span><span class="line"><span class="cl">                    <span class="k">return</span> <span class="n">CaloricLevel</span><span class="o">.</span><span class="na">NORMAL</span><span class="o">;</span> 
</span></span><span class="line"><span class="cl">                <span class="o">}</span><span class="k">else</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">                    <span class="k">return</span> <span class="n">CaloricLevel</span><span class="o">.</span><span class="na">FAT</span><span class="o">;</span> 
</span></span><span class="line"><span class="cl">                <span class="o">}</span>
</span></span><span class="line"><span class="cl">            <span class="o">}));</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="å¤šçº§åˆ†ç»„">å¤šçº§åˆ†ç»„</h5>
<blockquote>
<p>è¦å®ç°å¤šçº§åˆ†ç»„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªç”±åŒå‚æ•°ç‰ˆæœ¬çš„ Collectors.groupingBy å·¥å‚æ–¹æ³•åˆ›å»ºçš„æ”¶é›†å™¨ï¼Œå®ƒé™¤äº†æ™®é€šçš„åˆ†ç±»å‡½æ•°ä¹‹å¤–ï¼Œè¿˜å¯ä»¥æ¥å—collectorç±»å‹çš„ç¬¬äºŒä¸ªå‚æ•°ã€‚</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">    <span class="n">Map</span><span class="o">&lt;</span><span class="n">Dish</span><span class="o">.</span><span class="na">Type</span><span class="o">,</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">CaloricLevel</span><span class="o">,</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Dish</span><span class="o">&gt;&gt;&gt;</span> <span class="n">dishesByTypeCaloricLevel</span> <span class="o">=</span> 
</span></span><span class="line"><span class="cl">    <span class="n">menu</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">collect</span><span class="o">(</span> 
</span></span><span class="line"><span class="cl">        <span class="n">groupingBy</span><span class="o">(</span><span class="n">Dish</span><span class="o">::</span><span class="n">getType</span><span class="o">,</span>  
</span></span><span class="line"><span class="cl">            <span class="n">groupingBy</span><span class="o">(</span><span class="n">dish</span> <span class="o">-&gt;</span> <span class="o">{</span>  
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="o">(</span><span class="n">dish</span><span class="o">.</span><span class="na">getCalories</span><span class="o">()</span> <span class="o">&lt;=</span> <span class="n">400</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">                    <span class="k">return</span> <span class="n">CaloricLevel</span><span class="o">.</span><span class="na">DIET</span><span class="o">;</span> 
</span></span><span class="line"><span class="cl">                <span class="o">}</span><span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">dish</span><span class="o">.</span><span class="na">getCalories</span><span class="o">()</span> <span class="o">&lt;=</span> <span class="n">700</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                    <span class="k">return</span> <span class="n">CaloricLevel</span><span class="o">.</span><span class="na">NORMAL</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">                <span class="o">}</span><span class="k">else</span><span class="o">{</span> 
</span></span><span class="line"><span class="cl">                    <span class="k">return</span> <span class="n">CaloricLevel</span><span class="o">.</span><span class="na">FAT</span><span class="o">;</span> 
</span></span><span class="line"><span class="cl">                <span class="o">}</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span> <span class="o">)</span> 
</span></span><span class="line"><span class="cl">        <span class="o">)</span> 
</span></span><span class="line"><span class="cl">    <span class="o">);</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="æŒ‰å­ç»„æ”¶é›†æ•°æ®">æŒ‰å­ç»„æ”¶é›†æ•°æ®</h5>
<blockquote>
<p>å¯ä»¥æŠŠç¬¬äºŒä¸ªgroupingByæ”¶é›†å™¨ä¼ é€’ç»™å¤–å±‚æ”¶é›†å™¨æ¥å®ç°å¤šçº§åˆ†ç»„ã€‚ä½†è¿›ä¸€æ­¥è¯´ï¼Œä¼ é€’ç»™ç¬¬ä¸€ä¸ªgroupingByçš„ç¬¬äºŒä¸ªæ”¶é›†å™¨å¯ä»¥æ˜¯ä»»ä½•ç±»å‹</p>
<blockquote>
<p>ä¾‹å¦‚: <code>Map&lt;Dish.Type, Long&gt; typesCount = menu.stream().collect(groupingBy(Dish::getType, counting())); </code></p>
</blockquote>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">    <span class="n">Map</span><span class="o">&lt;</span><span class="n">Dish</span><span class="o">.</span><span class="na">Type</span><span class="o">,</span> <span class="n">Optional</span><span class="o">&lt;</span><span class="n">Dish</span><span class="o">&gt;&gt;</span> <span class="n">mostCaloricByType</span> <span class="o">=</span> <span class="n">menu</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
</span></span><span class="line"><span class="cl">            <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="n">groupingBy</span><span class="o">(</span>
</span></span><span class="line"><span class="cl">                <span class="n">Dish</span><span class="o">::</span><span class="n">getType</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">                <span class="n">maxBy</span><span class="o">(</span>
</span></span><span class="line"><span class="cl">                    <span class="n">comparingInt</span><span class="o">(</span><span class="n">Dish</span><span class="o">::</span><span class="n">getCalories</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">                <span class="o">)</span>
</span></span><span class="line"><span class="cl">            <span class="o">));</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>è¿™ä¸ªåˆ†ç»„çš„ç»“æœæ˜¾ç„¶æ˜¯ä¸€ä¸ªmapï¼Œä»¥Dishçš„ç±»å‹ä½œä¸ºé”®ï¼Œä»¥åŒ…è£…äº†è¯¥ç±»å‹ä¸­çƒ­é‡æœ€é«˜çš„Dishçš„<code>Optional&lt;Dish&gt;</code>ä½œä¸ºå€¼
<ul>
<li>ä½†æ˜¯è¿™é‡Œçš„ Optional å­˜åœ¨çš„æ„ä¹‰ä¸å¤§, å› ä¸ºå…ˆæœ‰çš„ç±»å‹ è¿›è¡Œåˆ†ç»„, æ‰ä¼šè¿›è¡Œ maxBy æ‰€ä»¥å€¼æ˜¯ä¸€å®šå­˜åœ¨çš„</li>
</ul>
</li>
</ul>
<blockquote>
<ol>
<li>æŠŠæ”¶é›†å™¨çš„ç»“æœè½¬æ¢ä¸ºå¦ä¸€ç§ç±»å‹</li>
</ol>
</blockquote>
<p>å› ä¸ºå‰è¿°ä¾‹å­ä¸­çš„Optionalå­˜åœ¨æ„ä¹‰ä¸æ˜¯å¾ˆå¤§, æ‰€ä»¥ æŠŠæ”¶é›†å™¨è¿”å›çš„ç»“æœè½¬æ¢ä¸ºå¦ä¸€ç§ç±»å‹ï¼Œä½ å¯ä»¥ä½¿ç”¨Collectors.collectingAndThenå·¥å‚æ–¹æ³•è¿”å›çš„æ”¶é›†å™¨</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">    <span class="n">Map</span><span class="o">&lt;</span><span class="n">Dish</span><span class="o">.</span><span class="na">Type</span><span class="o">,</span> <span class="n">Dish</span><span class="o">&gt;</span> <span class="n">mostCaloricByType</span> <span class="o">=</span> <span class="n">menu</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
</span></span><span class="line"><span class="cl">                <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="n">groupingBy</span><span class="o">(</span>
</span></span><span class="line"><span class="cl">                    <span class="n">Dish</span><span class="o">::</span><span class="n">getType</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">                    <span class="n">collectingAndThen</span><span class="o">(</span>
</span></span><span class="line"><span class="cl">                        <span class="n">maxBy</span><span class="o">(</span><span class="n">comparingInt</span><span class="o">(</span><span class="n">Dish</span><span class="o">::</span><span class="n">getCalories</span><span class="o">)),</span>
</span></span><span class="line"><span class="cl">                        <span class="n">Optional</span><span class="o">::</span><span class="n">get</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">                    <span class="o">));</span>  
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>è¿™ä¸ªå·¥å‚æ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°â€”â€”è¦è½¬æ¢çš„æ”¶é›†å™¨ä»¥åŠè½¬æ¢å‡½æ•°ï¼Œå¹¶è¿”å›å¦ä¸€ä¸ªæ”¶é›†å™¨ã€‚</li>
<li>è¿™ä¸ªæ”¶é›†å™¨ç›¸å½“äºæ—§æ”¶é›†å™¨çš„ä¸€ä¸ªåŒ…è£…ï¼Œcollectæ“ä½œçš„æœ€åä¸€æ­¥å°±æ˜¯å°†è¿”å›å€¼ç”¨è½¬æ¢å‡½æ•°åšä¸€ä¸ªæ˜ å°„ã€‚</li>
<li>åœ¨è¿™é‡Œï¼Œè¢«åŒ…èµ·æ¥çš„æ”¶é›†å™¨å°±æ˜¯ç”¨maxByå»ºç«‹çš„é‚£ä¸ªï¼Œè€Œè½¬æ¢å‡½æ•°Optional::getåˆ™æŠŠè¿”å›çš„Optionalä¸­çš„å€¼æå–å‡ºæ¥ã€‚</li>
<li>å‰é¢å·²ç»è¯´è¿‡ï¼Œè¿™ä¸ªæ“ä½œæ”¾åœ¨è¿™é‡Œæ˜¯å®‰å…¨çš„ï¼Œå› ä¸ºreducingæ”¶é›†å™¨æ°¸è¿œéƒ½ä¸ä¼šè¿”å›Optional.empty()ã€‚</li>
</ul>
<blockquote>
<ol start="2">
<li>ä¸ groupingBy è”åˆä½¿ç”¨çš„å…¶ä»–æ”¶é›†å™¨çš„ä¾‹å­</li>
</ol>
</blockquote>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œé€šè¿‡groupingByå·¥å‚æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°ä¼ é€’çš„æ”¶é›†å™¨å°†ä¼šå¯¹åˆ†åˆ°åŒä¸€ç»„ä¸­çš„æ‰€æœ‰æµå…ƒç´ æ‰§è¡Œè¿›ä¸€æ­¥å½’çº¦æ“ä½œã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">    <span class="c1">// å¯¹æ¯ä¸€ç»„Dishæ±‚å’Œ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">Map</span><span class="o">&lt;</span><span class="n">Dish</span><span class="o">.</span><span class="na">Type</span><span class="o">,</span> <span class="n">Integer</span><span class="o">&gt;</span> <span class="n">totalCaloriesByType</span> <span class="o">=</span> <span class="n">menu</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">collect</span><span class="o">(</span><span class="n">groupingBy</span><span class="o">(</span><span class="n">Dish</span><span class="o">::</span><span class="n">getType</span><span class="o">,</span> 
</span></span><span class="line"><span class="cl">                <span class="n">summingInt</span><span class="o">(</span><span class="n">Dish</span><span class="o">::</span><span class="n">getCalories</span><span class="o">)));</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç„¶è€Œå¸¸å¸¸å’ŒgroupingByè”åˆä½¿ç”¨çš„å¦ä¸€ä¸ªæ”¶é›†å™¨æ˜¯mappingæ–¹æ³•ç”Ÿæˆçš„ã€‚è¿™ä¸ªæ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°ï¼šä¸€ä¸ªå‡½æ•°å¯¹æµä¸­çš„å…ƒç´ åš<strong>å˜æ¢</strong>ï¼Œå¦ä¸€ä¸ªåˆ™å°†å˜æ¢çš„ç»“æœå¯¹è±¡<strong>æ”¶é›†</strong>èµ·æ¥ã€‚
å…¶ç›®çš„æ˜¯åœ¨ç´¯åŠ ä¹‹å‰å¯¹æ¯ä¸ªè¾“å…¥å…ƒç´ åº”ç”¨ä¸€ä¸ªæ˜ å°„å‡½æ•°ï¼Œè¿™æ ·å°±å¯ä»¥è®©æ¥å—ç‰¹å®šç±»å‹å…ƒç´ çš„æ”¶é›†å™¨é€‚åº”ä¸åŒç±»å‹çš„å¯¹è±¡ã€‚æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä½¿ç”¨è¿™ä¸ªæ”¶é›†å™¨çš„å®é™…ä¾‹å­ã€‚
æ¯”æ–¹è¯´ä½ æƒ³è¦çŸ¥é“ï¼Œå¯¹äºæ¯ç§ç±»å‹çš„Dishï¼Œèœå•ä¸­éƒ½æœ‰å“ªäº›CaloricLevelã€‚æˆ‘ä»¬å¯ä»¥æŠŠgroupingByå’Œmappingæ”¶é›†å™¨ç»“åˆèµ·æ¥ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">    <span class="n">Map</span><span class="o">&lt;</span><span class="n">Dish</span><span class="o">.</span><span class="na">Type</span><span class="o">,</span> <span class="n">Set</span><span class="o">&lt;</span><span class="n">CaloricLevel</span><span class="o">&gt;&gt;</span> <span class="n">caloricLevelsByType</span> <span class="o">=</span> <span class="n">menu</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">collect</span><span class="o">(</span> 
</span></span><span class="line"><span class="cl">        <span class="n">groupingBy</span><span class="o">(</span><span class="n">Dish</span><span class="o">::</span><span class="n">getType</span><span class="o">,</span> <span class="n">mapping</span><span class="o">(</span><span class="n">dish</span> <span class="o">-&gt;</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="o">(</span><span class="n">dish</span><span class="o">.</span><span class="na">getCalories</span><span class="o">()</span> <span class="o">&lt;=</span> <span class="n">400</span><span class="o">)</span> <span class="k">return</span> <span class="n">CaloricLevel</span><span class="o">.</span><span class="na">DIET</span><span class="o">;</span> 
</span></span><span class="line"><span class="cl">            <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">dish</span><span class="o">.</span><span class="na">getCalories</span><span class="o">()</span> <span class="o">&lt;=</span> <span class="n">700</span><span class="o">)</span> <span class="k">return</span> <span class="n">CaloricLevel</span><span class="o">.</span><span class="na">NORMAL</span><span class="o">;</span> 
</span></span><span class="line"><span class="cl">            <span class="k">else</span> <span class="k">return</span> <span class="n">CaloricLevel</span><span class="o">.</span><span class="na">FAT</span><span class="o">;</span> 
</span></span><span class="line"><span class="cl">        <span class="o">},</span> <span class="n">toSet</span><span class="o">())));</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™é‡Œï¼Œå°±åƒæˆ‘ä»¬å‰é¢è§åˆ°è¿‡çš„ï¼Œä¼ é€’ç»™æ˜ å°„æ–¹æ³•çš„è½¬æ¢å‡½æ•°å°†Dishæ˜ å°„æˆäº†å®ƒçš„CaloricLevelï¼šç”Ÿæˆçš„CaloricLevelæµä¼ é€’ç»™ä¸€ä¸ªtoSetæ”¶é›†å™¨ï¼Œå®ƒå’ŒtoListç±»ä¼¼ï¼Œ
ä¸è¿‡æ˜¯æŠŠæµä¸­çš„å…ƒç´ ç´¯ç§¯åˆ°ä¸€ä¸ªSetè€Œä¸æ˜¯Listä¸­ï¼Œä»¥ä¾¿ä»…ä¿ç•™å„ä¸ç›¸åŒçš„å€¼ã€‚å¦‚å…ˆå‰çš„ç¤ºä¾‹æ‰€ç¤ºï¼Œè¿™ä¸ªæ˜ å°„æ”¶é›†å™¨å°†ä¼šæ”¶é›†åˆ†ç»„å‡½æ•°ç”Ÿæˆçš„å„ä¸ªå­æµä¸­çš„å…ƒç´ </p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">    <span class="c1">// å¯ä»¥ç»™å®ƒä¼ é€’ä¸€ä¸ªæ„é€ å‡½æ•°å¼•ç”¨æ¥è¦æ±‚ HashSet
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">Map</span><span class="o">&lt;</span><span class="n">Dish</span><span class="o">.</span><span class="na">Type</span><span class="o">,</span> <span class="n">Set</span><span class="o">&lt;</span><span class="n">CaloricLevel</span><span class="o">&gt;&gt;</span> <span class="n">caloricLevelsByType</span> <span class="o">=</span> <span class="n">menu</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">collect</span><span class="o">(</span> 
</span></span><span class="line"><span class="cl">        <span class="n">groupingBy</span><span class="o">(</span><span class="n">Dish</span><span class="o">::</span><span class="n">getType</span><span class="o">,</span> <span class="n">mapping</span><span class="o">(</span><span class="n">dish</span> <span class="o">-&gt;</span> <span class="o">{</span> 
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="o">(</span><span class="n">dish</span><span class="o">.</span><span class="na">getCalories</span><span class="o">()</span> <span class="o">&lt;=</span> <span class="n">400</span><span class="o">)</span> <span class="k">return</span> <span class="n">CaloricLevel</span><span class="o">.</span><span class="na">DIET</span><span class="o">;</span> 
</span></span><span class="line"><span class="cl">            <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">dish</span><span class="o">.</span><span class="na">getCalories</span><span class="o">()</span> <span class="o">&lt;=</span> <span class="n">700</span><span class="o">)</span> <span class="k">return</span> <span class="n">CaloricLevel</span><span class="o">.</span><span class="na">NORMAL</span><span class="o">;</span> 
</span></span><span class="line"><span class="cl">            <span class="k">else</span> <span class="k">return</span> <span class="n">CaloricLevel</span><span class="o">.</span><span class="na">FAT</span><span class="o">;</span> 
</span></span><span class="line"><span class="cl">        <span class="o">},</span> <span class="n">toCollection</span><span class="o">(</span><span class="n">HashSet</span><span class="o">::</span><span class="k">new</span><span class="o">)</span> <span class="o">)</span>
</span></span><span class="line"><span class="cl">        <span class="o">));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// å¯æŠ½è±¡å‡ºå·¥å…·æ–¹æ³•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">static</span> <span class="o">&lt;</span><span class="n">P</span><span class="o">,</span> <span class="n">K</span><span class="o">,</span> <span class="n">V</span><span class="o">&gt;</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">K</span><span class="o">,</span> <span class="n">Set</span><span class="o">&lt;</span><span class="n">V</span><span class="o">&gt;&gt;</span> <span class="nf">groupToMapSet</span><span class="o">(</span><span class="n">Collection</span><span class="o">&lt;</span><span class="n">P</span><span class="o">&gt;</span> <span class="n">params</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">                                                  <span class="n">Function</span><span class="o">&lt;</span><span class="n">P</span><span class="o">,</span> <span class="n">K</span><span class="o">&gt;</span> <span class="n">keyFunc</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">                                                  <span class="n">Function</span><span class="o">&lt;</span><span class="n">P</span><span class="o">,</span> <span class="n">V</span><span class="o">&gt;</span> <span class="n">valFunc</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">(</span><span class="n">CollectionUtils</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">(</span><span class="n">params</span><span class="o">))</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">Collections</span><span class="o">.</span><span class="na">emptyMap</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">params</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">collect</span><span class="o">(</span><span class="n">Collectors</span><span class="o">.</span><span class="na">groupingBy</span><span class="o">(</span><span class="n">keyFunc</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">                <span class="n">Collectors</span><span class="o">.</span><span class="na">mapping</span><span class="o">(</span><span class="n">valFunc</span><span class="o">,</span> <span class="n">Collectors</span><span class="o">.</span><span class="na">toCollection</span><span class="o">(</span><span class="n">HashSet</span><span class="o">::</span><span class="k">new</span><span class="o">))</span>
</span></span><span class="line"><span class="cl">        <span class="o">));</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="åˆ†åŒº">åˆ†åŒº</h4>
<hr>
<h3 id="è‡ªå®šä¹‰-collector">è‡ªå®šä¹‰ Collector</h3>
<blockquote>
<p><a href="http://www.cnblogs.com/webor2006/p/8353314.html">å‚è€ƒ: è‡ªå®šä¹‰æ”¶é›†å™¨æ·±åº¦å‰–æï¼š</a></p>
</blockquote>
<p>java.util.stream.Collector</p>
<ul>
<li>creation of a new result container (supplier())</li>
<li>incorporating a new data element into a result container (accumulator())</li>
<li>combining two result containers into one (combiner())</li>
<li>performing an optional final transform on the container (finisher())</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">    <span class="c1">// toListå®ç°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="kd">static</span> <span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">Collector</span><span class="o">&lt;</span><span class="n">T</span><span class="o">,</span> <span class="o">?,</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&gt;</span> <span class="nf">toList</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="k">new</span> <span class="n">CollectorImpl</span><span class="o">&lt;&gt;(</span><span class="n">ArrayList</span><span class="o">::</span><span class="k">new</span><span class="o">,</span> <span class="c1">// supplier
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                                   <span class="n">List</span><span class="o">::</span><span class="n">add</span><span class="o">,</span> <span class="c1">// accumulator
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                                   <span class="o">(</span><span class="n">left</span><span class="o">,</span> <span class="n">right</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span> <span class="n">left</span><span class="o">.</span><span class="na">addAll</span><span class="o">(</span><span class="n">right</span><span class="o">);</span> <span class="k">return</span> <span class="n">left</span><span class="o">;</span> <span class="o">},</span> <span class="c1">// combiner
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                                   <span class="n">CH_ID</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// toMap å®ç°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="kd">static</span> <span class="o">&lt;</span><span class="n">T</span><span class="o">,</span> <span class="n">K</span><span class="o">,</span> <span class="n">U</span><span class="o">,</span> <span class="n">M</span> <span class="kd">extends</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">K</span><span class="o">,</span> <span class="n">U</span><span class="o">&gt;&gt;</span> <span class="n">Collector</span><span class="o">&lt;</span><span class="n">T</span><span class="o">,</span> <span class="o">?,</span> <span class="n">M</span><span class="o">&gt;</span> <span class="nf">toMap</span><span class="o">(</span><span class="n">Function</span><span class="o">&lt;?</span> <span class="kd">super</span> <span class="n">T</span><span class="o">,</span> <span class="o">?</span> <span class="kd">extends</span> <span class="n">K</span><span class="o">&gt;</span> <span class="n">keyMapper</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">                             <span class="n">Function</span><span class="o">&lt;?</span> <span class="kd">super</span> <span class="n">T</span><span class="o">,</span> <span class="o">?</span> <span class="kd">extends</span> <span class="n">U</span><span class="o">&gt;</span> <span class="n">valueMapper</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">                             <span class="n">BinaryOperator</span><span class="o">&lt;</span><span class="n">U</span><span class="o">&gt;</span> <span class="n">mergeFunction</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">                             <span class="n">Supplier</span><span class="o">&lt;</span><span class="n">M</span><span class="o">&gt;</span> <span class="n">mapFactory</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">BiConsumer</span><span class="o">&lt;</span><span class="n">M</span><span class="o">,</span> <span class="n">T</span><span class="o">&gt;</span> <span class="n">accumulator</span> <span class="o">=</span> <span class="o">(</span><span class="n">map</span><span class="o">,</span> <span class="n">element</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">map</span><span class="o">.</span><span class="na">merge</span><span class="o">(</span><span class="n">keyMapper</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">element</span><span class="o">),</span> <span class="n">valueMapper</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">element</span><span class="o">),</span> <span class="n">mergeFunction</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="k">new</span> <span class="n">CollectorImpl</span><span class="o">&lt;&gt;(</span><span class="n">mapFactory</span><span class="o">,</span> <span class="c1">// supplier
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                                    <span class="n">accumulator</span><span class="o">,</span> <span class="c1">// accumulator
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                                    <span class="n">mapMerger</span><span class="o">(</span><span class="n">mergeFunction</span><span class="o">),</span> <span class="c1">// combiner
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                                    <span class="n">CH_ID</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// toUnmodifiableSet JDK10
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="kd">static</span> <span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">Collector</span><span class="o">&lt;</span><span class="n">T</span><span class="o">,</span> <span class="o">?,</span> <span class="n">Set</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&gt;</span> <span class="nf">toUnmodifiableSet</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="k">new</span> <span class="n">CollectorImpl</span><span class="o">&lt;&gt;(</span><span class="n">HashSet</span><span class="o">::</span><span class="k">new</span><span class="o">,</span> <span class="c1">// supplier
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                                    <span class="n">Set</span><span class="o">::</span><span class="n">add</span><span class="o">,</span> <span class="c1">// accumulator
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                                   <span class="o">(</span><span class="n">left</span><span class="o">,</span> <span class="n">right</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                                       <span class="k">if</span> <span class="o">(</span><span class="n">left</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">&lt;</span> <span class="n">right</span><span class="o">.</span><span class="na">size</span><span class="o">())</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                                           <span class="n">right</span><span class="o">.</span><span class="na">addAll</span><span class="o">(</span><span class="n">left</span><span class="o">);</span> <span class="k">return</span> <span class="n">right</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">                                       <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                                           <span class="n">left</span><span class="o">.</span><span class="na">addAll</span><span class="o">(</span><span class="n">right</span><span class="o">);</span> <span class="k">return</span> <span class="n">left</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">                                       <span class="o">}</span>
</span></span><span class="line"><span class="cl">                                   <span class="o">},</span><span class="c1">// combiner 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                                   <span class="c1">// å…¶ä¸­è¿˜åŒ…å«ä¸€ä¸ªå°ä¼˜åŒ–ï¼Œåªå¾€å¤§é›†åˆä¸­è¿½åŠ å°é›†åˆï¼Œé™ä½æ’å…¥è¿ç®—æ¬¡æ•°ï¼ˆhash æ‰©å®¹çš„æˆæœ¬ï¼‰
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                                   <span class="c1">// è€ŒtoListä¸éœ€è¦æ˜¯å› ä¸ºç›´æ¥æ“ä½œçš„æ•°ç»„å†…å­˜å¤åˆ¶ å¤§å°é›†åˆæ²¡åŒºåˆ«
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                                   <span class="n">set</span> <span class="o">-&gt;</span> <span class="o">(</span><span class="n">Set</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;)</span><span class="n">Set</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">set</span><span class="o">.</span><span class="na">toArray</span><span class="o">()),</span> <span class="c1">// finisher
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                                   <span class="n">CH_UNORDERED_NOID</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">CollectorImpl</span><span class="o">(</span><span class="n">Supplier</span><span class="o">&lt;</span><span class="n">A</span><span class="o">&gt;</span> <span class="n">supplier</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">                <span class="n">BiConsumer</span><span class="o">&lt;</span><span class="n">A</span><span class="o">,</span> <span class="n">T</span><span class="o">&gt;</span> <span class="n">accumulator</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">                <span class="n">BinaryOperator</span><span class="o">&lt;</span><span class="n">A</span><span class="o">&gt;</span> <span class="n">combiner</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">                <span class="n">Set</span><span class="o">&lt;</span><span class="n">Characteristics</span><span class="o">&gt;</span> <span class="n">characteristics</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">(</span><span class="n">supplier</span><span class="o">,</span> <span class="n">accumulator</span><span class="o">,</span> <span class="n">combiner</span><span class="o">,</span> <span class="n">castingIdentity</span><span class="o">(),</span> <span class="n">characteristics</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// finish ç©ºå®ç° åªåšç±»å‹å¼ºè½¬
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">private</span> <span class="kd">static</span> <span class="o">&lt;</span><span class="n">I</span><span class="o">,</span> <span class="n">R</span><span class="o">&gt;</span> <span class="n">Function</span><span class="o">&lt;</span><span class="n">I</span><span class="o">,</span> <span class="n">R</span><span class="o">&gt;</span> <span class="nf">castingIdentity</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">i</span> <span class="o">-&gt;</span> <span class="o">(</span><span class="n">R</span><span class="o">)</span> <span class="n">i</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<h1 id="optional">Optional</h1>
<blockquote>
<ol>
<li>nullå¼•ç”¨åœ¨å†å²ä¸Šè¢«å¼•å…¥åˆ°ç¨‹åºè®¾è®¡è¯­è¨€ä¸­ï¼Œç›®çš„æ˜¯ä¸ºäº†è¡¨ç¤ºå˜é‡å€¼çš„ç¼ºå¤±ã€‚</li>
<li>Java 8ä¸­å¼•å…¥äº†ä¸€ä¸ªæ–°çš„ç±»<code>java.util.Optional&lt;T&gt;</code>ï¼Œå¯¹å­˜åœ¨æˆ–ç¼ºå¤±çš„å˜é‡å€¼è¿›è¡Œå»ºæ¨¡ã€‚</li>
<li>ä½ å¯ä»¥ä½¿ç”¨é™æ€å·¥å‚æ–¹æ³•Optional.emptyã€ Optional.ofä»¥åŠOptional.ofNullableåˆ›å»ºOptionalå¯¹è±¡ã€‚</li>
<li>Optionalç±»æ”¯æŒå¤šç§æ–¹æ³•ï¼Œæ¯”å¦‚mapã€ flatMapã€ filterï¼Œå®ƒä»¬åœ¨æ¦‚å¿µä¸Šä¸Streamç±»ä¸­å¯¹åº”çš„æ–¹æ³•ååˆ†ç›¸ä¼¼ã€‚</li>
<li>ä½¿ç”¨Optionalä¼šè¿«ä½¿ä½ æ›´ç§¯æåœ°è§£å¼•ç”¨Optionalå¯¹è±¡ï¼Œä»¥åº”å¯¹å˜é‡å€¼ç¼ºå¤±çš„é—®é¢˜ï¼Œæœ€ç»ˆï¼Œä½ èƒ½æ›´æœ‰æ•ˆåœ°é˜²æ­¢ä»£ç ä¸­å‡ºç°ä¸æœŸè€Œè‡³çš„ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚</li>
<li>ä½¿ç”¨Optionalèƒ½å¸®åŠ©ä½ è®¾è®¡æ›´å¥½çš„APIï¼Œç”¨æˆ·åªéœ€è¦é˜…è¯»æ–¹æ³•ç­¾åï¼Œå°±èƒ½äº†è§£è¯¥æ–¹æ³•æ˜¯å¦æ¥å—ä¸€ä¸ªOptionalç±»å‹çš„å€¼ã€‚</li>
</ol>
</blockquote>
<ol>
<li>èƒ½å¤Ÿæ˜¾å¼çš„åœ¨æ–¹æ³•ç­¾åä¸Šå°±è¡¨æ˜è¿”å›å€¼å¯èƒ½ä¸º &ldquo;ç©º&rdquo; (ä¸‹æ–‡ä¸­çš„ç©ºéƒ½æŒ‡ Optional.empty())
<ul>
<li>å¢å¼ºäº†å»ºæ¨¡çš„è¡¨è¾¾èƒ½åŠ› åŸŸæ¨¡å‹ä¸­ä½¿ç”¨Optionalï¼Œå°†å…è®¸ç¼ºå¤±æˆ–è€…æš‚æ— å®šä¹‰çš„å˜é‡å€¼ç”¨ç‰¹æ®Šçš„å½¢å¼æ ‡è®°å‡ºæ¥</li>
<li>çº¦æŸè°ƒç”¨æ–¹éœ€åˆ¤æ–­æ‰èƒ½ä½¿ç”¨, ä½†æ˜¯è¿™ä¸ªå¹¶ä¸æ˜¯ä¸‡èƒ½çš„, ä¾‹å¦‚é›†åˆç±»å‹çš„è¿”å›çš„æ—¶å€™, å°±ä¸ç”¨ Optional åŒ…ä½ æ˜¾å¾—ç¹ç, ç›´æ¥è¿”å› new ç©ºé›†åˆå³å¯</li>
</ul>
</li>
<li>å¦‚æœOptionalçº¦æŸäº†è¿”å›å€¼, å°±åœ¨è¯­ä¹‰ä¸Šè¡¨æ˜è¯¥æ–¹æ³•çš„è¿”å›å€¼å¯èƒ½ä¸ºç©º, å¦‚æœè¿™ä¸ªæ–¹æ³•æ˜¯åˆå§‹åŒ–æ–¹æ³•ç­‰å…·æœ‰ç‰¹æ®Šå«ä¹‰çš„æ–¹æ³•, ä¸èƒ½è¿”å›ç©º, é‚£å°±ä¸èƒ½ä½¿ç”¨Optional
<ul>
<li>è¿™æ ·è™½ç„¶ä»£ç å®‰å…¨äº†, ä½†æ˜¯å°†è¯¥æ–¹æ³•çš„è¯­ä¹‰æ··æ·†äº†.æ‰€ä»¥ ä¸ä»…ä¸èƒ½ç”¨ Optional, è¿˜éœ€åœ¨æ–¹æ³•ä¸­åŠ ä¸Š æ–­è¨€ ä»¥å°½æ—©æš´éœ²è¯¥æ–¹æ³•çš„å¼‚å¸¸</li>
<li>è™½ç„¶è¯¥æ–¹æ³•åœ¨è®¾è®¡ä¸Šæ˜¯ä¸èƒ½è¿”å›ç©º, ä½†æ˜¯è¿˜æ˜¯æœ‰å¯èƒ½è¿”å›ç©º, ä¸ºäº†å¥å£®æ€§, è¿˜æ˜¯éœ€è¦è°ƒç”¨æ–¹åšéç©ºæ£€æŸ¥</li>
</ul>
</li>
</ol>
<ul>
<li>å¸¸ç”¨æ–¹æ³•
<ul>
<li><code>of(T value)</code> å°è£…å¯¹è±¡åˆ°Optionalå†…éƒ¨, è‹¥å¯¹è±¡ä¸ºnullä¼šç«‹å³æŠ›å‡º NPE</li>
<li><code>ofNullable(T value)</code> åŒä¸Šä½†æ˜¯å…è®¸æ”¾å…¥null</li>
<li><code>get()</code> è·å–å°è£…å†…çš„å¯¹è±¡å€¼, ä½†æ˜¯è‹¥Optionalä¸ºç©º æŠ›å‡º NoSuchElementException å¼‚å¸¸</li>
<li><code>orElse(T other)</code> å½“Optionalä¸ºç©ºæ—¶æä¾›é»˜è®¤å€¼</li>
<li><code>orElseGet(Supplier&lt;? extends T&gt; other)</code> å»¶è¿Ÿæä¾›é»˜è®¤å€¼, å½“ä¸ºç©ºæ‰§è¡Œä¼ å…¥çš„å‡½æ•°å¾—åˆ°é»˜è®¤å€¼</li>
<li><code>orElseThrow(Supplier&lt;? extends X&gt; exceptionSupplier)</code> ä¸ get() ä¸€è‡´,ä½†æ˜¯å¯ä»¥è‡ªå®šä¹‰å¼‚å¸¸</li>
<li><code>ifPresent(Consumer&lt;? super T&gt;)</code> å½“ä¸ä¸ºç©ºæ‰§è¡Œä¼ å…¥çš„å‡½æ•°</li>
</ul>
</li>
</ul>
<h2 id="optionalç±»å’Œstreamæ¥å£çš„ç›¸ä¼¼ä¹‹å¤„">Optionalç±»å’ŒStreamæ¥å£çš„ç›¸ä¼¼ä¹‹å¤„</h2>
<ol>
<li>
<p><em>map</em></p>
<ol>
<li>ä½¿ç”¨ map ä» Optional å¯¹è±¡ä¸­æå–å’Œè½¬æ¢å€¼: å¯ä»¥å°† Optional çœ‹æˆåªæœ‰ä¸€ä¸ªå…ƒç´ çš„é›†åˆ, åƒStreamä¸€æ ·çš„ä½¿ç”¨ map</li>
<li>å¤„ç†ä¸¤ä¸ªOptionalå¯¹è±¡: <code>person.flatMap(p -&gt; car.map(c -&gt; findCheapestInsurance(p, c)));</code> åŸå§‹çš„å†™æ³•å°±æ˜¯è¦åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡åŒæ—¶å­˜åœ¨(person å’Œ car )æ‰è°ƒç”¨find&hellip;æ–¹æ³•</li>
</ol>
</li>
<li>
<p><em>flatMap</em></p>
<ol>
<li>æµå¼è·å– Optional çº¦æŸçš„å±æ€§ <code>Optional&lt;String&gt; name = a.flatMap(A::getB).flatMap(B::getC).map(C::getName)</code></li>
</ol>
<ul>
<li>å…¶ä¸­ <code>Optional&lt;C&gt; c;</code> æ˜¯Bçš„æˆå‘˜å±æ€§ <code>Optional&lt;B&gt; b;</code> æ˜¯Açš„æˆå‘˜å±æ€§</li>
<li>å¦‚æœç›´æ¥ä½¿ç”¨ map å°±ä¼šå‘ç”Ÿ <code>Optional&lt;Optional&lt;T&gt;&gt;</code> åµŒå¥—, æ‰€ä»¥éœ€è¦ä½¿ç”¨ flatMap</li>
</ul>
</li>
<li>
<p><em>filter</em></p>
<ol>
<li>persion å­˜åœ¨ä¸”æ»¡è¶³æ¡ä»¶å°±è¿”å›è‡ªèº«å¦åˆ™è¿”å›ç©º <code>person.filter(o -&gt; &quot;name&quot;.equals(o.getName()))</code></li>
</ol>
</li>
</ol>
<hr>
<ol>
<li>
<p><strong>æ³¨æ„</strong>: <em>Optional æ— æ³•åºåˆ—åŒ–</em>, ä¹Ÿå°±æ˜¯è¯´ä¸èƒ½ä½œä¸º PO çš„å­—æ®µ, ä½†æ˜¯å¯ä»¥åœ¨getä¸Šä¸‹åŠŸå¤«: <code>public Optional&lt;String&gt; getName(){return this.name}</code></p>
</li>
<li>
<p>å¼‚å¸¸ä¸Optionalçš„å¯¹æ¯”</p>
<ul>
<li>å½“ä¸€ä¸ªæ–¹æ³•ç”±äºæŸäº›åŸå› æ— æ³•è¿”å›æœŸæœ›å€¼, å¸¸è§çš„åšæ³•æ˜¯æŠ›å‡ºå¼‚å¸¸, æˆ–è€…è¿”å›null(ä¸å»ºè®®). ä½†æ˜¯è¿™æ—¶å€™å¤šäº†ä¸€ä¸ªé€‰æ‹©, è¿”å›Optional</li>
<li>ä¾‹å¦‚ Integer.parseInt() æ–¹æ³• è‹¥å‚æ•°å­—ç¬¦ä¸²ä¸åˆæ³•å°±ä¼šæŠ›å‡ºå¼‚å¸¸, è¿™æ—¶å€™å°±å¯ä»¥è‡ªå·±å®šä¹‰ä¸€ä¸ªå·¥å…·æ–¹æ³•, catchä½å¼‚å¸¸ è¿”å› ç©º (å¦‚ä¸‹ stringToInt æ–¹æ³•)</li>
</ul>
</li>
<li>
<p>åº”è¯¥é¿å…ä½¿ç”¨ä½¿ç”¨åŸºç¡€ç±»å‹çš„ Optional å¯¹è±¡</p>
<ul>
<li>OptionalInt OptionalLong OptionalDouble, å› ä¸ºä»–ä»¬ä¸æ”¯æŒ Stream æ“ä½œ</li>
<li>å³ä½¿ OptionalInt èƒ½ç®€åŒ– Optional<Integer></li>
</ul>
</li>
</ol>
<h2 id="å®è·µè¯»å–propertiesæŸå±æ€§">å®è·µ:è¯»å–PropertiesæŸå±æ€§</h2>
<blockquote>
<p>ä»propertiesæ–‡ä»¶ä¸­è¯»å–æŸä¸ªå±æ€§, æ­£æ•´æ•°å°±è¿”å›è¯¥å€¼, å¦åˆ™è¿”å›0</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">    <span class="c1">// åŸå§‹å†™æ³•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">readDuration</span><span class="o">(</span><span class="n">Properties</span> <span class="n">props</span><span class="o">,</span> <span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">String</span> <span class="n">value</span> <span class="o">=</span> <span class="n">props</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">(</span><span class="n">value</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">value</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="o">(</span><span class="n">i</span> <span class="o">&gt;</span> <span class="n">0</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                    <span class="k">return</span> <span class="n">i</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">                <span class="o">}</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">NumberFormatException</span> <span class="n">nfe</span><span class="o">)</span> <span class="o">{</span> <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">0</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// æ”¹è¿›
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="kd">static</span> <span class="n">Optional</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="nf">stringToInt</span><span class="o">(</span><span class="n">String</span> <span class="n">s</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">Optional</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">s</span><span class="o">));</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">NumberFormatException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">Optional</span><span class="o">.</span><span class="na">empty</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">readDuration</span><span class="o">(</span><span class="n">Properties</span> <span class="n">props</span><span class="o">,</span> <span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">Optional</span><span class="o">.</span><span class="na">ofNullable</span><span class="o">(</span><span class="n">props</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="n">name</span><span class="o">))</span>
</span></span><span class="line"><span class="cl">            <span class="o">.</span><span class="na">flatMap</span><span class="o">(</span><span class="n">OptionalUtility</span><span class="o">::</span><span class="n">stringToInt</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">            <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">i</span> <span class="o">-&gt;</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="n">0</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">            <span class="o">.</span><span class="na">orElse</span><span class="o">(</span><span class="n">0</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<h1 id="æ—¶é—´å¤„ç†">æ—¶é—´å¤„ç†</h1>
<ol>
<li>SimpleDateFormat <code>yyyy-MM-dd HH:MM:SS</code> ä½†æ˜¯çº¿ç¨‹ä¸å®‰å…¨, Java8 å¯ä½¿ç”¨ <code>DateTimeFormatter</code> ä¾‹å¦‚ DateTimeFormatter.ofPattern(&ldquo;yyyy-MM-dd HH:mm:ss.SSS&rdquo;)</li>
</ol>
<h2 id="zoneid">ZoneId</h2>
<blockquote>
<p>time-zone ID</p>
</blockquote>
<h2 id="clock">Clock</h2>
<blockquote>
<p>å…·æœ‰æ—¶åŒºä¿¡æ¯çš„æ—¶é—´ç±»</p>
</blockquote>
<p>a clock can be used instead of System.currentTimeMillis() and TimeZone.getDefault().</p>
<h2 id="duration">Duration</h2>
<p>This class models a quantity or amount of time in terms of seconds and nanoseconds.<br>
It can be accessed using other duration-based units, such as minutes and hours.</p>
<blockquote>
<p><a href="https://stackoverflow.com/questions/28427525/how-to-model-java-time-duration-in-mysql-database">How to model java.time.duration in Mysql Database</a></p>
</blockquote>
<h2 id="period">Period</h2>
<blockquote>
<p>ç±»ä¼¼äºDuration, ä¸åŒç‚¹æ˜¯ date-based</p>
</blockquote>
<h2 id="instant">Instant</h2>
<blockquote>
<p>ç”¨äºè¡¨ç¤ºæ—¶é—´çº¿ä¸Šçš„ä¸€ä¸ªç¬æ—¶ç‚¹, å¯ç”¨äºè¡¨ç¤ºæ—¶é—´æˆ³, APIæ“ä½œæ›´å‹å¥½</p>
</blockquote>
<h2 id="localdatetime">LocalDateTime</h2>
<blockquote>
<p>æ–¹ä¾¿çš„æ–°æ—¶é—´å¤„ç†ç±», ç”¨äºæ›¿ä»£Java5çš„Date, LocalDateTime å°±æ˜¯ LocalDate LocalTime çš„ç»„åˆ</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">    <span class="c1">// LocalDateTime è·å–æ¯«ç§’ä»¥åŠç§’  ä¹Ÿå¯ä»¥æ‰‹åŠ¨æŒ‡å®šä¸­å›½çš„æ—¶åŒº ZoneOffset.of(&#34;+8&#34;)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">ZonedDateTime</span> <span class="n">zonedDateTime</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="na">atZone</span><span class="o">(</span><span class="n">ZoneOffset</span><span class="o">.</span><span class="na">systemDefault</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">    <span class="n">Instant</span> <span class="n">instant</span> <span class="o">=</span> <span class="n">zonedDateTime</span><span class="o">.</span><span class="na">toInstant</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">Date</span> <span class="n">date</span> <span class="o">=</span> <span class="n">Date</span><span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">instant</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1">// LocalDateTime -&gt; Date
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">Date</span><span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">datetime</span><span class="o">.</span><span class="na">atZone</span><span class="o">(</span><span class="n">ZoneId</span><span class="o">.</span><span class="na">systemDefault</span><span class="o">()).</span><span class="na">toInstant</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Date -&gt; LocalDateTime 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">LocalDateTime</span><span class="o">.</span><span class="na">ofInstant</span><span class="o">(</span><span class="n">date</span><span class="o">.</span><span class="na">toInstant</span><span class="o">(),</span> <span class="n">ZoneOffset</span><span class="o">.</span><span class="na">systemDefault</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// æ ¼å¼åŒ–
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">DateTimeFormatter</span> <span class="n">fmt</span> <span class="o">=</span> <span class="n">DateTimeFormatter</span><span class="o">.</span><span class="na">ofPattern</span><span class="o">(</span><span class="s">&#34;yyyy-MM-dd HH:mm:ss&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">fmt</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">LocalDateTime</span><span class="o">.</span><span class="na">now</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// è§£æ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">LocalDateTime</span> <span class="n">parse</span> <span class="o">=</span> <span class="n">LocalDateTime</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">timeStr</span><span class="o">,</span> <span class="n">fmt</span><span class="o">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="localdate">LocalDate</h3>
<ul>
<li>è·å–è‡ªç„¶å‘¨å¼€å§‹æ—¶é—´ <code>LocalDate.now().with(WeekFields.ISO.dayOfWeek(), 1L);</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">    <span class="c1">// å¸¸è§æ ¼å¼
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">DateTimeFormatter</span> <span class="n">format</span> <span class="o">=</span> <span class="n">DateTimeFormatter</span><span class="o">.</span><span class="na">ofPattern</span><span class="o">(</span><span class="s">&#34;yyyyMMdd&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">LocalDate</span> <span class="n">parse</span> <span class="o">=</span> <span class="n">LocalDate</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="s">&#34;20171018&#34;</span><span class="o">,</span> <span class="n">format</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// æ ¼å¼ä¸å…¨æ—¶ï¼ˆå¹´æœˆæ—¥ï¼‰éœ€ç‰¹æ®Šå¤„ç† è¡¥å…¨å¯¹åº”é»˜è®¤å€¼
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">DateTimeFormatter</span> <span class="n">monthFMT</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DateTimeFormatterBuilder</span><span class="o">()</span>
</span></span><span class="line"><span class="cl">                        <span class="o">.</span><span class="na">appendPattern</span><span class="o">(</span><span class="s">&#34;yyyy&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">                        <span class="o">.</span><span class="na">parseDefaulting</span><span class="o">(</span><span class="n">ChronoField</span><span class="o">.</span><span class="na">MONTH_OF_YEAR</span><span class="o">,</span> <span class="n">1</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">                        <span class="o">.</span><span class="na">parseDefaulting</span><span class="o">(</span><span class="n">ChronoField</span><span class="o">.</span><span class="na">DAY_OF_MONTH</span><span class="o">,</span> <span class="n">1</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">                        <span class="o">.</span><span class="na">toFormatter</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">LocalDate</span> <span class="n">parse</span> <span class="o">=</span> <span class="n">LocalDate</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="s">&#34;2017&#34;</span><span class="o">,</span> <span class="n">monthFMT</span><span class="o">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="localtime">LocalTime</h3>
<h2 id="zoneoffset">ZoneOffset</h2>
<p>æ—¶åŒºåç§»é‡ï¼Œæ¯”å¦‚ï¼š+8:00</p>
<h2 id="zoneddatetime">ZonedDateTime</h2>
<p>å¸¦æ—¶åŒºçš„æ—¶é—´</p>
<h2 id="clock-1">Clock</h2>
<blockquote>
<p><a href="https://www.baeldung.com/java-clock">Guide to the Java Clock Class</a></p>
</blockquote>

    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">Author</span>
    <span class="item-content">Kuangcp</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">LastMod</span>
    <span class="item-content">
        2018-12-13
        
    </span>
  </p>
  
  
</div>
<footer class="post-footer">
      
      <nav class="post-nav">
        <a class="prev" href="/post/java/basic/javaexception/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Javaå¼‚å¸¸å¤„ç†</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/skills/ecology/webperformance/">
            <span class="next-text nav-default">Webæ€§èƒ½è°ƒä¼˜</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="https://github.com/Kuangcp" class="iconfont icon-github" title="github"></a>
  <a href="https://www.kuangcp.top/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://gitee.com/gin9/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2016 - 
    2024<span class="heart"><i class="iconfont icon-heart"></i></span>
    <span>Kuangcp</span>
    
    <br/><span><a href='http://beian.miit.gov.cn/'; target=_blank>èµ£ICPå¤‡17014189å·</a></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.64437849d125a2d603b3e71d6de5225d641a32d17168a58106e0b61852079683.js"></script>








</body>
</html>
