<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Docker的应用 - Mythos · Java Developer</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="Kuangcp" /><meta name="description" content="💠 Docker应用 1.1. 个人镜像 1.2. Linux发行版 1.2.1. Ubuntu-ssh 1.2.2. Alpine-ssh 1.2.3. Centos-ssh 1.3. Java 1.3.1. Local 1.3.2. Jib 1.4. NodeJs 1.5. 中间件 1.6. 数据库 1.6.1. PostgreSQL 1.6.2. Oracle 1.6.3. MySQL 1.6.4. MongoDB 1.6.5. Redis 1.7. 持续集成 1.7.1. flow.ci 1.7.2. Jenkins 1.8. git服务" /><meta name="keywords" content="Hugo, theme, even" />






<meta name="generator" content="Hugo 0.99.0 with theme even" />


<link rel="canonical" href="https://www.kuangcp.top/post/linux/container/dockersoft/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.b5a744db6de49a86cadafb3b70f555ab443f83c307a483402259e94726b045ff.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="Docker的应用" />
<meta property="og:description" content="💠 Docker应用 1.1. 个人镜像 1.2. Linux发行版 1.2.1. Ubuntu-ssh 1.2.2. Alpine-ssh 1.2.3. Centos-ssh 1.3. Java 1.3.1. Local 1.3.2. Jib 1.4. NodeJs 1.5. 中间件 1.6. 数据库 1.6.1. PostgreSQL 1.6.2. Oracle 1.6.3. MySQL 1.6.4. MongoDB 1.6.5. Redis 1.7. 持续集成 1.7.1. flow.ci 1.7.2. Jenkins 1.8. git服务" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.kuangcp.top/post/linux/container/dockersoft/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2018-12-15T11:27:31+00:00" />
<meta property="article:modified_time" content="2018-12-15T11:27:31+00:00" />

<meta itemprop="name" content="Docker的应用">
<meta itemprop="description" content="💠 Docker应用 1.1. 个人镜像 1.2. Linux发行版 1.2.1. Ubuntu-ssh 1.2.2. Alpine-ssh 1.2.3. Centos-ssh 1.3. Java 1.3.1. Local 1.3.2. Jib 1.4. NodeJs 1.5. 中间件 1.6. 数据库 1.6.1. PostgreSQL 1.6.2. Oracle 1.6.3. MySQL 1.6.4. MongoDB 1.6.5. Redis 1.7. 持续集成 1.7.1. flow.ci 1.7.2. Jenkins 1.8. git服务"><meta itemprop="datePublished" content="2018-12-15T11:27:31+00:00" />
<meta itemprop="dateModified" content="2018-12-15T11:27:31+00:00" />
<meta itemprop="wordCount" content="1630">
<meta itemprop="keywords" content="工具使用经验," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Docker的应用"/>
<meta name="twitter:description" content="💠 Docker应用 1.1. 个人镜像 1.2. Linux发行版 1.2.1. Ubuntu-ssh 1.2.2. Alpine-ssh 1.2.3. Centos-ssh 1.3. Java 1.3.1. Local 1.3.2. Jib 1.4. NodeJs 1.5. 中间件 1.6. 数据库 1.6.1. PostgreSQL 1.6.2. Oracle 1.6.3. MySQL 1.6.4. MongoDB 1.6.5. Redis 1.7. 持续集成 1.7.1. flow.ci 1.7.2. Jenkins 1.8. git服务"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Mythos</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">Mythos</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Docker的应用</h1>

      <div class="post-meta">
        <span class="post-time"> 2018-12-15 </span>
        <div class="post-category">
            <a href="/categories/docker/"> Docker </a>
            </div>
          <span class="more-meta"> 约 1630 字 </span>
          <span class="more-meta"> 预计阅读 4 分钟 </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#docker应用">Docker应用</a>
      <ul>
        <li><a href="#个人镜像">个人镜像</a></li>
        <li><a href="#linux发行版">Linux发行版</a>
          <ul>
            <li><a href="#ubuntu-ssh">Ubuntu-ssh</a></li>
            <li><a href="#alpine-ssh">Alpine-ssh</a></li>
            <li><a href="#centos-ssh">Centos-ssh</a></li>
          </ul>
        </li>
        <li><a href="#java">Java</a>
          <ul>
            <li><a href="#local">Local</a></li>
            <li><a href="#jib">Jib</a></li>
          </ul>
        </li>
        <li><a href="#nodejs">NodeJs</a></li>
        <li><a href="#中间件">中间件</a></li>
        <li><a href="#数据库">数据库</a>
          <ul>
            <li><a href="#postgresql">PostgreSQL</a></li>
            <li><a href="#oracle">Oracle</a></li>
            <li><a href="#mysql">MySQL</a></li>
            <li><a href="#mongodb">MongoDB</a></li>
            <li><a href="#redis">Redis</a></li>
          </ul>
        </li>
        <li><a href="#持续集成">持续集成</a>
          <ul>
            <li><a href="#flowci">flow.ci</a></li>
            <li><a href="#jenkins">Jenkins</a></li>
          </ul>
        </li>
        <li><a href="#git服务器">git服务器</a>
          <ul>
            <li><a href="#简易git-daemon">简易git-daemon</a></li>
            <li><a href="#gogs">Gogs</a></li>
            <li><a href="#gitea">Gitea</a></li>
          </ul>
        </li>
        <li><a href="#在线ide">在线IDE</a></li>
      </ul>
    </li>
    <li><a href="#图形化应用">图形化应用</a></li>
    <li><a href="#工具">工具</a>
      <ul>
        <li><a href="#nextcloud">nextcloud</a></li>
        <li><a href="#protobuf">Protobuf</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
  <div class="post-outdated">
    <div class="warn">
      <p>【注意】最后更新于 <span class="timeago" datetime="2018-12-15T11:27:31" title="December 15, 2018">December 15, 2018</span>，文中内容可能已过时，请谨慎使用。</p>
    </div>
  </div>
    <div class="post-content">
      <p>💠</p>
<ul>
<li>
<ol>
<li><a href="#docker%E5%BA%94%E7%94%A8">Docker应用</a></li>
</ol>
<ul>
<li>1.1. <a href="#%E4%B8%AA%E4%BA%BA%E9%95%9C%E5%83%8F">个人镜像</a></li>
<li>1.2. <a href="#linux%E5%8F%91%E8%A1%8C%E7%89%88">Linux发行版</a>
<ul>
<li>1.2.1. <a href="#ubuntu-ssh">Ubuntu-ssh</a></li>
<li>1.2.2. <a href="#alpine-ssh">Alpine-ssh</a></li>
<li>1.2.3. <a href="#centos-ssh">Centos-ssh</a></li>
</ul>
</li>
<li>1.3. <a href="#java">Java</a>
<ul>
<li>1.3.1. <a href="#local">Local</a></li>
<li>1.3.2. <a href="#jib">Jib</a></li>
</ul>
</li>
<li>1.4. <a href="#nodejs">NodeJs</a></li>
<li>1.5. <a href="#%E4%B8%AD%E9%97%B4%E4%BB%B6">中间件</a></li>
<li>1.6. <a href="#%E6%95%B0%E6%8D%AE%E5%BA%93">数据库</a>
<ul>
<li>1.6.1. <a href="#postgresql">PostgreSQL</a></li>
<li>1.6.2. <a href="#oracle">Oracle</a></li>
<li>1.6.3. <a href="#mysql">MySQL</a></li>
<li>1.6.4. <a href="#mongodb">MongoDB</a></li>
<li>1.6.5. <a href="#redis">Redis</a></li>
</ul>
</li>
<li>1.7. <a href="#%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90">持续集成</a>
<ul>
<li>1.7.1. <a href="#flowci">flow.ci</a></li>
<li>1.7.2. <a href="#jenkins">Jenkins</a></li>
</ul>
</li>
<li>1.8. <a href="#git%E6%9C%8D%E5%8A%A1%E5%99%A8">git服务器</a>
<ul>
<li>1.8.1. <a href="#%E7%AE%80%E6%98%93git-daemon">简易git-daemon</a></li>
<li>1.8.2. <a href="#gogs">Gogs</a></li>
<li>1.8.3. <a href="#gitea">Gitea</a>
<ul>
<li>1.8.3.1. <a href="#%E9%85%8D%E7%BD%AE">配置</a></li>
</ul>
</li>
</ul>
</li>
<li>1.9. <a href="#%E5%9C%A8%E7%BA%BFide">在线IDE</a></li>
</ul>
</li>
<li>
<ol start="2">
<li><a href="#%E5%9B%BE%E5%BD%A2%E5%8C%96%E5%BA%94%E7%94%A8">图形化应用</a></li>
</ol>
</li>
<li>
<ol start="3">
<li><a href="#%E5%B7%A5%E5%85%B7">工具</a></li>
</ol>
<ul>
<li>3.1. <a href="#nextcloud">nextcloud</a></li>
<li>3.2. <a href="#protobuf">Protobuf</a></li>
</ul>
</li>
</ul>
<p>💠 2024-04-15 11:04:31</p>
<hr>
<h1 id="docker应用">Docker应用</h1>
<blockquote>
<p><a href="https://docs.docker.com/samples/">https://docs.docker.com/samples/</a><br>
<a href="https://hub.docker.com/explore/">Docker Hub: explore</a></p>
</blockquote>
<ul>
<li><a href="https://hub.docker.com/_/docker/">Official: Docker in docker</a></li>
<li><a href="https://hub.docker.com/_/registry/">Official: registry</a></li>
</ul>
<blockquote>
<p><a href="http://www.open-open.com/lib/view/open1419760974078.html">如何创建尽可能小的Docker容器教程</a>
<a href="https://juejin.im/post/5e0002adf265da33dc7a3a1f?from=singlemessage">参考: 一次 Docker 容器内大量僵死进程排查分析</a></p>
</blockquote>
<h2 id="个人镜像">个人镜像</h2>
<p><code>百度云</code></p>
<ul>
<li>
<p>配置好SSH服务器的 alpine 3.6 | <a href="https://hub.docker.com/r/mythkuang/alpine-ssh/">docker hub地址</a> | 百度镜像源: <code>hub.baidubce.com/mythos/alpine-ssh:1.0</code></p>
<ol>
<li><code>docker run --name sshd -p 8989:22 hub.baidubce.com/mythos/alpine-ssh:1.0</code></li>
<li>设置root用户密码 <code>docker exec -it sshd passwd</code></li>
<li>登录 <code>ssh -p 8989 root@localhost</code></li>
</ol>
</li>
<li>
<p>Jenkins 镜像 <code>hub.baidubce.com/mythos/jenkins:2.138.1</code></p>
</li>
<li>
<p>protobuf的编译环境以及2.5的源码在内 <code>hub.baidubce.com/mythos/protoc-alpine-src:2.5</code></p>
<ul>
<li>protobuf 的 Alpine 的 2.5版本 <code>hub.baidubce.com/mythos/protoc-alpine:2.5</code></li>
<li>protobuf 的 Ubuntu 的 2.5版本 <code>hub.baidubce.com/mythos/protoc:2.5</code></li>
<li>protobuf 的 Alpine 的 3.5.1版本 <code>hub.baidubce.com/mythos/protoc-alpine:3.5.1</code></li>
</ul>
</li>
</ul>
<hr>
<h2 id="linux发行版">Linux发行版</h2>
<blockquote>
<p>只适合自己折腾, 不应该用于应用的镜像, 应用不该开放ssh</p>
</blockquote>
<h3 id="ubuntu-ssh">Ubuntu-ssh</h3>
<ul>
<li>最为简单的是：<code>docker run  -i -t --name ubuntu17 -p 34433:22 ubuntu /bin/bash</code>
<ul>
<li>为这些软件预留端口 <code>ssh tomcat mysql postgresql mysql oracle nginx reids</code></li>
<li>直接跑一个Ubuntu出来,预留出要用的端口，容器运行不会退出</li>
<li>进终端之后就 <code>apt update</code> 才能安装软件，现在才知道这个命令的重要性</li>
</ul>
</li>
<li>现在的问题是：能不能在已经运行的容器中添加端口映射？？要是用到途中发现端口少了就麻烦了，解决方法可以是commit成镜像再跑出一个容器出来，</li>
<li>最好是一个服务（应用）一个容器</li>
</ul>
<hr>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Dockerfile" data-lang="Dockerfile"><span class="line"><span class="cl"><span class="k">FROM</span><span class="s"> ubuntu</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">ENV</span> DEBIAN_FRONTEND noninteractive<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">ADD</span> id_rsa.pub /root/.ssh/authorized_keys<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> apt-get update<span class="p">;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    apt-get install -y apt-utils debconf-utils iputils-ping wget curl htop ssh tini<span class="p">;</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> chmod <span class="m">700</span> /root/.ssh<span class="p">;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    chmod <span class="m">600</span> /root/.ssh/authorized_keys<span class="p">;</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">ENTRYPOINT</span> <span class="p">[</span><span class="s2">&#34;/usr/bin/tini&#34;</span><span class="p">,</span> <span class="s2">&#34;--&#34;</span><span class="p">]</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">EXPOSE</span><span class="s"> 22</span><span class="err">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ol>
<li><code>mkdir tmp &amp;&amp; cd tmp &amp;&amp; cp ~/.ssh/id_rsa.pub .</code> 复制公钥</li>
<li><code>docker build . -t myth:ssh</code> 构建镜像</li>
<li><code>docker run -i -t  --name myth -p 30001:22 myth:ssh /bin/bash</code></li>
<li><code>docker start myth</code>
每次启动容器需要手动执行 service ssh start</li>
</ol>
<h3 id="alpine-ssh">Alpine-ssh</h3>
<ul>
<li><a href="https://github.com/Kuangcp/DockerfileList/blob/master/alpine/alpine-ssh.dockerfile">dockerfile: alpine-ssh</a>
<ul>
<li>也可以使用百度云镜像 <code>docker pull hub.baidubce.com/mythos/alpine-ssh:1.0</code></li>
</ul>
</li>
</ul>
<h3 id="centos-ssh">Centos-ssh</h3>
<ul>
<li><a href="https://github.com/jingniao/centos-ssh">centos-ssh</a></li>
</ul>
<hr>
<h2 id="java">Java</h2>
<ul>
<li>
<p><a href="https://hub.docker.com/_/java/">Official: Java</a> <code>Oracle</code> | <a href="https://hub.docker.com/_/openjdk/">Official: OpenJDK</a><code>从7开始</code></p>
</li>
<li>
<p><a href="https://hub.docker.com/r/frolvlad/alpine-java">frolvlad alpine-java</a><code>非常精简</code></p>
<ul>
<li><code>个人基于以上镜像 设置好CST中国时区</code><a href="https://hub.docker.com/r/mythkuang/jdk-alpine-cst/">jdk-alpine-cst</a></li>
<li><code>可以学习一波Dockerfile</code> <a href="https://github.com/frol/docker-alpine-java">Github: Dockerfile</a></li>
</ul>
</li>
<li>
<p>Java7 <code>docker pull java:7u121-jdk-alpine</code></p>
</li>
<li>
<p>Java8 <code>docker pull frolvlad/alpine-java:jdk8.202.08-slim</code> 或者配置好时区的镜像 <code>mythkuang/jdk-alpine-cst:8.181</code></p>
</li>
</ul>
<blockquote>
<p><code>Tips</code></p>
</blockquote>
<ol>
<li>
<p>docker run 时加上 <code>--cap-add=SYS_PTRACE</code> 解决 jmap -heap 1 时报错： Can&rsquo;t attach to the process: ptrace</p>
</li>
<li>
<p><a href="https://mp.weixin.qq.com/s?__biz=MzI3NzE0NjcwMg==&amp;mid=2650121506&amp;idx=1&amp;sn=39e3ba8c5d9698bbfb8acfc6b7e772bf&amp;chksm=f36bb803c41c3115371b69cbd1e626fcaf5a85c7034f96fe495cfbf6dc1630a42dfdd6e342da&amp;mpshare=1&amp;scene=1&amp;srcid=06219wgtCPJNvZP66ccQXRCj#rd">参考: 使用Docker 实现微服务并搭建博客，一文全掌握。 </a></p>
</li>
</ol>
<h3 id="local">Local</h3>
<blockquote>
<p>env.sh</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="nv">JAVA_HOME</span><span class="o">=</span>/path/to
</span></span><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">JRE_HOME</span><span class="o">=</span><span class="si">${</span><span class="nv">JAVA_HOME</span><span class="si">}</span>/jre
</span></span><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">CLASSPATH</span><span class="o">=</span>.:<span class="si">${</span><span class="nv">JAVA_HOME</span><span class="si">}</span>/lib:<span class="si">${</span><span class="nv">JRE_HOME</span><span class="si">}</span>/lib
</span></span><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span><span class="si">${</span><span class="nv">JAVA_HOME</span><span class="si">}</span>/bin:<span class="nv">$PATH</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Dockerfile" data-lang="Dockerfile"><span class="line"><span class="cl"><span class="k">FROM</span><span class="s"> myth:ssh</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">ADD</span> *.tgz jdk.tgz<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">ADD</span> env.sh<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> apt install vim unzip <span class="p">;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    cat env.sh &gt;&gt; /root/.bashrc<span class="p">;</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">EXPOSE</span><span class="s"> 22</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">ENTRYPOINT</span> <span class="p">[</span><span class="s2">&#34;/usr/bin/tini&#34;</span><span class="p">,</span> <span class="s2">&#34;--&#34;</span><span class="p">]</span><span class="err">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="jib">Jib</h3>
<blockquote>
<p><a href="https://my.oschina.net/u/3666671/blog/1845065">参考: GOOGLE JIB</a> | <a href="https://github.com/GoogleContainerTools/jib">Github:jib</a></p>
</blockquote>
<h2 id="nodejs">NodeJs</h2>
<ul>
<li><a href="https://hub.docker.com/_/node/">Official</a></li>
<li><a href="https://nodejs.org/en/docs/guides/nodejs-docker-webapp/">Dockerizing a Node.js web app</a></li>
</ul>
<hr>
<h2 id="中间件">中间件</h2>
<ul>
<li><a href="https://nacos.io/en-us/docs/quick-start-docker.html">Nacos</a></li>
</ul>
<hr>
<h2 id="数据库">数据库</h2>
<h3 id="postgresql">PostgreSQL</h3>
<ul>
<li><a href="/Database/PostgreSQL.md">Docker 安装 PostgreSQL</a></li>
</ul>
<h3 id="oracle">Oracle</h3>
<blockquote>
<p><a href="https://github.com/oracle/docker-images">oracle/docker-images: Official source of container configurations, images, and examples for Oracle products and projects</a></p>
</blockquote>
<h3 id="mysql">MySQL</h3>
<ul>
<li>
<p><a href="https://hub.docker.com/_/mysql/">Docker hub: Mysql</a></p>
</li>
<li>
<p>简单启动 <code>docker run --name some-mysql -p 3360:3306 -e MYSQL_ROOT_PASSWORD=my-secret-pw -d mysql:tag</code></p>
<ul>
<li>容器中默认配置文件为 <code>/etc/mysql/conf.d/docker.cnf</code></li>
</ul>
</li>
<li>
<p>或者挂载自定义配置文件 主要是配置编码 以及设定时区</p>
<ul>
<li><code>docker run --name mysql-5.7 -v 配置文件目录:/etc/mysql/conf.d  -e MYSQL_ROOT_PASSWORD=mythos1104 -e TZ=Asia/Shanghai -p 3360:3306 -d mysql:5.7</code></li>
</ul>
</li>
<li>
<p>连接 <code>mysql -h 127.0.0.1 -P 3360 -uroot -pmythos1104</code></p>
</li>
</ul>
<blockquote>
<p>最简单方式, 前提是已经安装好 docker-compose</p>
</blockquote>
<ol>
<li><a href="https://github.com/Kuangcp/DockerfileList/tree/master/docker-compose/mysql">Github</a><code>克隆项目,在该目录下执行命令</code>
<ul>
<li><code>docker-compose up -d</code> 既可创建 正确时区, utf8编码的数据库</li>
</ul>
</li>
</ol>
<h3 id="mongodb">MongoDB</h3>
<blockquote>
<p><a href="https://hub.docker.com/_/mongo/">Official</a></p>
</blockquote>
<h3 id="redis">Redis</h3>
<blockquote>
<p><a href="https://hub.docker.com/_/redis/">Official</a></p>
</blockquote>
<ol>
<li>获取镜像：<code>docker pull redis </code> 使用 <code>docker pull redis:alpine</code> 镜像可以更小</li>
<li>运行默认配置的容器：<code>docker run --name test-redis -d redis</code></li>
<li>或者 使用本地配置文件启动redis容器
<ul>
<li><code>sudo docker run -v /myredis/conf/redis.conf:/usr/local/etc/redis/redis.conf --name myredis redis redis-server /usr/local/etc/redis/redis.conf</code></li>
</ul>
</li>
</ol>
<ul>
<li><code>数据迁移(RDB方式)</code> 复制rdb文件到容器内 /data/dump.rdb ， kill -9 redis进程，启动 redis</li>
</ul>
<hr>
<h2 id="持续集成">持续集成</h2>
<blockquote>
<p><a href="https://www.tuicool.com/articles/YZJzAzF">参考: 如何Docker化端到端验收测试</a></p>
</blockquote>
<h3 id="flowci">flow.ci</h3>
<ul>
<li><a href="https://github.com/flowci/docker">flow.ci</a> 可以学习compose</li>
</ul>
<hr>
<h3 id="jenkins">Jenkins</h3>
<blockquote>
<p><a href="/Skills/DevOps/Jenkins.md#docker">详情</a></p>
</blockquote>
<hr>
<h2 id="git服务器">git服务器</h2>
<h3 id="简易git-daemon">简易git-daemon</h3>
<blockquote>
<p>基于git-daemon构建一个Docker镜像, 跑起来直接做git服务器 | <a href="/Skills/Vcs/GitAction.md#%E4%BD%BF%E7%94%A8-git-daemon-%E6%90%AD%E5%BB%BA%E7%AE%80%E6%98%93-server">学习使用git-daemon命令</a></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">    <span class="c1"># 创建一个挂载了本地文件夹的git仓库，并关联到nginx，目录结构和上文一致</span>
</span></span><span class="line"><span class="cl">    docker run --name git-repos -it -v /home/kuang/Repository/:/root/Repository/ --link mynginx:mynginx alpine
</span></span><span class="line"><span class="cl">    <span class="c1"># 进入容器</span>
</span></span><span class="line"><span class="cl">    docker <span class="nb">exec</span> -it git-repos ash
</span></span><span class="line"><span class="cl">    <span class="c1"># 安装git</span>
</span></span><span class="line"><span class="cl">    apk update
</span></span><span class="line"><span class="cl">    apk add git git-daemon
</span></span><span class="line"><span class="cl">    <span class="c1">#　启动服务</span>
</span></span><span class="line"><span class="cl">    git daemon --export-all --base-path<span class="o">=</span><span class="s2">&#34;/root/Repository&#34;</span> --port<span class="o">=</span><span class="m">55443</span>
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>通过 daemon 能下拉提交代码, nginx 能在线浏览文件</p>
</blockquote>
<h3 id="gogs">Gogs</h3>
<h3 id="gitea">Gitea</h3>
<ul>
<li><a href="https://docs.gitea.io/en-us/install-with-docker/">docker 安装 gitea</a> <code>gitea是一个自助git服务，基于git</code>
<ul>
<li><a href="https://docs.gitea.io/zh-cn/install-with-docker/">中文版</a></li>
</ul>
</li>
<li><a href="https://docs.gitea.io/zh-cn/config-cheat-sheet/">gitea配置文件说明</a></li>
</ul>
<h4 id="配置">配置</h4>
<blockquote>
<p>配置SSH</p>
</blockquote>
<p>只要没有禁用掉SSH, 就能和Github一样使用SSH操作仓库, 为了避免其他进程的端口冲突, 单独设置端口 例如: 6002映射到了22上<br>
<code>~/.ssh/config</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">    Host git.kuangcp.com
</span></span><span class="line"><span class="cl">    HostName 111.111.111.111
</span></span><span class="line"><span class="cl">    User git
</span></span><span class="line"><span class="cl">    Port 6002
</span></span><span class="line"><span class="cl">    IdentityFile /home/kcp/.ssh/id_rsa
</span></span></code></pre></td></tr></table>
</div>
</div><p>然后就能正常使用了</p>
<hr>
<h2 id="在线ide">在线IDE</h2>
<ul>
<li>
<p>Coding平台的WebIDE</p>
</li>
<li>
<p>eclipse che</p>
</li>
<li>
<p><a href="https://github.com/codercom/code-server">coder-sever</a><code>BS模式的VSCode</code></p>
</li>
</ul>
<hr>
<h1 id="图形化应用">图形化应用</h1>
<blockquote>
<p><a href="https://github.com/search?p=4&amp;q=docker+desktop&amp;type=Repositories&amp;utf8=%E2%9C%93">Github Topic</a><br>
<a href="https://www.tuicool.com/articles/ayIzI3">Running GUI apps with Docker</a><br>
<a href="https://www.cnblogs.com/larva-zhh/p/10531824.html">在Docker for Windows中运行GUI程序 </a></p>
</blockquote>
<hr>
<h1 id="工具">工具</h1>
<h2 id="nextcloud">nextcloud</h2>
<blockquote>
<p><a href="https://nextcloud.com/install/">nextcloud</a></p>
</blockquote>
<p><code>docker run -d --name nextcloud -p 8008:80 -v /data/nextcloud:/var/www/html nextcloud</code></p>
<h2 id="protobuf">Protobuf</h2>
<ol>
<li>创建一个Ubuntu/alpine 容器运行起来</li>
<li>下载 <a href="https://github.com/google/protobuf/releases">Github Release</a></li>
<li>安装 g++ make</li>
<li>编译安装下载的源码 进入目录 <code>./configure --prefix=/usr &amp;&amp; make &amp;&amp; make check &amp;&amp; make install</code></li>
</ol>

    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content">Kuangcp</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更新</span>
    <span class="item-content">
        2018-12-15
        
    </span>
  </p>
  
  
</div>
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E7%BB%8F%E9%AA%8C/">工具使用经验</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/linux/container/kubernetes/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Kubernetes</span>
            <span class="prev-text nav-mobile">上一篇</span>
          </a>
        <a class="next" href="/post/linux/container/dockerfiles/">
            <span class="next-text nav-default">DockerFile</span>
            <span class="next-text nav-mobile">下一篇</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="https://github.com/Kuangcp" class="iconfont icon-github" title="github"></a>
  <a href="https://www.kuangcp.top/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" href="https://gohugo.io">Hugo</a> 强力驱动
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    主题 - 
    <a class="theme-link" href="https://gitee.com/gin9/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2017 - 
    2024<span class="heart"><i class="iconfont icon-heart"></i></span>
    <span>Kuangcp</span>
    
    <br/><span><a href='http://beian.miit.gov.cn/'; target=_blank>www.kuangcp.top</a></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/timeago.js@3.0.2/dist/timeago.min.js" integrity="sha256-jwCP0NAdCBloaIWTWHmW4i3snUNMHUNO+jr9rYd2iOI=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/timeago.js@3.0.2/dist/timeago.locales.min.js" integrity="sha256-ZwofwC1Lf/faQCzN7nZtfijVV6hSwxjQMwXL4gn9qU8=" crossorigin="anonymous"></script>
  <script><!-- NOTE: timeago.js uses the language code format like "zh_CN" (underscore and case sensitive) -->
    var languageCode = "zh-cn".replace(/-/g, '_').replace(/_(.*)/, function ($0, $1) {return $0.replace($1, $1.toUpperCase());});
    timeago().render(document.querySelectorAll('.timeago'), languageCode);
    timeago.cancel();  
  </script>



<script type="text/javascript" src="/js/main.min.64437849d125a2d603b3e71d6de5225d641a32d17168a58106e0b61852079683.js"></script>






</body>
</html>
